/*! For license information please see entry.392b9a30429578b40d74.bundle.js.LICENSE.txt */
(()=>{"use strict";var t={550:(t,e,i)=>{i.d(e,{Z:()=>W});var s=i(81),n=i.n(s),r=i(645),o=i.n(r),a=i(667),c=i.n(a),l=new URL(i(668),i.b),h=new URL(i(468),i.b),u=new URL(i(291),i.b),d=new URL(i(904),i.b),p=new URL(i(805),i.b),f=new URL(i(35),i.b),g=new URL(i(137),i.b),v=new URL(i(155),i.b),m=new URL(i(101),i.b),w=new URL(i(692),i.b),b=new URL(i(399),i.b),y=new URL(i(570),i.b),$=new URL(i(911),i.b),k=new URL(i(561),i.b),x=new URL(i(492),i.b),C=new URL(i(604),i.b),S=new URL(i(166),i.b),A=o()(n()),T=c()(l),R=c()(h),E=c()(u),O=c()(d),P=c()(p),j=c()(f),I=c()(g),U=c()(v),L=c()(m),M=c()(w),N=c()(b),B=c()(y),V=c()($),D=c()(k),q=c()(x),F=c()(C),H=c()(S);A.push([t.id,'body {\n  margin: 0 auto;\n  font-family: "Calibri", sans-serif;\n}\n\nnav, #content, footer {\n  position: relative;\n  z-index: 1;\n}\n\nnav, footer {\n  background-color: #181818;\n  text-align: center;\n  padding: 4px;\n}\n\nnav a {\n  font-size: 1.5em;\n  text-decoration: none;\n  margin-left: 1%;\n  margin-right: 1%;\n}\n\nnav a:link, nav a:visited {\n  color: #CCC;\n}\n\nnav a:hover {\n  color: #888;\n}\n\n#category {\n  width: 100%;\n  height: 100%;\n  background-image: url('+T+");\n  background-attachment: fixed;\n  background-position: top;\n  background-size: cover;\n  top: 0;\n  position: fixed;\n  z-index: 0;\n}\n\n#content {\n  background: rgb(255, 255, 255);\n  background: rgba(255, 255, 255, 0.7);\n  border-radius: 16px;\n  margin: 20px auto 50px;\n  padding: 10px;\n  width: min(90%, 960px);\n}\n\nh1, h3 {\n  text-align: center;\n}\n\nh1 {\n  margin: 0;\n  text-transform: capitalize;\n}\n\nloading p {\n  text-align: center;\n}\n\np {\n  margin: 16px auto 0;\n}\n\nfooter {\n  position: fixed;\n  bottom: 0;\n  color: #888;\n  width: 100%;\n}\n\n.animal {\n  background-image: url("+R+") !important;\n}\n\n.career {\n  background-image: url("+E+") !important;\n}\n\n.celebrity {\n  background-image: url("+O+") !important;\n}\n\n.dev {\n  background-image: url("+P+") !important;\n}\n\n.explicit {\n  background-image: url("+j+") !important;\n}\n\n.fashion {\n  background-image: url("+I+") !important;\n}\n\n.food {\n  background-image: url("+U+") !important;\n}\n\n.history {\n  background-image: url("+L+") !important;\n}\n\n.money {\n  background-image: url("+M+") !important;\n}\n\n.movie {\n  background-image: url("+N+") !important;\n}\n\n.music {\n  background-image: url("+B+") !important;\n}\n\n.political {\n  background-image: url("+V+") !important;\n}\n\n.religion {\n  background-image: url("+D+") !important;\n}\n\n.science {\n  background-image: url("+q+") !important;\n}\n\n.sport {\n  background-image: url("+F+") !important;\n}\n\n.travel {\n  background-image: url("+H+") !important;\n}",""]);const W=A},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",s=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),s&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),s&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,s,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(s)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);s&&o[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),e.push(h))}},e}},667:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function i(t){for(var i=-1,s=0;s<e.length;s++)if(e[s].identifier===t){i=s;break}return i}function s(t,s){for(var r={},o=[],a=0;a<t.length;a++){var c=t[a],l=s.base?c[0]+s.base:c[0],h=r[l]||0,u="".concat(l," ").concat(h);r[l]=h+1;var d=i(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=n(p,s);s.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}o.push(u)}return o}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var r=s(t=t||[],n=n||{});return function(t){t=t||[];for(var o=0;o<r.length;o++){var a=i(r[o]);e[a].references--}for(var c=s(t,n),l=0;l<r.length;l++){var h=i(r[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=c}}},569:t=>{var e={};t.exports=function(t,i){var s=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(i)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var s="";i.supports&&(s+="@supports (".concat(i.supports,") {")),i.media&&(s+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(s+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),s+=i.css,n&&(s+="}"),i.media&&(s+="}"),i.supports&&(s+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(s+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(s,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},468:(t,e,i)=>{t.exports=i.p+"673c9af083dad7ad3c70.jpg"},291:(t,e,i)=>{t.exports=i.p+"1be8e5e81236606c1ced.jpg"},904:(t,e,i)=>{t.exports=i.p+"8821ba615cae3820a14d.jpg"},668:(t,e,i)=>{t.exports=i.p+"7d9dba87271a76bc0a8b.jpg"},805:(t,e,i)=>{t.exports=i.p+"8173e775f03e5858031b.jpg"},35:(t,e,i)=>{t.exports=i.p+"f00641588b1eb62c8ac7.jpg"},137:(t,e,i)=>{t.exports=i.p+"17180913744047139a0b.jpg"},155:(t,e,i)=>{t.exports=i.p+"1ec919cca2e4d152e1b9.jpg"},101:(t,e,i)=>{t.exports=i.p+"48c0e64ad13864c9673b.jpg"},692:(t,e,i)=>{t.exports=i.p+"e090c46fa39bbd110827.jpg"},399:(t,e,i)=>{t.exports=i.p+"8fea168d33e13de9c381.jpg"},570:(t,e,i)=>{t.exports=i.p+"f0df27047aa700ebe456.jpg"},911:(t,e,i)=>{t.exports=i.p+"1d2074e9bbc102d32b47.jpg"},561:(t,e,i)=>{t.exports=i.p+"ca74c3b3ad051d15d293.jpg"},492:(t,e,i)=>{t.exports=i.p+"e70c412b19b2b369cfe1.jpg"},604:(t,e,i)=>{t.exports=i.p+"5a9b2c7000915ec49986.jpg"},166:(t,e,i)=>{t.exports=i.p+"dd716eacc64ecdf5757e.jpg"}},e={};function i(s){var n=e[s];if(void 0!==n)return n.exports;var r=e[s]={id:s,exports:{}};return t[s](r,r.exports,i),r.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var s=e.getElementsByTagName("script");s.length&&(t=s[s.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,(()=>{var t={};i.r(t),i.d(t,{default:()=>Lv,dependencies:()=>Mv,name:()=>Iv,register:()=>Bv,template:()=>Uv});var e={};i.r(e),i.d(e,{AppHeader:()=>Zv});var s={};i.r(s),i.d(s,{default:()=>em,dependencies:()=>im,name:()=>Xv,register:()=>nm,template:()=>tm});var n={};i.r(n),i.d(n,{default:()=>am,dependencies:()=>cm,name:()=>rm,register:()=>hm,template:()=>om});var r={};i.r(r),i.d(r,{Home:()=>um});var o={};i.r(o),i.d(o,{default:()=>fm,dependencies:()=>gm,name:()=>dm,register:()=>mm,template:()=>pm});var a={};i.r(a),i.d(a,{Loading:()=>wm});var c={};i.r(c),i.d(c,{default:()=>$m,dependencies:()=>km,name:()=>bm,register:()=>Cm,template:()=>ym});var l={};i.r(l),i.d(l,{Category:()=>Sm});var h={};function u(t){return"object"==typeof t&&null!==t||"function"==typeof t}function d(t){return null==t}i.r(h),i.d(h,{default:()=>Rm,dependencies:()=>Em,name:()=>Am,register:()=>Pm,template:()=>Tm});const p=new WeakMap;function f(t,e,i,s,n){return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${i}' to be of type ${n}, but got: ${Object.prototype.toString.call(s)} (${String(s)})`)}function g(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:return`${t}`}}function v(t,e,i){let s=p.get(t);if(void 0===s){if(!i)return;s=new Map,p.set(t,s)}let n=s.get(e);if(void 0===n){if(!i)return;n=new Map,s.set(e,n)}return n}function m(t,e,i){const s=v(e,i,!1);return void 0!==s&&s.has(t)}function w(t,e,i){if(m(t,e,i))return!0;const s=Object.getPrototypeOf(e);return null!==s&&w(t,s,i)}function b(t,e,i){const s=v(e,i,!1);if(void 0!==s)return s.get(t)}function y(t,e,i){if(m(t,e,i))return b(t,e,i);const s=Object.getPrototypeOf(e);return null!==s?y(t,s,i):void 0}function $(t,e,i,s){v(i,s,!0).set(t,e)}function k(t,e){const i=[],s=v(t,e,!1);if(void 0===s)return i;const n=s.keys();let r=0;for(const t of n)i[r]=t,++r;return i}function x(t,e){const i=k(t,e),s=Object.getPrototypeOf(t);if(null===s)return i;const n=x(s,e),r=i.length;if(0===r)return n;const o=n.length;if(0===o)return i;const a=new Set,c=[];let l,h=0;for(let t=0;t<r;++t)l=i[t],a.has(l)||(a.add(l),c[h]=l,++h);for(let t=0;t<o;++t)l=n[t],a.has(l)||(a.add(l),c[h]=l,++h);return c}function C(t,e){return function(i,s){if(!u(i))throw f("@metadata",[t,e,i,s],"target",i,"Object or Function");$(t,e,i,function(t){switch(typeof t){case"undefined":case"string":case"symbol":return t;default:throw new TypeError(`Invalid metadata propertyKey: ${t}.`)}}(s))}}function S(t,e,i,s){if(void 0!==i){if(!Array.isArray(t))throw f("Metadata.decorate",[t,e,i,s],"decorators",t,"Array");if(!u(e))throw f("Metadata.decorate",[t,e,i,s],"target",e,"Object or Function");if(!u(s)&&!d(s))throw f("Metadata.decorate",[t,e,i,s],"attributes",s,"Object, Function, null, or undefined");return null===s&&(s=void 0),i=function(t){switch(typeof t){case"string":case"symbol":return t;default:return`${t}`}}(i),function(t,e,i,s){for(let n=t.length-1;n>=0;--n){const r=(0,t[n])(e,i,s);if(!d(r)){if(!u(r))throw f("DecorateProperty",[t,e,i,s],"decorated",r,"Object, Function, null, or undefined");s=r}}return s}(t,e,i,s)}if(!Array.isArray(t))throw f("Metadata.decorate",[t,e,i,s],"decorators",t,"Array");if("function"!=typeof e)throw f("Metadata.decorate",[t,e,i,s],"target",e,"Function");return function(t,e){for(let i=t.length-1;i>=0;--i){const s=(0,t[i])(e);if(!d(s)){if("function"!=typeof s)throw f("DecorateConstructor",[t,e],"decorated",s,"Function, null, or undefined");e=s}}return e}(t,e)}function A(t,e,i,s){if(!u(i))throw f("Metadata.define",[t,e,i,s],"target",i,"Object or Function");return $(t,e,i,g(s))}function T(t,e,i){if(!u(e))throw f("Metadata.has",[t,e,i],"target",e,"Object or Function");return w(t,e,g(i))}function R(t,e,i){if(!u(e))throw f("Metadata.hasOwn",[t,e,i],"target",e,"Object or Function");return m(t,e,g(i))}function E(t,e,i){if(!u(e))throw f("Metadata.get",[t,e,i],"target",e,"Object or Function");return y(t,e,g(i))}function O(t,e,i){if(!u(e))throw f("Metadata.getOwn",[t,e,i],"target",e,"Object or Function");return b(t,e,g(i))}function P(t,e){if(!u(t))throw f("Metadata.getKeys",[t,e],"target",t,"Object or Function");return x(t,g(e))}function j(t,e){if(!u(t))throw f("Metadata.getOwnKeys",[t,e],"target",t,"Object or Function");return k(t,g(e))}function I(t,e,i){if(!u(e))throw f("Metadata.delete",[t,e,i],"target",e,"Object or Function");return function(t,e,i){const s=v(t,i,!1);return void 0!==s&&s.delete(e)}(e,t,g(i))}const U={define:A,has:T,hasOwn:R,get:E,getOwn:O,getKeys:P,getOwnKeys:j,delete:I};function L(t,e,i,s,n){if(!Reflect.defineProperty(t,e,{writable:s,enumerable:!1,configurable:n,value:i}))throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`)}const M="[[$au]]";function N(t,e,i){L(t,M,p,e,i),L(t,"metadata",C,e,i),L(t,"decorate",S,e,i),L(t,"defineMetadata",A,e,i),L(t,"hasMetadata",T,e,i),L(t,"hasOwnMetadata",R,e,i),L(t,"getMetadata",E,e,i),L(t,"getOwnMetadata",O,e,i),L(t,"getMetadataKeys",P,e,i),L(t,"getOwnMetadataKeys",j,e,i),L(t,"deleteMetadata",I,e,i)}const B=new Map;function V(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}class D{constructor(t,e={}){var i,s,n,r,o,a,c,l,h,u,d,p,f;this.macroTaskRequested=!1,this.macroTaskHandle=-1,this.globalThis=t,this.decodeURI="decodeURI"in e?e.decodeURI:t.decodeURI,this.decodeURIComponent="decodeURIComponent"in e?e.decodeURIComponent:t.decodeURIComponent,this.encodeURI="encodeURI"in e?e.encodeURI:t.encodeURI,this.encodeURIComponent="encodeURIComponent"in e?e.encodeURIComponent:t.encodeURIComponent,this.Date="Date"in e?e.Date:t.Date,this.Reflect="Reflect"in e?e.Reflect:t.Reflect,this.clearInterval="clearInterval"in e?e.clearInterval:null!==(s=null===(i=t.clearInterval)||void 0===i?void 0:i.bind(t))&&void 0!==s?s:V("clearInterval"),this.clearTimeout="clearTimeout"in e?e.clearTimeout:null!==(r=null===(n=t.clearTimeout)||void 0===n?void 0:n.bind(t))&&void 0!==r?r:V("clearTimeout"),this.queueMicrotask="queueMicrotask"in e?e.queueMicrotask:null!==(a=null===(o=t.queueMicrotask)||void 0===o?void 0:o.bind(t))&&void 0!==a?a:V("queueMicrotask"),this.setInterval="setInterval"in e?e.setInterval:null!==(l=null===(c=t.setInterval)||void 0===c?void 0:c.bind(t))&&void 0!==l?l:V("setInterval"),this.setTimeout="setTimeout"in e?e.setTimeout:null!==(u=null===(h=t.setTimeout)||void 0===h?void 0:h.bind(t))&&void 0!==u?u:V("setTimeout"),this.console="console"in e?e.console:t.console,this.performanceNow="performanceNow"in e?e.performanceNow:null!==(f=null===(p=null===(d=t.performance)||void 0===d?void 0:d.now)||void 0===p?void 0:p.bind(t.performance))&&void 0!==f?f:V("performance.now"),this.flushMacroTask=this.flushMacroTask.bind(this),this.taskQueue=new F(this,this.requestMacroTask.bind(this),this.cancelMacroTask.bind(this))}static getOrCreate(t,e={}){let i=B.get(t);return void 0===i&&B.set(t,i=new D(t,e)),i}static set(t,e){B.set(t,e)}requestMacroTask(){this.macroTaskRequested=!0,-1===this.macroTaskHandle&&(this.macroTaskHandle=this.setTimeout(this.flushMacroTask,0))}cancelMacroTask(){this.macroTaskRequested=!1,this.macroTaskHandle>-1&&(this.clearTimeout(this.macroTaskHandle),this.macroTaskHandle=-1)}flushMacroTask(){this.macroTaskHandle=-1,!0===this.macroTaskRequested&&(this.macroTaskRequested=!1,this.taskQueue.flush())}}function q(t){return t.persistent}class F{constructor(t,e,i){this.platform=t,this.$request=e,this.$cancel=i,this.t=void 0,this.i=0,this.processing=[],this.pending=[],this.delayed=[],this.flushRequested=!1,this.h=void 0,this.taskPool=[],this.u=0,this.T=0,this.$=0,this.I=()=>{this.flushRequested||(this.flushRequested=!0,this.T=this.platform.performanceNow(),this.$request())},this.M=new G(t.console)}get isEmpty(){return 0===this.i&&0===this.processing.length&&0===this.pending.length&&0===this.delayed.length}get P(){return 0===this.i&&this.processing.every(q)&&this.pending.every(q)&&this.delayed.every(q)}flush(t=this.platform.performanceNow()){if(this.flushRequested=!1,this.$=t,void 0===this.t){if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}let e;for(;this.processing.length>0;)if((e=this.processing.shift()).run(),1===e.status){if(!0===e.suspend)return this.t=e,void this.I();++this.i}if(this.pending.length>0&&(this.processing.push(...this.pending),this.pending.length=0),this.delayed.length>0){let e=-1;for(;++e<this.delayed.length&&this.delayed[e].queueTime<=t;);this.processing.push(...this.delayed.splice(0,e))}if((this.processing.length>0||this.delayed.length>0||this.i>0)&&this.I(),void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}}else this.I()}cancel(){this.flushRequested&&(this.$cancel(),this.flushRequested=!1)}async yield(){this.isEmpty||(void 0===this.h&&(this.h=X()),await this.h)}queueTask(t,e){const{delay:i,preempt:s,persistent:n,reusable:r,suspend:o}={...J,...e};if(s){if(i>0)throw new Error("Invalid arguments: preempt cannot be combined with a greater-than-zero delay");if(n)throw new Error("Invalid arguments: preempt cannot be combined with persistent")}0===this.processing.length&&this.I();const a=this.platform.performanceNow();let c;if(r){const e=this.taskPool,l=this.u-1;l>=0?(c=e[l],e[l]=void 0,this.u=l,c.reuse(a,i,s,n,o,t)):c=new Q(this.M,this,a,a+i,s,n,o,r,t)}else c=new Q(this.M,this,a,a+i,s,n,o,r,t);return s?this.processing[this.processing.length]=c:0===i?this.pending[this.pending.length]=c:this.delayed[this.delayed.length]=c,c}remove(t){let e=this.processing.indexOf(t);if(e>-1)this.processing.splice(e,1);else if(e=this.pending.indexOf(t),e>-1)this.pending.splice(e,1);else{if(e=this.delayed.indexOf(t),!(e>-1))throw new Error(`Task #${t.id} could not be found`);this.delayed.splice(e,1)}}returnToPool(t){this.taskPool[this.u++]=t}resetPersistentTask(t){t.reset(this.platform.performanceNow()),t.createdTime===t.queueTime?this.pending[this.pending.length]=t:this.delayed[this.delayed.length]=t}completeAsyncTask(t){var e;if(!0===t.suspend){if(this.t!==t)throw new Error(`Async task completion mismatch: suspenderTask=${null===(e=this.t)||void 0===e?void 0:e.id}, task=${t.id}`);this.t=void 0}else--this.i;if(void 0!==this.h&&this.P){const t=this.h;this.h=void 0,t.resolve()}this.isEmpty&&this.cancel()}}class H extends Error{constructor(t){super("Task was canceled."),this.task=t}}let W=0;var z,K;!function(t){t[t.pending=0]="pending",t[t.running=1]="running",t[t.completed=2]="completed",t[t.canceled=3]="canceled"}(z||(z={}));class Q{constructor(t,e,i,s,n,r,o,a,c){this.taskQueue=e,this.createdTime=i,this.queueTime=s,this.preempt=n,this.persistent=r,this.suspend=o,this.reusable=a,this.callback=c,this.id=++W,this.R=void 0,this.A=void 0,this.q=void 0,this.C=0,this.M=t}get result(){const t=this.q;if(void 0===t)switch(this.C){case 0:{const t=this.q=X();return this.R=t.resolve,this.A=t.reject,t}case 1:throw new Error("Trying to await task from within task will cause a deadlock.");case 2:return this.q=Promise.resolve();case 3:return this.q=Promise.reject(new H(this))}return t}get status(){return this.C}run(t=this.taskQueue.platform.performanceNow()){if(0!==this.C)throw new Error(`Cannot run task in ${this.C} state`);const{persistent:e,reusable:i,taskQueue:s,callback:n,R:r,A:o,createdTime:a}=this;let c;this.C=1;try{c=n(t-a),c instanceof Promise?c.then((t=>{this.persistent?s.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),s.completeAsyncTask(this),void 0!==r&&r(t),!this.persistent&&i&&s.returnToPool(this)})).catch((t=>{if(this.persistent||this.dispose(),s.completeAsyncTask(this),void 0===o)throw t;o(t)})):(this.persistent?s.resetPersistentTask(this):(this.C=e?3:2,this.dispose()),void 0!==r&&r(c),!this.persistent&&i&&s.returnToPool(this))}catch(t){if(this.persistent||this.dispose(),void 0===o)throw t;o(t)}}cancel(){if(0===this.C){const t=this.taskQueue,e=this.reusable,i=this.A;return t.remove(this),t.isEmpty&&t.cancel(),this.C=3,this.dispose(),e&&t.returnToPool(this),void 0!==i&&i(new H(this)),!0}return!(1!==this.C||!this.persistent||(this.persistent=!1,0))}reset(t){const e=this.queueTime-this.createdTime;this.createdTime=t,this.queueTime=t+e,this.C=0,this.R=void 0,this.A=void 0,this.q=void 0}reuse(t,e,i,s,n,r){this.createdTime=t,this.queueTime=t+e,this.preempt=i,this.persistent=s,this.suspend=n,this.callback=r,this.C=0}dispose(){this.callback=void 0,this.R=void 0,this.A=void 0,this.q=void 0}}class G{constructor(t){this.console=t,this.enabled=!1,this.depth=0}enter(t,e){this.log(`${"  ".repeat(this.depth++)}> `,t,e)}leave(t,e){this.log(`${"  ".repeat(--this.depth)}< `,t,e)}trace(t,e){this.log(`${"  ".repeat(this.depth)}- `,t,e)}log(t,e,i){if(e instanceof F){const s=`processing=${e.processing.length} pending=${e.pending.length} delayed=${e.delayed.length} flushReq=${e.flushRequested} susTask=${!!e.t}`;this.console.log(`${t}[Q.${i}] ${s}`)}else{const s=e.id,n=Math.round(10*e.createdTime)/10,r=Math.round(10*e.queueTime)/10,o=e.preempt,a=e.reusable,c=e.persistent,l=e.suspend,h=function(t){switch(t){case 0:return"pending";case 1:return"running";case 3:return"canceled";case 2:return"completed"}}(e.C),u=`id=${s} created=${n} queue=${r} preempt=${o} persistent=${c} reusable=${a} status=${h} suspend=${l}`;this.console.log(`${t}[T.${i}] ${u}`)}}}!function(t){t[t.render=0]="render",t[t.macroTask=1]="macroTask",t[t.postRender=2]="postRender"}(K||(K={}));const J={delay:0,preempt:!1,persistent:!1,reusable:!0,suspend:!1};let _,Y;function Z(t,e){_=t,Y=e}function X(){const t=new Promise(Z);return t.resolve=_,t.reject=Y,t}const tt={};function et(t){switch(typeof t){case"number":return t>=0&&(0|t)===t;case"string":{const e=tt[t];if(void 0!==e)return e;const i=t.length;if(0===i)return tt[t]=!1;let s=0,n=0;for(;n<i;++n)if(s=t.charCodeAt(n),0===n&&48===s&&i>1||s<48||s>57)return tt[t]=!1;return tt[t]=!0}default:return!1}}function it(t){switch(typeof t){case"number":case"bigint":return!0;default:return!1}}function st(t){switch(typeof t){case"string":return!0;case"object":return t instanceof Date;default:return!1}}const nt=function(){let t;!function(t){t[t.none=0]="none",t[t.digit=1]="digit",t[t.upper=2]="upper",t[t.lower=3]="lower"}(t||(t={}));const e=Object.assign(Object.create(null),{0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0});function i(t){return""===t?0:t!==t.toUpperCase()?3:t!==t.toLowerCase()?2:!0===e[t]?1:0}return function(t,e){const s=t.length;if(0===s)return t;let n,r=!1,o="",a="",c=0,l=t.charAt(0),h=i(l),u=0;for(;u<s;++u)n=c,a=l,c=h,l=t.charAt(u+1),h=i(l),0===c?o.length>0&&(r=!0):(!r&&o.length>0&&2===c&&(r=3===n||3===h),o+=e(a,r),r=!1);return o}}(),rt=function(){const t=Object.create(null);function e(t,e){return e?t.toUpperCase():t.toLowerCase()}return function(i){let s=t[i];return void 0===s&&(s=t[i]=nt(i,e)),s}}(),ot=function(){const t=Object.create(null);return function(e){let i=t[e];return void 0===i&&(i=rt(e),i.length>0&&(i=i[0].toUpperCase()+i.slice(1)),t[e]=i),i}}(),at=function(){const t=Object.create(null);function e(t,e){return e?`-${t.toLowerCase()}`:t.toLowerCase()}return function(i){let s=t[i];return void 0===s&&(s=t[i]=nt(i,e)),s}}();function ct(t){const{length:e}=t,i=Array(e);let s=0;for(;s<e;++s)i[s]=t[s];return i}const lt={};function ht(t){return void 0===lt[t]&&(lt[t]=0),++lt[t]}function ut(t,e){return t-e}function dt(t,e,i){return{configurable:!0,enumerable:i.enumerable,get(){const t=i.value.bind(this);return Reflect.defineProperty(this,e,{value:t,writable:!0,configurable:!0,enumerable:i.enumerable}),t}}}function pt(...t){const e=[];let i=0;const s=t.length;let n,r=0,o=0;for(;o<s;++o)if(n=t[o],void 0!==n){r=n.length;let t=0;for(;t<r;++t)e[i++]=n[t]}return e}function ft(...t){const e=t.length;let i,s=0;for(;e>s;++s)if(i=t[s],void 0!==i)return i;throw new Error("No default value found")}const gt=function(){const t=Function.prototype,e=Object.getPrototypeOf,i=new WeakMap;let s,n=t,r=0;return function(o){if(s=i.get(o),void 0===s)for(i.set(o,s=[n=o]),r=0;(n=e(n))!==t;)s[++r]=n;return s}}();function vt(...t){return Object.assign(Object.create(null),...t)}const mt=function(){const t=new WeakMap;let e=!1,i="",s=0;return function(n){return e=t.get(n),void 0===e&&(i=n.toString(),s=i.length,e=s>=29&&s<=100&&125===i.charCodeAt(s-1)&&i.charCodeAt(s-2)<=32&&93===i.charCodeAt(s-3)&&101===i.charCodeAt(s-4)&&100===i.charCodeAt(s-5)&&111===i.charCodeAt(s-6)&&99===i.charCodeAt(s-7)&&32===i.charCodeAt(s-8)&&101===i.charCodeAt(s-9)&&118===i.charCodeAt(s-10)&&105===i.charCodeAt(s-11)&&116===i.charCodeAt(s-12)&&97===i.charCodeAt(s-13)&&110===i.charCodeAt(s-14)&&88===i.charCodeAt(s-15),t.set(n,e)),e}}();function wt(t,e){return t instanceof Promise?t.then(e):e(t)}function bt(...t){let e,i,s,n=0,r=t.length;for(;n<r;++n)e=t[n],(e=t[n])instanceof Promise&&(void 0===i?i=e:void 0===s?s=[i,e]:s.push(e));return void 0===s?i:Promise.all(s)}const yt=U.getOwn,$t=U.hasOwn,kt=U.define,xt=t=>"function"==typeof t,Ct=t=>"string"==typeof t,St="au:annotation",At=(t,e)=>void 0===e?`${St}:${t}`:`${St}:${t}:${e}`,Tt=(t,e)=>{const i=yt(St,t);void 0===i?kt(St,[e],t):i.push(e)},Rt=Object.freeze({name:"au:annotation",appendTo:Tt,set(t,e,i){kt(At(e),i,t)},get:(t,e)=>yt(At(e),t),getKeys(t){let e=yt(St,t);return void 0===e&&kt(St,e=[],t),e},isKey:t=>t.startsWith(St),keyFor:At}),Et="au:resource",Ot=Object.freeze({name:Et,appendTo(t,e){const i=yt(Et,t);void 0===i?kt(Et,[e],t):i.push(e)},has:t=>$t(Et,t),getAll(t){const e=yt(Et,t);return void 0===e?$e:e.map((e=>yt(e,t)))},getKeys(t){let e=yt(Et,t);return void 0===e&&kt(Et,e=[],t),e},isKey:t=>t.startsWith(Et),keyFor:(t,e)=>void 0===e?`${Et}:${t}`:`${Et}:${t}:${e}`}),Pt={annotation:Rt,resource:Ot},jt=Object.prototype.hasOwnProperty;function It(t,e,i,s){let n=yt(At(t),i);return void 0===n?(n=e[t],void 0===n?(n=i[t],void 0!==n&&jt.call(i,t)?n:s()):n):n}function Ut(t,e,i){let s=yt(At(t),e);return void 0===s?(s=e[t],void 0!==s&&jt.call(e,t)?s:i()):s}function Lt(t,e,i){const s=e[t];return void 0===s?i():s}!function(t,e=!0,i=!1,s=!0,n=!0){if(function(t){return M in t}(t)){if(t[M]===p)return;throw new Error("Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.")}const r=["metadata","decorate","defineMetadata","hasMetadata","hasOwnMetadata","getMetadata","getOwnMetadata","getMetadataKeys","getOwnMetadataKeys","deleteMetadata"].filter((function(t){return t in Reflect}));if(r.length>0){if(e){const t=r.map((function(t){return`${t}:\n${Reflect[t].toString().slice(0,100)}...`})).join("\n\n");throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`)}i&&N(t,s,n)}else N(t,s,n)}(Reflect,!1,!1);class Mt{constructor(t,e){this.container=t,this.key=e}instance(t){return this.registerResolver(0,t)}singleton(t){return this.registerResolver(1,t)}transient(t){return this.registerResolver(2,t)}callback(t){return this.registerResolver(3,t)}cachedCallback(t){return this.registerResolver(3,ge(t))}aliasTo(t){return this.registerResolver(5,t)}registerResolver(t,e){const{container:i,key:s}=this;return this.container=this.key=void 0,i.registerResolver(s,new ie(s,t,e))}}function Nt(t){const e=t.slice(),i=Object.keys(t),s=i.length;let n;for(let r=0;r<s;++r)n=i[r],et(n)||(e[n]=t[n]);return e}const Bt={none(t){throw Error(`AUR0002:${t.toString()}`)},singleton:t=>new ie(t,1,t),transient:t=>new ie(t,2,t)};class Vt{constructor(t,e){this.inheritParentResources=t,this.defaultResolver=e}static from(t){var e,i;return void 0===t||t===Vt.DEFAULT?Vt.DEFAULT:new Vt(null!==(e=t.inheritParentResources)&&void 0!==e&&e,null!==(i=t.defaultResolver)&&void 0!==i?i:Bt.singleton)}}Vt.DEFAULT=Vt.from({});const Dt={createContainer:t=>new de(null,Vt.from(t)),getDesignParamtypes:t=>yt("design:paramtypes",t),getAnnotationParamtypes(t){const e=At("di:paramtypes");return yt(e,t)},getOrCreateAnnotationParamTypes:Ft,getDependencies:qt,createInterface(t,e){const i=xt(t)?t:e,s=Ct(t)?t:void 0,n=function(t,e,i){if(null==t||void 0!==new.target)throw new Error(`AUR0001:${n.friendlyName}`);Ft(t)[i]=n};return n.$isInterface=!0,n.friendlyName=null==s?"(anonymous)":s,null!=i&&(n.register=function(t,e){return i(new Mt(t,null!=e?e:n))}),n.toString=function(){return`InterfaceSymbol<${n.friendlyName}>`},n},inject:(...t)=>function(e,i,s){if("number"==typeof s){const i=Ft(e),n=t[0];void 0!==n&&(i[s]=n)}else if(i){const s=Ft(e.constructor),n=t[0];void 0!==n&&(s[i]=n)}else if(s){const e=Ft(s.value);let i;for(let s=0;s<t.length;++s)i=t[s],void 0!==i&&(e[s]=i)}else{const i=Ft(e);let s;for(let e=0;e<t.length;++e)s=t[e],void 0!==s&&(i[e]=s)}},transient:t=>(t.register=function(e){return ve.transient(t,t).register(e,t)},t.registerInRequestor=!1,t),singleton:(t,e=Jt)=>(t.register=function(e){return ve.singleton(t,t).register(e,t)},t.registerInRequestor=e.scoped,t)};function qt(t){const e=At("di:dependencies");let i=yt(e,t);if(void 0===i){const s=t.inject;if(void 0===s){const e=Dt.getDesignParamtypes(t),s=Dt.getAnnotationParamtypes(t);if(void 0===e)if(void 0===s){const e=Object.getPrototypeOf(t);i=xt(e)&&e!==Function.prototype?Nt(qt(e)):[]}else i=Nt(s);else if(void 0===s)i=Nt(e);else{i=Nt(e);let t,n=s.length,r=0;for(;r<n;++r)t=s[r],void 0!==t&&(i[r]=t);const o=Object.keys(s);let a;for(r=0,n=o.length,r=0;r<n;++r)a=o[r],et(a)||(i[a]=s[a])}}else i=Nt(s);kt(e,i,t),Tt(t,e)}return i}function Ft(t){const e=At("di:paramtypes");let i=yt(e,t);return void 0===i&&(kt(e,i=[],t),Tt(t,e)),i}const Ht=Dt.createInterface("IContainer"),Wt=Ht;function zt(t){return function(e){const i=function(t,e,s){Dt.inject(i)(t,e,s)};return i.$isResolver=!0,i.resolve=function(i,s){return t(e,i,s)},i}}const Kt=Dt.inject;function Qt(t){return Dt.transient(t)}function Gt(t){return null==t?Qt:Qt(t)}const Jt={scoped:!1};function _t(t){return xt(t)?Dt.singleton(t):function(e){return Dt.singleton(e,t)}}const Yt=function(t,e){e=!!e;const i=function(t,e,s){Dt.inject(i)(t,e,s)};return i.$isResolver=!0,i.resolve=function(i,s){return((t,e,i,s)=>i.getAll(t,s))(t,0,s,e)},i},Zt=(zt(((t,e,i)=>()=>i.get(t))),zt(((t,e,i)=>i.has(t,!0)?i.get(t):void 0)));function Xt(t,e,i){Dt.inject(Xt)(t,e,i)}function te(t,e,i){return e.getFactory(t).construct(i)}var ee;Xt.$isResolver=!0,Xt.resolve=()=>{},zt(((t,e,i)=>(...s)=>e.getFactory(t).construct(i,s))),zt(((t,e,i)=>{const s=te(t,e,i),n=new me(String(t),s);return i.registerResolver(t,n,!0),s})),zt(((t,e,i)=>te(t,e,i))),function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.callback=3]="callback",t[t.array=4]="array",t[t.alias=5]="alias"}(ee||(ee={}));class ie{constructor(t,e,i){this.key=t,this.strategy=e,this.state=i,this.resolving=!1}get $isResolver(){return!0}register(t,e){return t.registerResolver(e||this.key,this)}resolve(t,e){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`AUR0003:${this.state.name}`);return this.resolving=!0,this.state=t.getFactory(this.state).construct(e),this.strategy=0,this.resolving=!1,this.state;case 2:{const i=t.getFactory(this.state);if(null===i)throw new Error(`AUR0004:${String(this.key)}`);return i.construct(e)}case 3:return this.state(t,e,this);case 4:return this.state[0].resolve(t,e);case 5:return e.get(this.state);default:throw new Error(`AUR0005:${this.strategy}`)}}getFactory(t){var e,i,s;switch(this.strategy){case 1:case 2:return t.getFactory(this.state);case 5:return null!==(s=null===(i=null===(e=t.getResolver(this.state))||void 0===e?void 0:e.getFactory)||void 0===i?void 0:i.call(e,t))&&void 0!==s?s:null;default:return null}}}function se(t){return this.get(t)}function ne(t,e){return e(t)}class re{constructor(t,e){this.Type=t,this.dependencies=e,this.transformers=null}construct(t,e){let i;return i=void 0===e?new this.Type(...this.dependencies.map(se,t)):new this.Type(...this.dependencies.map(se,t),...e),null==this.transformers?i:this.transformers.reduce(ne,i)}registerTransformer(t){var e;(null!==(e=this.transformers)&&void 0!==e?e:this.transformers=[]).push(t)}}const oe={$isResolver:!0,resolve:(t,e)=>e};function ae(t){return xt(t.register)}function ce(t){return function(t){return ae(t)&&"boolean"==typeof t.registerInRequestor}(t)&&t.registerInRequestor}function le(t){return void 0!==t.prototype}const he=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]);let ue=0;class de{constructor(t,e){this.parent=t,this.config=e,this.id=++ue,this.t=0,this.i=new Map,null===t?(this.root=this,this.u=new Map,this.h=new Map,this.res=Object.create(null)):(this.root=t.root,this.u=new Map,this.h=t.h,e.inheritParentResources?this.res=Object.assign(Object.create(null),t.res,this.root.res):this.res=Object.create(null)),this.u.set(Ht,oe)}get depth(){return null===this.parent?0:this.parent.depth+1}register(...t){if(100==++this.t)throw new Error(`AUR0006:${t.map(String)}`);let e,i,s,n,r,o=0,a=t.length;for(;o<a;++o)if(e=t[o],u(e))if(ae(e))e.register(this);else if(Pt.resource.has(e)){const t=Pt.resource.getAll(e);if(1===t.length)t[0].register(this);else for(n=0,r=t.length;r>n;)t[n].register(this),++n}else if(le(e))ve.singleton(e,e).register(this);else for(i=Object.keys(e),n=0,r=i.length;n<r;++n)s=e[i[n]],u(s)&&(ae(s)?s.register(this):this.register(s));return--this.t,this}registerResolver(t,e,i=!1){we(t);const s=this.u,n=s.get(t);if(null==n){if(s.set(t,e),function(t){return Ct(t)&&t.indexOf(":")>0}(t)){if(void 0!==this.res[t])throw new Error(`AUR0007:${t}`);this.res[t]=e}}else n instanceof ie&&4===n.strategy?n.state.push(e):s.set(t,new ie(t,4,[n,e]));return i&&this.i.set(t,e),e}registerTransformer(t,e){const i=this.getResolver(t);if(null==i)return!1;if(i.getFactory){const t=i.getFactory(this);return null!=t&&(t.registerTransformer(e),!0)}return!1}getResolver(t,e=!0){if(we(t),void 0!==t.resolve)return t;let i,s=this;for(;null!=s;){if(i=s.u.get(t),null!=i)return i;if(null==s.parent){const i=ce(t)?this:s;return e?this.R(t,i):null}s=s.parent}return null}has(t,e=!1){return!!this.u.has(t)||!(!e||null==this.parent)&&this.parent.has(t,!0)}get(t){if(we(t),t.$isResolver)return t.resolve(this,this);let e,i=this;for(;null!=i;){if(e=i.u.get(t),null!=e)return e.resolve(i,this);if(null==i.parent){const s=ce(t)?this:i;return e=this.R(t,s),e.resolve(i,this)}i=i.parent}throw new Error(`AUR0008:${t}`)}getAll(t,e=!1){we(t);const i=this;let s,n=i;if(e){let e=$e;for(;null!=n;)s=n.u.get(t),null!=s&&(e=e.concat(be(s,n,i))),n=n.parent;return e}for(;null!=n;){if(s=n.u.get(t),null!=s)return be(s,n,i);if(n=n.parent,null==n)return $e}return $e}invoke(t,e){if(mt(t))throw ye(t);return void 0===e?new t(...qt(t).map(se,this)):new t(...qt(t).map(se,this),...e)}getFactory(t){let e=this.h.get(t);if(void 0===e){if(mt(t))throw ye(t);this.h.set(t,e=new re(t,qt(t)))}return e}registerFactory(t,e){this.h.set(t,e)}createChild(t){return void 0===t&&this.config.inheritParentResources?this.config===Vt.DEFAULT?new de(this,this.config):new de(this,Vt.from({...this.config,inheritParentResources:!1})):new de(this,Vt.from(null!=t?t:this.config))}disposeResolvers(){const t=this.u,e=this.i;let i,s;for([s,i]of e.entries())i.dispose(),t.delete(s);e.clear()}find(t,e){const i=t.keyFrom(e);let s=this.res[i];if(void 0===s&&(s=this.root.res[i],void 0===s))return null;if(null===s)return null;if(xt(s.getFactory)){const e=s.getFactory(this);if(null==e)return null;const i=yt(t.name,e.Type);return void 0===i?null:i}return null}create(t,e){var i,s;const n=t.keyFrom(e);let r=this.res[n];return void 0===r?(r=this.root.res[n],void 0===r?null:null!==(i=r.resolve(this.root,this))&&void 0!==i?i:null):null!==(s=r.resolve(this,this))&&void 0!==s?s:null}dispose(){this.i.size>0&&this.disposeResolvers(),this.u.clear()}R(t,e){if(!xt(t))throw new Error(`AUR0009:${t}`);if(he.has(t.name))throw new Error(`AUR0010:${t.name}`);if(ae(t)){const i=t.register(e,t);if(!(i instanceof Object)||null==i.resolve){const i=e.u.get(t);if(null!=i)return i;throw new Error("AUR0011")}return i}if(Pt.resource.has(t)){const i=Pt.resource.getAll(t);if(1===i.length)i[0].register(e);else{const t=i.length;for(let s=0;s<t;++s)i[s].register(e)}const s=e.u.get(t);if(null!=s)return s;throw new Error("AUR0011")}if(t.$isInterface)throw new Error(`AUR0012:${t.friendlyName}`);{const i=this.config.defaultResolver(t,e);return e.u.set(t,i),i}}}class pe{constructor(t,e){this.key=t,this.params=e}register(t){t.has(this.key,!0)?t.get(this.key).register(t,...this.params):t.register(...this.params.filter((t=>"object"==typeof t)))}}const fe=new WeakMap;function ge(t){return function(e,i,s){let n=fe.get(e);if(void 0===n&&fe.set(e,n=new WeakMap),n.has(s))return n.get(s);const r=t(e,i,s);return n.set(s,r),r}}const ve={instance:(t,e)=>new ie(t,0,e),singleton:(t,e)=>new ie(t,1,e),transient:(t,e)=>new ie(t,2,e),callback:(t,e)=>new ie(t,3,e),cachedCallback:(t,e)=>new ie(t,3,ge(e)),aliasTo:(t,e)=>new ie(e,5,t),defer:(t,...e)=>new pe(t,e)};class me{constructor(t,e){this.C=null,this.$=t,void 0!==e&&(this.C=e)}get friendlyName(){return this.$}prepare(t){this.C=t}get $isResolver(){return!0}resolve(){if(null==this.C)throw new Error(`AUR0013:${this.$}`);return this.C}dispose(){this.C=null}}function we(t){if(null==t)throw new Error("AUR0014")}function be(t,e,i){if(t instanceof ie&&4===t.strategy){const s=t.state;let n=s.length;const r=new Array(n);for(;n--;)r[n]=s[n].resolve(e,i);return r}return[t.resolve(e,i)]}function ye(t){return new Error(`AUR0015:${t.name}`)}const $e=Object.freeze([]),ke=Object.freeze({});function xe(){}const Ce=Dt.createInterface("IPlatform");function Se(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Ae(t,e){return function(i,s){e(i,s,t)}}var Te,Re;!function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.fatal=5]="fatal",t[t.none=6]="none"}(Te||(Te={})),function(t){t[t.noColors=0]="noColors",t[t.colors=1]="colors"}(Re||(Re={}));const Ee=Dt.createInterface("ILogConfig",(t=>t.instance(new Me(0,3)))),Oe=Dt.createInterface("ISink"),Pe=Dt.createInterface("ILogEventFactory",(t=>t.singleton(De))),je=Dt.createInterface("ILogger",(t=>t.singleton(Fe))),Ie=Dt.createInterface("ILogScope"),Ue=Object.freeze({key:At("logger-sink-handles"),define(t,e){return kt(this.key,e.handles,t.prototype),t},getHandles(t){return U.get(this.key,t)}}),Le=vt({red:t=>`[31m${t}[39m`,green:t=>`[32m${t}[39m`,yellow:t=>`[33m${t}[39m`,blue:t=>`[34m${t}[39m`,magenta:t=>`[35m${t}[39m`,cyan:t=>`[36m${t}[39m`,white:t=>`[37m${t}[39m`,grey:t=>`[90m${t}[39m`});class Me{constructor(t,e){this.colorOptions=t,this.level=e}}const Ne=function(){const t=[vt({TRC:"TRC",DBG:"DBG",INF:"INF",WRN:"WRN",ERR:"ERR",FTL:"FTL",QQQ:"???"}),vt({TRC:Le.grey("TRC"),DBG:Le.grey("DBG"),INF:Le.white("INF"),WRN:Le.yellow("WRN"),ERR:Le.red("ERR"),FTL:Le.red("FTL"),QQQ:Le.grey("???")})];return function(e,i){return e<=0?t[i].TRC:e<=1?t[i].DBG:e<=2?t[i].INF:e<=3?t[i].WRN:e<=4?t[i].ERR:e<=5?t[i].FTL:t[i].QQQ}}();function Be(t,e){return 0===e?new Date(t).toISOString():Le.grey(new Date(t).toISOString())}class Ve{constructor(t,e,i,s,n,r){this.severity=t,this.message=e,this.optionalParams=i,this.scope=s,this.colorOptions=n,this.timestamp=r}toString(){const{severity:t,message:e,scope:i,colorOptions:s,timestamp:n}=this;return 0===i.length?`${Be(n,s)} [${Ne(t,s)}] ${e}`:`${Be(n,s)} [${Ne(t,s)} ${function(t,e){return 0===e?t.join("."):t.map(Le.cyan).join(".")}(i,s)}] ${e}`}}let De=class{constructor(t){this.config=t}createLogEvent(t,e,i,s){return new Ve(e,i,s,t.scope,this.config.colorOptions,Date.now())}};De=Se([Ae(0,Ee)],De);let qe=class t{constructor(t){const e=t.console;this.handleEvent=function(t){const i=t.optionalParams;if(void 0===i||0===i.length){const i=t.toString();switch(t.severity){case 0:case 1:return e.debug(i);case 2:return e.info(i);case 3:return e.warn(i);case 4:case 5:return e.error(i)}}else{let s=t.toString(),n=0;for(;s.includes("%s");)s=s.replace("%s",String(i[n++]));switch(t.severity){case 0:case 1:return e.debug(s,...i.slice(n));case 2:return e.info(s,...i.slice(n));case 3:return e.warn(s,...i.slice(n));case 4:case 5:return e.error(s,...i.slice(n))}}}}static register(e){ve.singleton(Oe,t).register(e)}};qe=Se([Ae(0,Ce)],qe);let Fe=class t{constructor(t,e,i,s=[],n=null){var r,o,a,c,l,h;let u,d,p,f,g,v;if(this.config=t,this.factory=e,this.scope=s,this.scopedLoggers=Object.create(null),null===n){this.root=this,this.parent=this,u=this.traceSinks=[],d=this.debugSinks=[],p=this.infoSinks=[],f=this.warnSinks=[],g=this.errorSinks=[],v=this.fatalSinks=[];for(const t of i){const e=Ue.getHandles(t);(null===(r=null==e?void 0:e.includes(0))||void 0===r||r)&&u.push(t),(null===(o=null==e?void 0:e.includes(1))||void 0===o||o)&&d.push(t),(null===(a=null==e?void 0:e.includes(2))||void 0===a||a)&&p.push(t),(null===(c=null==e?void 0:e.includes(3))||void 0===c||c)&&f.push(t),(null===(l=null==e?void 0:e.includes(4))||void 0===l||l)&&g.push(t),(null===(h=null==e?void 0:e.includes(5))||void 0===h||h)&&v.push(t)}}else this.root=n.root,this.parent=n,u=this.traceSinks=n.traceSinks,d=this.debugSinks=n.debugSinks,p=this.infoSinks=n.infoSinks,f=this.warnSinks=n.warnSinks,g=this.errorSinks=n.errorSinks,v=this.fatalSinks=n.fatalSinks}trace(t,...e){this.config.level<=0&&this.emit(this.traceSinks,0,t,e)}debug(t,...e){this.config.level<=1&&this.emit(this.debugSinks,1,t,e)}info(t,...e){this.config.level<=2&&this.emit(this.infoSinks,2,t,e)}warn(t,...e){this.config.level<=3&&this.emit(this.warnSinks,3,t,e)}error(t,...e){this.config.level<=4&&this.emit(this.errorSinks,4,t,e)}fatal(t,...e){this.config.level<=5&&this.emit(this.fatalSinks,5,t,e)}scopeTo(e){const i=this.scopedLoggers;let s=i[e];return void 0===s&&(s=i[e]=new t(this.config,this.factory,void 0,this.scope.concat(e),this)),s}emit(t,e,i,s){const n=xt(i)?i():i,r=this.factory.createLogEvent(this,e,n,s);for(let e=0,i=t.length;e<i;++e)t[e].handleEvent(r)}};Se([dt],Fe.prototype,"trace",null),Se([dt],Fe.prototype,"debug",null),Se([dt],Fe.prototype,"info",null),Se([dt],Fe.prototype,"warn",null),Se([dt],Fe.prototype,"error",null),Se([dt],Fe.prototype,"fatal",null),Fe=Se([Ae(0,Ee),Ae(1,Pe),Ae(2,Yt(Oe)),Ae(3,Zt(Ie)),Ae(4,Xt)],Fe),vt({create:({level:t=3,colorOptions:e=0,sinks:i=[]}={})=>vt({register(s){s.register(ve.instance(Ee,new Me(e,t)));for(const t of i)xt(t)?s.register(ve.singleton(Oe,t)):s.register(t);return s}})});const He=Dt.createInterface((t=>t.singleton(Ke)));function We(t){return t}class ze{constructor(t){this.$transform=t,this.A=new Map,this.j=new Map}transform(t){if(t instanceof Promise)return this.O(t);if("object"==typeof t&&null!==t)return this.I(t);throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`)}O(t){if(this.A.has(t))return this.A.get(t);const e=t.then((t=>this.I(t)));return this.A.set(t,e),e.then((e=>{this.A.set(t,e)})),e}I(t){if(this.j.has(t))return this.j.get(t);const e=this.$transform(this.M(t));return this.j.set(t,e),e instanceof Promise&&e.then((e=>{this.j.set(t,e)})),e}M(t){let e,i,s,n;const r=[];for(const o in t){switch(typeof(e=t[o])){case"object":if(null===e)continue;i=xt(e.register),s=!1,n=$e;break;case"function":i=xt(e.register),s=void 0!==e.prototype,n=Pt.resource.getAll(e);break;default:continue}r.push(new Ge(o,e,i,s,n))}return new Qe(t,r)}}class Ke{constructor(){this.transformers=new Map}load(t,e=We){const i=this.transformers;let s=i.get(e);return void 0===s&&i.set(e,s=new ze(e)),s.transform(t)}dispose(){this.transformers.clear()}}class Qe{constructor(t,e){this.raw=t,this.items=e}}class Ge{constructor(t,e,i,s,n){this.key=t,this.value=e,this.isRegistry=i,this.isConstructable=s,this.definitions=n}}class Je{constructor(t,e){this.messageType=t,this.callback=e}handle(t){t instanceof this.messageType&&this.callback.call(null,t)}}const _e=Dt.createInterface("IEventAggregator",(t=>t.singleton(Ye)));class Ye{constructor(){this.eventLookup={},this.messageHandlers=[]}publish(t,e){if(!t)throw new Error(`Invalid channel name or instance: ${t}.`);if(Ct(t)){let i=this.eventLookup[t];if(void 0!==i){i=i.slice();let s=i.length;for(;s-- >0;)i[s](e,t)}}else{const e=this.messageHandlers.slice();let i=e.length;for(;i-- >0;)e[i].handle(t)}}subscribe(t,e){if(!t)throw new Error(`Invalid channel name or type: ${t}.`);let i,s;return Ct(t)?(void 0===this.eventLookup[t]&&(this.eventLookup[t]=[]),i=e,s=this.eventLookup[t]):(i=new Je(t,e),s=this.messageHandlers),s.push(i),{dispose(){const t=s.indexOf(i);-1!==t&&s.splice(t,1)}}}subscribeOnce(t,e){const i=this.subscribe(t,(function(t,s){i.dispose(),e(t,s)}));return i}}const Ze=new Map;class Xe extends D{constructor(t,e={}){super(t,e),this.t=!1,this.i=-1,this.h=!1,this.u=-1,"Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver,window,document,location,history,navigator,customElements".split(",").forEach((i=>{this[i]=i in e?e[i]:t[i]})),"fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((i=>{var s,n;this[i]=i in e?e[i]:null!==(n=null===(s=t[i])||void 0===s?void 0:s.bind(t))&&void 0!==n?n:function(t){return function(){throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`)}}(i)})),this.flushDomRead=this.flushDomRead.bind(this),this.flushDomWrite=this.flushDomWrite.bind(this),this.domReadQueue=new F(this,this.requestDomRead.bind(this),this.cancelDomRead.bind(this)),this.domWriteQueue=new F(this,this.requestDomWrite.bind(this),this.cancelDomWrite.bind(this))}static getOrCreate(t,e={}){let i=Ze.get(t);return void 0===i&&Ze.set(t,i=new Xe(t,e)),i}static set(t,e){Ze.set(t,e)}requestDomRead(){this.t=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomRead(){this.t=!1,this.i>-1&&(this.clearTimeout(this.i),this.i=-1),!1===this.h&&this.u>-1&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomRead(){this.i=-1,!0===this.t&&(this.t=!1,this.domReadQueue.flush())}requestDomWrite(){this.h=!0,-1===this.u&&(this.u=this.requestAnimationFrame(this.flushDomWrite))}cancelDomWrite(){this.h=!1,this.u>-1&&(!1===this.t||this.i>-1)&&(this.cancelAnimationFrame(this.u),this.u=-1)}flushDomWrite(){this.u=-1,!0===this.h&&(this.h=!1,this.domWriteQueue.flush()),!0===this.t&&-1===this.i&&(this.i=this.setTimeout(this.flushDomRead,0))}}const ti=Object.prototype.hasOwnProperty,ei=Reflect.defineProperty,ii=t=>"function"==typeof t,si=t=>"string"==typeof t;function ni(t,e,i){return ei(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i}),i}function ri(t,e,i,s=!1){!s&&ti.call(t,e)||ni(t,e,i)}const oi=()=>Object.create(null),ai=U.getOwn,ci=U.hasOwn,li=U.define,hi=Pt.annotation.keyFor,ui=Pt.resource.keyFor,di=Pt.resource.appendTo;function pi(t,e,i,s){for(let n=0,r=t.length;n<r;++n)ve.aliasTo(i,e.keyFrom(t[n])).register(s)}const fi=Object.freeze({});class gi{constructor(t,e){if(void 0!==t)if(void 0!==e)this[t]=e;else for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(this[e]=t[e])}static create(t,e){return new gi(t,e)}static get(t,e,i,s){var n,r;if(null==t)throw new Error(`AUR0203:${t}`);let o=t.overrideContext,a=t;if(i>0){for(;i>0;)if(i--,a=a.parentScope,null==(null==a?void 0:a.overrideContext))return;return o=a.overrideContext,e in o?o:o.bindingContext}for(;!((null==a?void 0:a.isBoundary)||null==o||e in o||o.bindingContext&&e in o.bindingContext);)a=null!==(n=a.parentScope)&&void 0!==n?n:null,o=null!==(r=null==a?void 0:a.overrideContext)&&void 0!==r?r:null;return o?e in o?o:o.bindingContext:16&s?fi:t.bindingContext||t.overrideContext}}class vi{constructor(t,e,i,s){this.parentScope=t,this.bindingContext=e,this.overrideContext=i,this.isBoundary=s}static create(t,e,i){return new vi(null,t,null==e?mi.create(t):e,null!=i&&i)}static fromOverride(t){if(null==t)throw new Error(`AUR0204:${t}`);return new vi(null,t.bindingContext,t,!1)}static fromParent(t,e){if(null==t)throw new Error(`AUR0205:${t}`);return new vi(t,e,mi.create(e),!1)}}class mi{constructor(t){this.bindingContext=t}static create(t){return new mi(t)}}const wi=Dt.createInterface("ISignaler",(t=>t.singleton(bi)));class bi{constructor(){this.signals=oi()}dispatchSignal(t,e){const i=this.signals[t];if(void 0===i)return;let s;for(s of i.keys())s.handleChange(void 0,void 0,e)}addSignalListener(t,e){const i=this.signals,s=i[t];void 0===s?i[t]=new Set([e]):s.add(e)}removeSignalListener(t,e){const i=this.signals[t];i&&i.delete(e)}}var yi;function $i(t){return function(e){return Ti.define(t,e)}}!function(t){t[t.singleton=1]="singleton",t[t.interceptor=2]="interceptor"}(yi||(yi={}));class ki{constructor(t,e,i,s,n){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.strategy=n}static create(t,e){let i,s;si(t)?(i=t,s={name:i}):(i=t.name,s=t);const n=Object.getPrototypeOf(e)===Ci;return new ki(e,ft(Ai(e,"name"),i),pt(Ai(e,"aliases"),s.aliases,e.aliases),Ti.keyFrom(i),It("strategy",s,e,(()=>n?2:1)))}register(t){const{Type:e,key:i,aliases:s,strategy:n}=this;switch(n){case 1:ve.singleton(i,e).register(t);break;case 2:ve.instance(i,new xi(t,e)).register(t)}ve.aliasTo(i,e).register(t),pi(s,Ti,i,t)}}class xi{constructor(t,e){this.ctn=t,this.Type=e,this.deps=Dt.getDependencies(e)}construct(t,e){const i=this.ctn,s=this.deps;switch(s.length){case 0:return new this.Type(t,e);case 1:return new this.Type(i.get(s[0]),t,e);case 2:return new this.Type(i.get(s[0]),i.get(s[1]),t,e);default:return new this.Type(...s.map((t=>i.get(t))),t,e)}}}class Ci{constructor(t,e){let i;for(this.binding=t,this.expr=e,this.interceptor=this;t.interceptor!==this;)i=t.interceptor,t.interceptor=this,t=i}get oL(){return this.binding.oL}get locator(){return this.binding.locator}get $scope(){return this.binding.$scope}get isBound(){return this.binding.isBound}get obs(){return this.binding.obs}get sourceExpression(){return this.binding.sourceExpression}updateTarget(t,e){this.binding.updateTarget(t,e)}updateSource(t,e){this.binding.updateSource(t,e)}callSource(t){return this.binding.callSource(t)}handleChange(t,e,i){this.binding.handleChange(t,e,i)}handleCollectionChange(t,e){this.binding.handleCollectionChange(t,e)}observe(t,e){this.binding.observe(t,e)}observeCollection(t){this.binding.observeCollection(t)}$bind(t,e){this.binding.$bind(t,e)}$unbind(t){this.binding.$unbind(t)}}const Si=ui("binding-behavior"),Ai=(t,e)=>ai(hi(e),t),Ti=Object.freeze({name:Si,keyFrom:t=>`${Si}:${t}`,isType:t=>ii(t)&&ci(Si,t),define(t,e){const i=ki.create(t,e);return li(Si,i,i.Type),li(Si,i,i),di(e,Si),i.Type},getDefinition(t){const e=ai(Si,t);if(void 0===e)throw new Error(`AUR0151:${t.name}`);return e},annotate(t,e,i){li(hi(e),i,t)},getAnnotation:Ai});function Ri(t){return function(e){return ji.define(t,e)}}class Ei{constructor(t,e,i,s){this.Type=t,this.name=e,this.aliases=i,this.key=s}static create(t,e){let i,s;return si(t)?(i=t,s={name:i}):(i=t.name,s=t),new Ei(e,ft(Pi(e,"name"),i),pt(Pi(e,"aliases"),s.aliases,e.aliases),ji.keyFrom(i))}register(t){const{Type:e,key:i,aliases:s}=this;ve.singleton(i,e).register(t),ve.aliasTo(i,e).register(t),pi(s,ji,i,t)}}const Oi=ui("value-converter"),Pi=(t,e)=>ai(hi(e),t),ji=Object.freeze({name:Oi,keyFrom:t=>`${Oi}:${t}`,isType:t=>ii(t)&&ci(Oi,t),define(t,e){const i=Ei.create(t,e);return li(Oi,i,i.Type),li(Oi,i,i),di(e,Oi),i.Type},getDefinition(t){const e=ai(Oi,t);if(void 0===e)throw new Error(`AUR0152:${t.name}`);return e},annotate(t,e,i){li(hi(e),i,t)},getAnnotation:Pi});var Ii;!function(t){t[t.CallsFunction=128]="CallsFunction",t[t.HasAncestor=256]="HasAncestor",t[t.IsPrimary=512]="IsPrimary",t[t.IsLeftHandSide=1024]="IsLeftHandSide",t[t.HasBind=2048]="HasBind",t[t.HasUnbind=4096]="HasUnbind",t[t.IsAssignable=8192]="IsAssignable",t[t.IsLiteral=16384]="IsLiteral",t[t.IsResource=32768]="IsResource",t[t.IsForDeclaration=65536]="IsForDeclaration",t[t.Type=31]="Type",t[t.AccessThis=1793]="AccessThis",t[t.AccessScope=10082]="AccessScope",t[t.ArrayLiteral=17955]="ArrayLiteral",t[t.ObjectLiteral=17956]="ObjectLiteral",t[t.PrimitiveLiteral=17925]="PrimitiveLiteral",t[t.Template=17958]="Template",t[t.Unary=39]="Unary",t[t.CallScope=1448]="CallScope",t[t.CallMember=1161]="CallMember",t[t.CallFunction=1162]="CallFunction",t[t.AccessMember=9323]="AccessMember",t[t.AccessKeyed=9324]="AccessKeyed",t[t.TaggedTemplate=1197]="TaggedTemplate",t[t.Binary=46]="Binary",t[t.Conditional=63]="Conditional",t[t.Assign=8208]="Assign",t[t.ValueConverter=36913]="ValueConverter",t[t.BindingBehavior=38962]="BindingBehavior",t[t.HtmlLiteral=51]="HtmlLiteral",t[t.ArrayBindingPattern=65556]="ArrayBindingPattern",t[t.ObjectBindingPattern=65557]="ObjectBindingPattern",t[t.BindingIdentifier=65558]="BindingIdentifier",t[t.ForOfStatement=6199]="ForOfStatement",t[t.Interpolation=24]="Interpolation",t[t.ArrayDestructuring=90137]="ArrayDestructuring",t[t.ObjectDestructuring=106521]="ObjectDestructuring",t[t.DestructuringAssignmentLeaf=139289]="DestructuringAssignmentLeaf"}(Ii||(Ii={}));class Ui{constructor(){this.text=""}static unparse(t){const e=new Ui;return t.accept(e),e.text}visitAccessMember(t){t.object.accept(this),this.text+=`.${t.name}`}visitAccessKeyed(t){t.object.accept(this),this.text+="[",t.key.accept(this),this.text+="]"}visitAccessThis(t){if(0===t.ancestor)return void(this.text+="$this");this.text+="$parent";let e=t.ancestor-1;for(;e--;)this.text+=".$parent"}visitAccessScope(t){let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name}visitArrayLiteral(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectLiteral(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,s=e.length;t<s;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitPrimitiveLiteral(t){if(this.text+="(",si(t.value)){const e=t.value.replace(/'/g,"\\'");this.text+=`'${e}'`}else this.text+=`${t.value}`;this.text+=")"}visitCallFunction(t){this.text+="(",t.func.accept(this),this.writeArgs(t.args),this.text+=")"}visitCallMember(t){this.text+="(",t.object.accept(this),this.text+=`.${t.name}`,this.writeArgs(t.args),this.text+=")"}visitCallScope(t){this.text+="(";let e=t.ancestor;for(;e--;)this.text+="$parent.";this.text+=t.name,this.writeArgs(t.args),this.text+=")"}visitTemplate(t){const{cooked:e,expressions:i}=t,s=i.length;this.text+="`",this.text+=e[0];for(let t=0;t<s;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitTaggedTemplate(t){const{cooked:e,expressions:i}=t,s=i.length;t.func.accept(this),this.text+="`",this.text+=e[0];for(let t=0;t<s;t++)i[t].accept(this),this.text+=e[t+1];this.text+="`"}visitUnary(t){this.text+=`(${t.operation}`,t.operation.charCodeAt(0)>=97&&(this.text+=" "),t.expression.accept(this),this.text+=")"}visitBinary(t){this.text+="(",t.left.accept(this),105===t.operation.charCodeAt(0)?this.text+=` ${t.operation} `:this.text+=t.operation,t.right.accept(this),this.text+=")"}visitConditional(t){this.text+="(",t.condition.accept(this),this.text+="?",t.yes.accept(this),this.text+=":",t.no.accept(this),this.text+=")"}visitAssign(t){this.text+="(",t.target.accept(this),this.text+="=",t.value.accept(this),this.text+=")"}visitValueConverter(t){const e=t.args;t.expression.accept(this),this.text+=`|${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitBindingBehavior(t){const e=t.args;t.expression.accept(this),this.text+=`&${t.name}`;for(let t=0,i=e.length;t<i;++t)this.text+=":",e[t].accept(this)}visitArrayBindingPattern(t){const e=t.elements;this.text+="[";for(let t=0,i=e.length;t<i;++t)0!==t&&(this.text+=","),e[t].accept(this);this.text+="]"}visitObjectBindingPattern(t){const e=t.keys,i=t.values;this.text+="{";for(let t=0,s=e.length;t<s;++t)0!==t&&(this.text+=","),this.text+=`'${e[t]}':`,i[t].accept(this);this.text+="}"}visitBindingIdentifier(t){this.text+=t.name}visitHtmlLiteral(t){throw new Error("visitHtmlLiteral")}visitForOfStatement(t){t.declaration.accept(this),this.text+=" of ",t.iterable.accept(this)}visitInterpolation(t){const{parts:e,expressions:i}=t,s=i.length;this.text+="${",this.text+=e[0];for(let t=0;t<s;t++)i[t].accept(this),this.text+=e[t+1];this.text+="}"}visitDestructuringAssignmentExpression(t){const e=106521===t.$kind;this.text+=e?"{":"[";const i=t.list,s=i.length;let n,r;for(n=0;n<s;n++)switch(r=i[n],r.$kind){case 139289:r.accept(this);break;case 90137:case 106521:{const t=r.source;t&&(t.accept(this),this.text+=":"),r.accept(this);break}}this.text+=e?"}":"]"}visitDestructuringAssignmentSingleExpression(t){t.source.accept(this),this.text+=":",t.target.accept(this);const e=t.initializer;void 0!==e&&(this.text+="=",e.accept(this))}visitDestructuringAssignmentRestExpression(t){this.text+="...",t.accept(this)}writeArgs(t){this.text+="(";for(let e=0,i=t.length;e<i;++e)0!==e&&(this.text+=","),t[e].accept(this);this.text+=")"}}class Li{constructor(t){this.value=t}evaluate(t,e,i,s){return this.value}}class Mi{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.behaviorKey=Ti.keyFrom(e)}get $kind(){return 38962}get hasBind(){return!0}get hasUnbind(){return!0}evaluate(t,e,i,s){return this.expression.evaluate(t,e,i,s)}assign(t,e,i,s){return this.expression.assign(t,e,i,s)}bind(t,e,i){this.expression.hasBind&&this.expression.bind(t,e,i);const s=i.locator.get(this.behaviorKey);if(null==s)throw new Error(`AUR0101:${this.name}`);if(!(s instanceof xi)){if(void 0!==i[this.behaviorKey])throw new Error(`AUR0102:${this.name}`);i[this.behaviorKey]=s,s.bind.call(s,t,e,i,...this.args.map((s=>s.evaluate(t,e,i.locator,null))))}}unbind(t,e,i){const s=this.behaviorKey,n=i;void 0!==n[s]&&(ii(n[s].unbind)&&n[s].unbind(t,e,i),n[s]=void 0),this.expression.hasUnbind&&this.expression.unbind(t,e,i)}accept(t){return t.visitBindingBehavior(this)}toString(){return Ui.unparse(this)}}class Ni{constructor(t,e,i){this.expression=t,this.name=e,this.args=i,this.converterKey=ji.keyFrom(e)}get $kind(){return 36913}get hasBind(){return!1}get hasUnbind(){return!0}evaluate(t,e,i,s){const n=i.get(this.converterKey);if(null==n)throw new Error(`AUR0103:${this.name}`);if(null!==s&&"handleChange"in s){const t=n.signals;if(null!=t){const e=i.get(wi);for(let i=0,n=t.length;i<n;++i)e.addSignalListener(t[i],s)}}return"toView"in n?n.toView(this.expression.evaluate(t,e,i,s),...this.args.map((n=>n.evaluate(t,e,i,s)))):this.expression.evaluate(t,e,i,s)}assign(t,e,i,s){const n=i.get(this.converterKey);if(null==n)throw new Error(`AUR0104:${this.name}`);return"fromView"in n&&(s=n.fromView(s,...this.args.map((s=>s.evaluate(t,e,i,null))))),this.expression.assign(t,e,i,s)}unbind(t,e,i){const s=i.locator.get(this.converterKey);if(void 0===s.signals)return;const n=i.locator.get(wi);for(let t=0;t<s.signals.length;++t)n.removeSignalListener(s.signals[t],i)}accept(t){return t.visitValueConverter(this)}toString(){return Ui.unparse(this)}}class Bi{constructor(t,e){this.target=t,this.value=e}get $kind(){return 8208}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.target.assign(t,e,i,this.value.evaluate(t,e,i,s))}assign(t,e,i,s){return this.value.assign(t,e,i,s),this.target.assign(t,e,i,s)}accept(t){return t.visitAssign(this)}toString(){return Ui.unparse(this)}}class Vi{constructor(t,e,i){this.condition=t,this.yes=e,this.no=i}get $kind(){return 63}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.condition.evaluate(t,e,i,s)?this.yes.evaluate(t,e,i,s):this.no.evaluate(t,e,i,s)}assign(t,e,i,s){}accept(t){return t.visitConditional(this)}toString(){return Ui.unparse(this)}}class Di{constructor(t=0){this.ancestor=t}get $kind(){return 1793}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){var n;let r=e.overrideContext,o=e,a=this.ancestor;for(;a--&&r;)o=o.parentScope,r=null!==(n=null==o?void 0:o.overrideContext)&&void 0!==n?n:null;return a<1&&r?r.bindingContext:void 0}assign(t,e,i,s){}accept(t){return t.visitAccessThis(this)}toString(){return Ui.unparse(this)}}Di.$this=new Di(0),Di.$parent=new Di(1);class qi{constructor(t,e=0){this.name=t,this.ancestor=e}get $kind(){return 10082}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=gi.get(e,this.name,this.ancestor,t);null!==s&&s.observe(n,this.name);const r=n[this.name];if(null==r&&"$host"===this.name)throw new Error("AUR0105");return 1&t?r:null==r?"":r}assign(t,e,i,s){var n;if("$host"===this.name)throw new Error("AUR0106");const r=gi.get(e,this.name,this.ancestor,t);if(r instanceof Object)return void 0!==(null===(n=r.$observers)||void 0===n?void 0:n[this.name])?(r.$observers[this.name].setValue(s,t),s):r[this.name]=s}accept(t){return t.visitAccessScope(this)}toString(){return Ui.unparse(this)}}class Fi{constructor(t,e){this.object=t,this.name=e}get $kind(){return 9323}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.object.evaluate(t,e,i,(128&t)>0?null:s);return 1&t?null==n?n:(null!==s&&s.observe(n,this.name),n[this.name]):(null!==s&&n instanceof Object&&s.observe(n,this.name),n?n[this.name]:"")}assign(t,e,i,s){const n=this.object.evaluate(t,e,i,null);return n instanceof Object?void 0!==n.$observers&&void 0!==n.$observers[this.name]?n.$observers[this.name].setValue(s,t):n[this.name]=s:this.object.assign(t,e,i,{[this.name]:s}),s}accept(t){return t.visitAccessMember(this)}toString(){return Ui.unparse(this)}}class Hi{constructor(t,e){this.object=t,this.key=e}get $kind(){return 9324}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.object.evaluate(t,e,i,(128&t)>0?null:s);if(n instanceof Object){const r=this.key.evaluate(t,e,i,(128&t)>0?null:s);return null!==s&&s.observe(n,r),n[r]}}assign(t,e,i,s){return this.object.evaluate(t,e,i,null)[this.key.evaluate(t,e,i,null)]=s}accept(t){return t.visitAccessKeyed(this)}toString(){return Ui.unparse(this)}}class Wi{constructor(t,e,i=0){this.name=t,this.args=e,this.ancestor=i}get $kind(){return 1448}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.args.map((n=>n.evaluate(t,e,i,s))),r=gi.get(e,this.name,this.ancestor,t),o=cs(t,r,this.name);if(o)return o.apply(r,n)}assign(t,e,i,s){}accept(t){return t.visitCallScope(this)}toString(){return Ui.unparse(this)}}class zi{constructor(t,e,i){this.object=t,this.name=e,this.args=i}get $kind(){return 1161}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.object.evaluate(t,e,i,(128&t)>0?null:s),r=this.args.map((n=>n.evaluate(t,e,i,s))),o=cs(t,n,this.name);if(o)return o.apply(n,r)}assign(t,e,i,s){}accept(t){return t.visitCallMember(this)}toString(){return Ui.unparse(this)}}class Ki{constructor(t,e){this.func=t,this.args=e}get $kind(){return 1162}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.func.evaluate(t,e,i,s);if(ii(n))return n(...this.args.map((n=>n.evaluate(t,e,i,s))));if(8&t||null!=n)throw new Error("AUR0107")}assign(t,e,i,s){}accept(t){return t.visitCallFunction(this)}toString(){return Ui.unparse(this)}}class Qi{constructor(t,e,i){this.operation=t,this.left=e,this.right=i}get $kind(){return 46}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){switch(this.operation){case"&&":return this.left.evaluate(t,e,i,s)&&this.right.evaluate(t,e,i,s);case"||":return this.left.evaluate(t,e,i,s)||this.right.evaluate(t,e,i,s);case"==":return this.left.evaluate(t,e,i,s)==this.right.evaluate(t,e,i,s);case"===":return this.left.evaluate(t,e,i,s)===this.right.evaluate(t,e,i,s);case"!=":return this.left.evaluate(t,e,i,s)!=this.right.evaluate(t,e,i,s);case"!==":return this.left.evaluate(t,e,i,s)!==this.right.evaluate(t,e,i,s);case"instanceof":{const n=this.right.evaluate(t,e,i,s);return!!ii(n)&&this.left.evaluate(t,e,i,s)instanceof n}case"in":{const n=this.right.evaluate(t,e,i,s);return n instanceof Object&&this.left.evaluate(t,e,i,s)in n}case"+":{const n=this.left.evaluate(t,e,i,s),r=this.right.evaluate(t,e,i,s);if((1&t)>0)return n+r;if(!n||!r){if(it(n)||it(r))return(n||0)+(r||0);if(st(n)||st(r))return(n||"")+(r||"")}return n+r}case"-":return this.left.evaluate(t,e,i,s)-this.right.evaluate(t,e,i,s);case"*":return this.left.evaluate(t,e,i,s)*this.right.evaluate(t,e,i,s);case"/":return this.left.evaluate(t,e,i,s)/this.right.evaluate(t,e,i,s);case"%":return this.left.evaluate(t,e,i,s)%this.right.evaluate(t,e,i,s);case"<":return this.left.evaluate(t,e,i,s)<this.right.evaluate(t,e,i,s);case">":return this.left.evaluate(t,e,i,s)>this.right.evaluate(t,e,i,s);case"<=":return this.left.evaluate(t,e,i,s)<=this.right.evaluate(t,e,i,s);case">=":return this.left.evaluate(t,e,i,s)>=this.right.evaluate(t,e,i,s);default:throw new Error(`AUR0108:${this.operation}`)}}assign(t,e,i,s){}accept(t){return t.visitBinary(this)}toString(){return Ui.unparse(this)}}class Gi{constructor(t,e){this.operation=t,this.expression=e}get $kind(){return 39}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){switch(this.operation){case"void":return void this.expression.evaluate(t,e,i,s);case"typeof":return typeof this.expression.evaluate(1|t,e,i,s);case"!":return!this.expression.evaluate(t,e,i,s);case"-":return-this.expression.evaluate(t,e,i,s);case"+":return+this.expression.evaluate(t,e,i,s);default:throw new Error(`AUR0109:${this.operation}`)}}assign(t,e,i,s){}accept(t){return t.visitUnary(this)}toString(){return Ui.unparse(this)}}class Ji{constructor(t){this.value=t}get $kind(){return 17925}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.value}assign(t,e,i,s){}accept(t){return t.visitPrimitiveLiteral(this)}toString(){return Ui.unparse(this)}}Ji.$undefined=new Ji(void 0),Ji.$null=new Ji(null),Ji.$true=new Ji(!0),Ji.$false=new Ji(!1),Ji.$empty=new Ji("");class _i{constructor(t){this.elements=t}get $kind(){return 17955}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.elements.map((n=>n.evaluate(t,e,i,s)))}assign(t,e,i,s){}accept(t){return t.visitArrayLiteral(this)}toString(){return Ui.unparse(this)}}_i.$empty=new _i($e);class Yi{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 17956}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n={};for(let r=0;r<this.keys.length;++r)n[this.keys[r]]=this.values[r].evaluate(t,e,i,s);return n}assign(t,e,i,s){}accept(t){return t.visitObjectLiteral(this)}toString(){return Ui.unparse(this)}}Yi.$empty=new Yi($e,$e);class Zi{constructor(t,e=$e){this.cooked=t,this.expressions=e}get $kind(){return 17958}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){let n=this.cooked[0];for(let r=0;r<this.expressions.length;++r)n+=String(this.expressions[r].evaluate(t,e,i,s)),n+=this.cooked[r+1];return n}assign(t,e,i,s){}accept(t){return t.visitTemplate(this)}toString(){return Ui.unparse(this)}}Zi.$empty=new Zi([""]);class Xi{constructor(t,e,i,s=$e){this.cooked=t,this.func=i,this.expressions=s,t.raw=e}get $kind(){return 1197}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){const n=this.expressions.map((n=>n.evaluate(t,e,i,s))),r=this.func.evaluate(t,e,i,s);if(!ii(r))throw new Error("AUR0110");return r(this.cooked,...n)}assign(t,e,i,s){}accept(t){return t.visitTaggedTemplate(this)}toString(){return Ui.unparse(this)}}class ts{constructor(t){this.elements=t}get $kind(){return 65556}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){}assign(t,e,i,s){}accept(t){return t.visitArrayBindingPattern(this)}toString(){return Ui.unparse(this)}}class es{constructor(t,e){this.keys=t,this.values=e}get $kind(){return 65557}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){}assign(t,e,i,s){}accept(t){return t.visitObjectBindingPattern(this)}toString(){return Ui.unparse(this)}}class is{constructor(t){this.name=t}get $kind(){return 65558}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.name}accept(t){return t.visitBindingIdentifier(this)}toString(){return Ui.unparse(this)}}const ss=Object.prototype.toString;class ns{constructor(t,e){this.declaration=t,this.iterable=e}get $kind(){return 6199}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){return this.iterable.evaluate(t,e,i,s)}assign(t,e,i,s){}count(t,e){switch(ss.call(e)){case"[object Array]":return e.length;case"[object Map]":case"[object Set]":return e.size;case"[object Number]":return e;case"[object Null]":case"[object Undefined]":return 0;default:throw new Error(`Cannot count ${ss.call(e)}`)}}iterate(t,e,i){switch(ss.call(e)){case"[object Array]":return ls(e,i);case"[object Map]":return function(t,e){const i=Array(t.size);let s=-1;for(const e of t.entries())i[++s]=e;ls(i,e)}(e,i);case"[object Set]":return function(t,e){const i=Array(t.size);let s=-1;for(const e of t.keys())i[++s]=e;ls(i,e)}(e,i);case"[object Number]":return function(t,e){const i=Array(t);for(let e=0;e<t;++e)i[e]=e;ls(i,e)}(e,i);case"[object Null]":case"[object Undefined]":return;default:throw new Error(`Cannot iterate over ${ss.call(e)}`)}}bind(t,e,i){this.iterable.hasBind&&this.iterable.bind(t,e,i)}unbind(t,e,i){this.iterable.hasUnbind&&this.iterable.unbind(t,e,i)}accept(t){return t.visitForOfStatement(this)}toString(){return Ui.unparse(this)}}class rs{constructor(t,e=$e){this.parts=t,this.expressions=e,this.isMulti=e.length>1,this.firstExpression=e[0]}get $kind(){return 24}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){if(this.isMulti){let n=this.parts[0];for(let r=0;r<this.expressions.length;++r)n+=String(this.expressions[r].evaluate(t,e,i,s)),n+=this.parts[r+1];return n}return`${this.parts[0]}${this.firstExpression.evaluate(t,e,i,s)}${this.parts[1]}`}assign(t,e,i,s){}accept(t){return t.visitInterpolation(this)}toString(){return Ui.unparse(this)}}class os{constructor(t,e,i,s){this.$kind=t,this.list=e,this.source=i,this.initializer=s}get hasBind(){return!1}get hasUnbind(){return!1}evaluate(t,e,i,s){}assign(t,e,i,s){var n;const r=this.list,o=r.length;let a,c;for(a=0;a<o;a++)switch(c=r[a],c.$kind){case 139289:c.assign(t,e,i,s);break;case 90137:case 106521:{if("object"!=typeof s||null===s)throw new Error("AUR0112");let r=c.source.evaluate(t,vi.create(s),i,null);void 0===r&&(r=null===(n=c.initializer)||void 0===n?void 0:n.evaluate(t,e,i,null)),c.assign(t,e,i,r);break}}}accept(t){return t.visitDestructuringAssignmentExpression(this)}toString(){return Ui.unparse(this)}}class as{constructor(t,e,i){this.target=t,this.source=e,this.initializer=i}get $kind(){return 139289}evaluate(t,e,i,s){}assign(t,e,i,s){var n;if(null==s)return;if("object"!=typeof s)throw new Error("AUR0112");let r=this.source.evaluate(t,vi.create(s),i,null);void 0===r&&(r=null===(n=this.initializer)||void 0===n?void 0:n.evaluate(t,e,i,null)),this.target.assign(t,e,i,r)}accept(t){return t.visitDestructuringAssignmentSingleExpression(this)}toString(){return Ui.unparse(this)}}function cs(t,e,i){const s=null==e?null:e[i];if(ii(s))return s;if(!(8&t)&&null==s)return null;throw new Error(`AUR0111:${i}`)}function ls(t,e){for(let i=0,s=t.length;i<s;++i)e(t,i,t[i])}const hs=Dt.createInterface("ICoercionConfiguration");var us,ds,ps,fs,gs,vs;function ms(t=0){const e=Array(t);let i=0;for(;i<t;)e[i]=i++;return e.deletedItems=[],e.isIndexMap=!0,e}function ws(t){return null==t?bs:bs(t)}function bs(t){const e=t.prototype;ei(e,"subs",{get:$s}),ri(e,"subscribe",ks),ri(e,"unsubscribe",xs)}!function(t){t[t.oneTime=1]="oneTime",t[t.toView=2]="toView",t[t.fromView=4]="fromView",t[t.twoWay=6]="twoWay",t[t.default=8]="default"}(us||(us={})),function(t){t[t.none=0]="none",t[t.persistentBindingFlags=961]="persistentBindingFlags",t[t.allowParentScopeTraversal=64]="allowParentScopeTraversal",t[t.observeLeafPropertiesOnly=128]="observeLeafPropertiesOnly",t[t.targetObserverFlags=769]="targetObserverFlags",t[t.noFlush=256]="noFlush",t[t.persistentTargetObserverQueue=512]="persistentTargetObserverQueue",t[t.bindingStrategy=1]="bindingStrategy",t[t.isStrictBindingStrategy=1]="isStrictBindingStrategy",t[t.fromBind=2]="fromBind",t[t.fromUnbind=4]="fromUnbind",t[t.mustEvaluate=8]="mustEvaluate",t[t.isTraversingParentScope=16]="isTraversingParentScope",t[t.dispose=32]="dispose"}(ds||(ds={})),function(t){t[t.None=0]="None",t[t.Subscriber0=1]="Subscriber0",t[t.Subscriber1=2]="Subscriber1",t[t.Subscriber2=4]="Subscriber2",t[t.SubscribersRest=8]="SubscribersRest",t[t.Any=15]="Any"}(ps||(ps={})),function(t){t[t.none=0]="none",t[t.capturing=1]="capturing",t[t.bubbling=2]="bubbling"}(fs||(fs={})),function(t){t[t.indexed=8]="indexed",t[t.keyed=4]="keyed",t[t.array=9]="array",t[t.map=6]="map",t[t.set=7]="set"}(gs||(gs={})),function(t){t[t.None=0]="None",t[t.Observer=1]="Observer",t[t.Node=2]="Node",t[t.Layout=4]="Layout",t[t.Primtive=8]="Primtive",t[t.Array=18]="Array",t[t.Set=34]="Set",t[t.Map=66]="Map"}(vs||(vs={}));class ys{constructor(){this.sf=0,this.count=0}add(t){if(this.has(t))return!1;const e=this.sf;return 0==(1&e)?(this.s0=t,this.sf|=1):0==(2&e)?(this.s1=t,this.sf|=2):0==(4&e)?(this.s2=t,this.sf|=4):0==(8&e)?(this.sr=[t],this.sf|=8):this.sr.push(t),++this.count,!0}has(t){const e=this.sf;if((1&e)>0&&this.s0===t)return!0;if((2&e)>0&&this.s1===t)return!0;if((4&e)>0&&this.s2===t)return!0;if((8&e)>0){const e=this.sr,i=e.length;let s=0;for(;s<i;++s)if(e[s]===t)return!0}return!1}any(){return 0!==this.sf}remove(t){const e=this.sf;if((1&e)>0&&this.s0===t)return this.s0=void 0,this.sf=1^(1|this.sf),--this.count,!0;if((2&e)>0&&this.s1===t)return this.s1=void 0,this.sf=2^(2|this.sf),--this.count,!0;if((4&e)>0&&this.s2===t)return this.s2=void 0,this.sf=4^(4|this.sf),--this.count,!0;if((8&e)>0){const e=this.sr,i=e.length;let s=0;for(;s<i;++s)if(e[s]===t)return e.splice(s,1),1===i&&(this.sf=8^(8|this.sf)),--this.count,!0}return!1}notify(t,e,i){const s=this.s0,n=this.s1,r=this.s2;let o=this.sr;if(void 0!==o&&(o=o.slice()),void 0!==s&&s.handleChange(t,e,i),void 0!==n&&n.handleChange(t,e,i),void 0!==r&&r.handleChange(t,e,i),void 0!==o){const s=o.length;let n,r=0;for(;r<s;++r)n=o[r],void 0!==n&&n.handleChange(t,e,i)}}notifyCollection(t,e){const i=this.s0,s=this.s1,n=this.s2;let r=this.sr;if(void 0!==r&&(r=r.slice()),void 0!==i&&i.handleCollectionChange(t,e),void 0!==s&&s.handleCollectionChange(t,e),void 0!==n&&n.handleCollectionChange(t,e),void 0!==r){const i=r.length;let s,n=0;for(;n<i;++n)s=r[n],void 0!==s&&s.handleCollectionChange(t,e)}}}function $s(){return ni(this,"subs",new ys)}function ks(t){return this.subs.add(t)}function xs(t){return this.subs.remove(t)}function Cs(t){return null==t?Ss:Ss(t)}function Ss(t){const e=t.prototype;ei(e,"queue",{get:Ts})}class As{constructor(){this.t=!1,this.i=new Set}get count(){return this.i.size}add(t){if(this.i.add(t),!this.t){this.t=!0;try{this.i.forEach(Rs)}finally{this.t=!1}}}clear(){this.i.clear(),this.t=!1}}function Ts(){return As.instance}function Rs(t,e,i){i.delete(t),t.flush()}As.instance=new As;class Es{constructor(t){this.owner=t,this.type=18,this.f=0,this.v=this.h=(this.o=t.collection).length}getValue(){return this.o.length}setValue(t,e){const i=this.v;t!==i&&et(t)&&(0==(256&e)&&(this.o.length=t),this.v=t,this.h=i,this.f=e,this.queue.add(this))}handleCollectionChange(t,e){const i=this.v,s=this.o.length;(this.v=s)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){Us=this.h,this.h=this.v,this.subs.notify(this.v,Us,this.f)}}class Os{constructor(t){this.owner=t,this.f=0,this.v=this.h=(this.o=t.collection).size,this.type=this.o instanceof Map?66:34}getValue(){return this.o.size}setValue(){throw new Error("AUR02")}handleCollectionChange(t,e){const i=this.v,s=this.o.size;(this.v=s)!==i&&(this.h=i,this.f=e,this.queue.add(this))}flush(){Us=this.h,this.h=this.v,this.subs.notify(this.v,Us,this.f)}}function Ps(t){const e=t.prototype;ri(e,"subscribe",js,!0),ri(e,"unsubscribe",Is,!0),Cs(t),ws(t)}function js(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}function Is(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.subscribe(this)}let Us;Ps(Es),Ps(Os);const Ls=new WeakMap;function Ms(t,e){return t===e?0:(t=null===t?"null":t.toString())<(e=null===e?"null":e.toString())?-1:1}function Ns(t,e){return void 0===t?void 0===e?0:1:void 0===e?-1:0}function Bs(t,e,i,s,n){let r,o,a,c,l,h,u;for(h=i+1;h<s;h++){for(r=t[h],o=e[h],u=h-1;u>=i&&(a=t[u],c=e[u],l=n(a,r),l>0);u--)t[u+1]=a,e[u+1]=c;t[u+1]=r,e[u+1]=o}}function Vs(t,e,i,s,n){let r,o,a,c,l,h,u,d,p,f,g,v,m,w,b,y,$,k,x,C=0,S=0;for(;;){if(s-i<=10)return void Bs(t,e,i,s,n);C=i+(s-i>>1),r=t[i],c=e[i],o=t[s-1],l=e[s-1],a=t[C],h=e[C],u=n(r,o),u>0&&(f=r,g=c,r=o,c=l,o=f,l=g),d=n(r,a),d>=0?(f=r,g=c,r=a,c=h,a=o,h=l,o=f,l=g):(p=n(o,a),p>0&&(f=o,g=l,o=a,l=h,a=f,h=g)),t[i]=r,e[i]=c,t[s-1]=a,e[s-1]=h,v=o,m=l,w=i+1,b=s-1,t[C]=t[w],e[C]=e[w],t[w]=v,e[w]=m;t:for(S=w+1;S<b;S++)if(y=t[S],$=e[S],k=n(y,v),k<0)t[S]=t[w],e[S]=e[w],t[w]=y,e[w]=$,w++;else if(k>0){do{if(b--,b==S)break t;x=t[b],k=n(x,v)}while(k>0);t[S]=t[b],e[S]=e[b],t[b]=y,e[b]=$,k<0&&(y=t[S],$=e[S],t[S]=t[w],e[S]=e[w],t[w]=y,e[w]=$,w++)}s-b<w-i?(Vs(t,e,b,s,n),s=w):(Vs(t,e,i,w,n),i=b)}}const Ds=Array.prototype,qs=Ds.push,Fs=Ds.unshift,Hs=Ds.pop,Ws=Ds.shift,zs=Ds.splice,Ks=Ds.reverse,Qs=Ds.sort,Gs=["push","unshift","pop","shift","splice","reverse","sort"],Js={push:function(...t){const e=Ls.get(this);if(void 0===e)return qs.apply(this,t);const i=this.length,s=t.length;if(0===s)return i;this.length=e.indexMap.length=i+s;let n=i;for(;n<this.length;)this[n]=t[n-i],e.indexMap[n]=-2,n++;return e.notify(),this.length},unshift:function(...t){const e=Ls.get(this);if(void 0===e)return Fs.apply(this,t);const i=t.length,s=new Array(i);let n=0;for(;n<i;)s[n++]=-2;Fs.apply(e.indexMap,s);const r=Fs.apply(this,t);return e.notify(),r},pop:function(){const t=Ls.get(this);if(void 0===t)return Hs.call(this);const e=t.indexMap,i=Hs.call(this),s=e.length-1;return e[s]>-1&&e.deletedItems.push(e[s]),Hs.call(e),t.notify(),i},shift:function(){const t=Ls.get(this);if(void 0===t)return Ws.call(this);const e=t.indexMap,i=Ws.call(this);return e[0]>-1&&e.deletedItems.push(e[0]),Ws.call(e),t.notify(),i},splice:function(...t){const e=t[0],i=t[1],s=Ls.get(this);if(void 0===s)return zs.apply(this,t);const n=this.length,r=0|e,o=r<0?Math.max(n+r,0):Math.min(r,n),a=s.indexMap,c=t.length,l=0===c?0:1===c?n-o:i;if(l>0){let t=o;const e=t+l;for(;t<e;)a[t]>-1&&a.deletedItems.push(a[t]),t++}if(c>2){const t=c-2,s=new Array(t);let n=0;for(;n<t;)s[n++]=-2;zs.call(a,e,i,...s)}else zs.apply(a,t);const h=zs.apply(this,t);return s.notify(),h},reverse:function(){const t=Ls.get(this);if(void 0===t)return Ks.call(this),this;const e=this.length,i=e/2|0;let s=0;for(;s!==i;){const i=e-s-1,n=this[s],r=t.indexMap[s],o=this[i],a=t.indexMap[i];this[s]=o,t.indexMap[s]=a,this[i]=n,t.indexMap[i]=r,s++}return t.notify(),this},sort:function(t){const e=Ls.get(this);if(void 0===e)return Qs.call(this,t),this;const i=this.length;if(i<2)return this;Vs(this,e.indexMap,0,i,Ns);let s=0;for(;s<i&&void 0!==this[s];)s++;return void 0!==t&&ii(t)||(t=Ms),Vs(this,e.indexMap,0,s,t),e.notify(),this}};for(const t of Gs)ei(Js[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let _s=!1;class Ys{constructor(t){this.type=18,_s||(_s=!0,function(){for(const t of Gs)!0!==Ds[t].observing&&ni(Ds,t,Js[t])}()),this.indexObservers={},this.collection=t,this.indexMap=ms(t.length),this.lenObs=void 0,Ls.set(t,this)}notify(){const t=this.indexMap,e=this.collection.length;this.indexMap=ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Es(this)}getIndexObserver(t){var e,i;return null!==(e=(i=this.indexObservers)[t])&&void 0!==e?e:i[t]=new Zs(this,t)}}class Zs{constructor(t,e){this.owner=t,this.index=e,this.doNotCache=!0,this.value=this.getValue()}getValue(){return this.owner.collection[this.index]}setValue(t,e){if(t===this.getValue())return;const i=this.owner,s=this.index,n=i.indexMap;n[s]>-1&&n.deletedItems.push(n[s]),n[s]=-2,i.collection[s]=t,i.notify()}handleCollectionChange(t,e){const i=this.index;if(t[i]===i)return;const s=this.value,n=this.value=this.getValue();s!==n&&this.subs.notify(n,s,e)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.owner.subscribe(this)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.owner.unsubscribe(this)}}function Xs(t){let e=Ls.get(t);return void 0===e&&(e=new Ys(t)),e}ws(Ys),ws(Zs);const tn=new WeakMap,en=Set.prototype,sn=en.add,nn=en.clear,rn=en.delete,on=["add","clear","delete"],an={add:function(t){const e=tn.get(this);if(void 0===e)return sn.call(this,t),this;const i=this.size;return sn.call(this,t),this.size===i||(e.indexMap[i]=-2,e.notify()),this},clear:function(){const t=tn.get(this);if(void 0===t)return nn.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;nn.call(this),e.length=0,t.notify()}},delete:function(t){const e=tn.get(this);if(void 0===e)return rn.call(this,t);if(0===this.size)return!1;let i=0;const s=e.indexMap;for(const n of this.keys()){if(n===t){s[i]>-1&&s.deletedItems.push(s[i]),s.splice(i,1);const n=rn.call(this,t);return!0===n&&e.notify(),n}i++}return!1}},cn={writable:!0,enumerable:!1,configurable:!0};for(const t of on)ei(an[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let ln=!1;class hn{constructor(t){this.type=34,ln||(ln=!0,function(){for(const t of on)!0!==en[t].observing&&ei(en,t,{...cn,value:an[t]})}()),this.collection=t,this.indexMap=ms(t.size),this.lenObs=void 0,tn.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Os(this)}}function un(t){let e=tn.get(t);return void 0===e&&(e=new hn(t)),e}ws(hn);const dn=new WeakMap,pn=Map.prototype,fn=pn.set,gn=pn.clear,vn=pn.delete,mn=["set","clear","delete"],wn={set:function(t,e){const i=dn.get(this);if(void 0===i)return fn.call(this,t,e),this;const s=this.get(t),n=this.size;if(fn.call(this,t,e),this.size===n){let e=0;for(const n of this.entries()){if(n[0]===t)return n[1]!==s&&(i.indexMap.deletedItems.push(i.indexMap[e]),i.indexMap[e]=-2,i.notify()),this;e++}return this}return i.indexMap[n]=-2,i.notify(),this},clear:function(){const t=dn.get(this);if(void 0===t)return gn.call(this);if(this.size>0){const e=t.indexMap;let i=0;for(const t of this.keys())e[i]>-1&&e.deletedItems.push(e[i]),i++;gn.call(this),e.length=0,t.notify()}},delete:function(t){const e=dn.get(this);if(void 0===e)return vn.call(this,t);if(0===this.size)return!1;let i=0;const s=e.indexMap;for(const n of this.keys()){if(n===t){s[i]>-1&&s.deletedItems.push(s[i]),s.splice(i,1);const n=vn.call(this,t);return!0===n&&e.notify(),n}++i}return!1}},bn={writable:!0,enumerable:!1,configurable:!0};for(const t of mn)ei(wn[t],"observing",{value:!0,writable:!1,configurable:!1,enumerable:!1});let yn=!1;class $n{constructor(t){this.type=66,yn||(yn=!0,function(){for(const t of mn)!0!==pn[t].observing&&ei(pn,t,{...bn,value:wn[t]})}()),this.collection=t,this.indexMap=ms(t.size),this.lenObs=void 0,dn.set(t,this)}notify(){const t=this.indexMap,e=this.collection.size;this.indexMap=ms(e),this.subs.notifyCollection(t,0)}getLengthObserver(){var t;return null!==(t=this.lenObs)&&void 0!==t?t:this.lenObs=new Os(this)}}function kn(t){let e=dn.get(t);return void 0===e&&(e=new $n(t)),e}function xn(t,e){const i=this.oL.getObserver(t,e);this.obs.add(i)}function Cn(){return ni(this,"obs",new En(this))}function Sn(t){let e;if(t instanceof Array)e=Xs(t);else if(t instanceof Set)e=un(t);else{if(!(t instanceof Map))throw new Error("AUR0210");e=kn(t)}this.obs.add(e)}function An(t){this.obs.add(t)}function Tn(){throw new Error("AUR2011:handleChange")}function Rn(){throw new Error("AUR2012:handleCollectionChange")}ws($n);class En{constructor(t){this.version=0,this.count=0,this.o=new Map,this.b=t}handleChange(t,e,i){return this.b.interceptor.handleChange(t,e,i)}handleCollectionChange(t,e){this.b.interceptor.handleCollectionChange(t,e)}add(t){this.o.has(t)||(t.subscribe(this),++this.count),this.o.set(t,this.version)}clear(){this.o.forEach(Pn,this),this.count=this.o.size}clearAll(){this.o.forEach(On,this),this.o.clear(),this.count=0}}function On(t,e){e.unsubscribe(this)}function Pn(t,e){this.version!==t&&(e.unsubscribe(this),this.o.delete(e))}function jn(t){const e=t.prototype;return ri(e,"observe",xn,!0),ri(e,"observeCollection",Sn,!0),ri(e,"subscribeTo",An,!0),ei(e,"obs",{get:Cn}),ri(e,"handleChange",Tn),ri(e,"handleCollectionChange",Rn),t}function In(t){return null==t?jn:jn(t)}jn(class{constructor(t,e,i,s){this.key=t,this.binding=e,this.oL=i,this.locator=s,this.interceptor=this}$bind(){throw new Error("AUR0213:$bind")}$unbind(){throw new Error("AUR0214:$unbind")}handleChange(t,e,i){this.binding[this.key](t,e,i)}});const Un=Dt.createInterface("IExpressionParser",(t=>t.singleton(Ln)));class Ln{constructor(){this.u=oi(),this.A=oi(),this.U=oi()}parse(t,e){let i;switch(e){case 16:return new Li(t);case 1:return i=this.U[t],void 0===i&&(i=this.U[t]=this.$parse(t,e)),i;case 2:return i=this.A[t],void 0===i&&(i=this.A[t]=this.$parse(t,e)),i;default:if(0===t.length){if((12&e)>0)return Ji.$empty;throw new Error("AUR0169")}return i=this.u[t],void 0===i&&(i=this.u[t]=this.$parse(t,e)),i}}$parse(t,e){return Gn.ip=t,Gn.length=t.length,Gn.index=0,Gn.O=t.charCodeAt(0),Jn(Gn,0,61,void 0===e?8:e)}}var Mn,Nn,Bn,Vn;function Dn(t){switch(t){case 98:return 8;case 116:return 9;case 110:return 10;case 118:return 11;case 102:return 12;case 114:return 13;case 34:return 34;case 39:return 39;case 92:return 92;default:return t}}!function(t){t[t.Null=0]="Null",t[t.Backspace=8]="Backspace",t[t.Tab=9]="Tab",t[t.LineFeed=10]="LineFeed",t[t.VerticalTab=11]="VerticalTab",t[t.FormFeed=12]="FormFeed",t[t.CarriageReturn=13]="CarriageReturn",t[t.Space=32]="Space",t[t.Exclamation=33]="Exclamation",t[t.DoubleQuote=34]="DoubleQuote",t[t.Dollar=36]="Dollar",t[t.Percent=37]="Percent",t[t.Ampersand=38]="Ampersand",t[t.SingleQuote=39]="SingleQuote",t[t.OpenParen=40]="OpenParen",t[t.CloseParen=41]="CloseParen",t[t.Asterisk=42]="Asterisk",t[t.Plus=43]="Plus",t[t.Comma=44]="Comma",t[t.Minus=45]="Minus",t[t.Dot=46]="Dot",t[t.Slash=47]="Slash",t[t.Semicolon=59]="Semicolon",t[t.Backtick=96]="Backtick",t[t.OpenBracket=91]="OpenBracket",t[t.Backslash=92]="Backslash",t[t.CloseBracket=93]="CloseBracket",t[t.Caret=94]="Caret",t[t.Underscore=95]="Underscore",t[t.OpenBrace=123]="OpenBrace",t[t.Bar=124]="Bar",t[t.CloseBrace=125]="CloseBrace",t[t.Colon=58]="Colon",t[t.LessThan=60]="LessThan",t[t.Equals=61]="Equals",t[t.GreaterThan=62]="GreaterThan",t[t.Question=63]="Question",t[t.Zero=48]="Zero",t[t.One=49]="One",t[t.Two=50]="Two",t[t.Three=51]="Three",t[t.Four=52]="Four",t[t.Five=53]="Five",t[t.Six=54]="Six",t[t.Seven=55]="Seven",t[t.Eight=56]="Eight",t[t.Nine=57]="Nine",t[t.UpperA=65]="UpperA",t[t.UpperB=66]="UpperB",t[t.UpperC=67]="UpperC",t[t.UpperD=68]="UpperD",t[t.UpperE=69]="UpperE",t[t.UpperF=70]="UpperF",t[t.UpperG=71]="UpperG",t[t.UpperH=72]="UpperH",t[t.UpperI=73]="UpperI",t[t.UpperJ=74]="UpperJ",t[t.UpperK=75]="UpperK",t[t.UpperL=76]="UpperL",t[t.UpperM=77]="UpperM",t[t.UpperN=78]="UpperN",t[t.UpperO=79]="UpperO",t[t.UpperP=80]="UpperP",t[t.UpperQ=81]="UpperQ",t[t.UpperR=82]="UpperR",t[t.UpperS=83]="UpperS",t[t.UpperT=84]="UpperT",t[t.UpperU=85]="UpperU",t[t.UpperV=86]="UpperV",t[t.UpperW=87]="UpperW",t[t.UpperX=88]="UpperX",t[t.UpperY=89]="UpperY",t[t.UpperZ=90]="UpperZ",t[t.LowerA=97]="LowerA",t[t.LowerB=98]="LowerB",t[t.LowerC=99]="LowerC",t[t.LowerD=100]="LowerD",t[t.LowerE=101]="LowerE",t[t.LowerF=102]="LowerF",t[t.LowerG=103]="LowerG",t[t.LowerH=104]="LowerH",t[t.LowerI=105]="LowerI",t[t.LowerJ=106]="LowerJ",t[t.LowerK=107]="LowerK",t[t.LowerL=108]="LowerL",t[t.LowerM=109]="LowerM",t[t.LowerN=110]="LowerN",t[t.LowerO=111]="LowerO",t[t.LowerP=112]="LowerP",t[t.LowerQ=113]="LowerQ",t[t.LowerR=114]="LowerR",t[t.LowerS=115]="LowerS",t[t.LowerT=116]="LowerT",t[t.LowerU=117]="LowerU",t[t.LowerV=118]="LowerV",t[t.LowerW=119]="LowerW",t[t.LowerX=120]="LowerX",t[t.LowerY=121]="LowerY",t[t.LowerZ=122]="LowerZ"}(Mn||(Mn={})),function(t){t[t.Reset=0]="Reset",t[t.Ancestor=511]="Ancestor",t[t.This=512]="This",t[t.Scope=1024]="Scope",t[t.Member=2048]="Member",t[t.Keyed=4096]="Keyed"}(Nn||(Nn={})),function(t){t[t.Variadic=61]="Variadic",t[t.Assign=62]="Assign",t[t.Conditional=63]="Conditional",t[t.LogicalOR=64]="LogicalOR",t[t.LogicalAND=128]="LogicalAND",t[t.Equality=192]="Equality",t[t.Relational=256]="Relational",t[t.Additive=320]="Additive",t[t.Multiplicative=384]="Multiplicative",t[t.Binary=448]="Binary",t[t.LeftHandSide=449]="LeftHandSide",t[t.Primary=450]="Primary",t[t.Unary=451]="Unary"}(Bn||(Bn={})),function(t){t[t.EOF=1572864]="EOF",t[t.ExpressionTerminal=1048576]="ExpressionTerminal",t[t.AccessScopeTerminal=524288]="AccessScopeTerminal",t[t.ClosingToken=262144]="ClosingToken",t[t.OpeningToken=131072]="OpeningToken",t[t.BinaryOp=65536]="BinaryOp",t[t.UnaryOp=32768]="UnaryOp",t[t.LeftHandSide=16384]="LeftHandSide",t[t.StringOrNumericLiteral=12288]="StringOrNumericLiteral",t[t.NumericLiteral=8192]="NumericLiteral",t[t.StringLiteral=4096]="StringLiteral",t[t.IdentifierName=3072]="IdentifierName",t[t.Keyword=2048]="Keyword",t[t.Identifier=1024]="Identifier",t[t.Contextual=512]="Contextual",t[t.Precedence=448]="Precedence",t[t.Type=63]="Type",t[t.FalseKeyword=2048]="FalseKeyword",t[t.TrueKeyword=2049]="TrueKeyword",t[t.NullKeyword=2050]="NullKeyword",t[t.UndefinedKeyword=2051]="UndefinedKeyword",t[t.ThisScope=3076]="ThisScope",t[t.ParentScope=3078]="ParentScope",t[t.OpenParen=671751]="OpenParen",t[t.OpenBrace=131080]="OpenBrace",t[t.Dot=16393]="Dot",t[t.CloseBrace=1835018]="CloseBrace",t[t.CloseParen=1835019]="CloseParen",t[t.Comma=1572876]="Comma",t[t.OpenBracket=671757]="OpenBracket",t[t.CloseBracket=1835022]="CloseBracket",t[t.Colon=1572879]="Colon",t[t.Question=1572880]="Question",t[t.Ampersand=1572883]="Ampersand",t[t.Bar=1572884]="Bar",t[t.BarBar=1638549]="BarBar",t[t.AmpersandAmpersand=1638614]="AmpersandAmpersand",t[t.EqualsEquals=1638679]="EqualsEquals",t[t.ExclamationEquals=1638680]="ExclamationEquals",t[t.EqualsEqualsEquals=1638681]="EqualsEqualsEquals",t[t.ExclamationEqualsEquals=1638682]="ExclamationEqualsEquals",t[t.LessThan=1638747]="LessThan",t[t.GreaterThan=1638748]="GreaterThan",t[t.LessThanEquals=1638749]="LessThanEquals",t[t.GreaterThanEquals=1638750]="GreaterThanEquals",t[t.InKeyword=1640799]="InKeyword",t[t.InstanceOfKeyword=1640800]="InstanceOfKeyword",t[t.Plus=623009]="Plus",t[t.Minus=623010]="Minus",t[t.TypeofKeyword=34851]="TypeofKeyword",t[t.VoidKeyword=34852]="VoidKeyword",t[t.Asterisk=1638885]="Asterisk",t[t.Percent=1638886]="Percent",t[t.Slash=1638887]="Slash",t[t.Equals=1048616]="Equals",t[t.Exclamation=32809]="Exclamation",t[t.TemplateTail=540714]="TemplateTail",t[t.TemplateContinuation=540715]="TemplateContinuation",t[t.OfKeyword=1051180]="OfKeyword"}(Vn||(Vn={}));const qn=Ji.$false,Fn=Ji.$true,Hn=Ji.$null,Wn=Ji.$undefined,zn=Di.$this,Kn=Di.$parent;var Qn;!function(t){t[t.None=0]="None",t[t.Interpolation=1]="Interpolation",t[t.IsIterator=2]="IsIterator",t[t.IsFunction=4]="IsFunction",t[t.IsProperty=8]="IsProperty",t[t.IsCustom=16]="IsCustom"}(Qn||(Qn={}));const Gn=new class{constructor(t){this.ip=t,this.index=0,this.C=0,this.B=0,this.$=1572864,this.L="",this.R=!0,this.length=t.length,this.O=t.charCodeAt(0)}get P(){return this.ip.slice(this.C,this.index)}}("");function Jn(t,e,i,s){if(16===s)return new Li(t.ip);if(0===t.index){if(1&s)return function(t){const e=[],i=[],s=t.length;let n="";for(;t.index<s;){switch(t.O){case 36:if(123===t.ip.charCodeAt(t.index+1)){e.push(n),n="",t.index+=2,t.O=t.ip.charCodeAt(t.index),Yn(t);const s=Jn(t,0,61,1);i.push(s);continue}n+="$";break;case 92:n+=String.fromCharCode(Dn(Zn(t)));break;default:n+=String.fromCharCode(t.O)}Zn(t)}return i.length?(e.push(n),new rs(e,i)):null}(t);if(Yn(t),1048576&t.$)throw new Error(`AUR0151:${t.ip}`)}let n;if(t.R=448>i,32768&t.$){const i=nr[63&t.$];Yn(t),n=new Gi(i,Jn(t,e,449,s)),t.R=!1}else{t:switch(t.$){case 3078:t.R=!1;do{if(Yn(t),e++,!ir(t,16393)){if(524288&t.$){const t=511&e;n=0===t?zn:1===t?Kn:new Di(t),e=512;break t}throw new Error(`AUR0154:${t.ip}`)}if(16393===t.$)throw new Error(`AUR0152:${t.ip}`);if(1572864===t.$)throw new Error(`AUR0153:${t.ip}`)}while(3078===t.$);case 1024:2&s?n=new is(t.L):(n=new qi(t.L,511&e),e=1024),t.R=!0,Yn(t);break;case 3076:t.R=!1,Yn(t),n=zn,e=512;break;case 671751:Yn(t),n=Jn(t,0,62,s),sr(t,1835019),e=0;break;case 671757:n=t.ip.search(/\s+of\s+/)>t.index?function(t){const e=[],i=new os(90137,e,void 0,void 0);let s="",n=!0,r=0;for(;n;)switch(Yn(t),t.$){case 1835022:n=!1,o();break;case 1572876:o();break;case 1024:s=t.P;break;default:throw new Error(`AUR0170:${t.ip}`)}return sr(t,1835022),i;function o(){""!==s?(e.push(new as(new Fi(zn,s),new Hi(zn,new Ji(r++)),void 0)),s=""):r++}}(t):function(t,e,i){Yn(t);const s=new Array;for(;1835022!==t.$;)if(ir(t,1572876)){if(s.push(Wn),1835022===t.$)break}else{if(s.push(Jn(t,e,62,-3&i)),!ir(t,1572876))break;if(1835022===t.$)break}return sr(t,1835022),2&i?new ts(s):(t.R=!1,new _i(s))}(t,e,s),e=0;break;case 131080:n=function(t,e){const i=new Array,s=new Array;for(Yn(t);1835018!==t.$;){if(i.push(t.L),12288&t.$)Yn(t),sr(t,1572879),s.push(Jn(t,0,62,-3&e));else{if(!(3072&t.$))throw new Error(`AUR0164:${t.ip}`);{const{O:i,$:n,index:r}=t;Yn(t),ir(t,1572879)?s.push(Jn(t,0,62,-3&e)):(t.O=i,t.$=n,t.index=r,s.push(Jn(t,0,450,-3&e)))}}1835018!==t.$&&sr(t,1572876)}return sr(t,1835018),2&e?new es(i,s):(t.R=!1,new Yi(i,s))}(t,s),e=0;break;case 540714:n=new Zi([t.L]),t.R=!1,Yn(t),e=0;break;case 540715:n=_n(t,e,s,n,!1),e=0;break;case 4096:case 8192:n=new Ji(t.L),t.R=!1,Yn(t),e=0;break;case 2050:case 2051:case 2049:case 2048:n=nr[63&t.$],t.R=!1,Yn(t),e=0;break;default:throw t.index>=t.length?new Error(`AUR0155:${t.ip}`):new Error(`AUR0156:${t.ip}`)}if(2&s)return function(t,e){if(0==(65536&e.$kind))throw new Error(`AUR0163:${t.ip}`);if(1051180!==t.$)throw new Error(`AUR0163:${t.ip}`);Yn(t);const i=e,s=Jn(t,0,61,0);return new ns(i,s)}(t,n);if(449<i)return n;let r=t.L;for(;(16384&t.$)>0;){const i=[];let o;switch(t.$){case 16393:if(t.R=!0,Yn(t),0==(3072&t.$))throw new Error(`AUR0153:${t.ip}`);if(r=t.L,Yn(t),e=(1536&e)<<1|2048&e|(4096&e)>>1,671751===t.$){0===e&&(e=2048);continue}n=1024&e?new qi(r,n.ancestor):new Fi(n,r);continue;case 671757:t.R=!0,Yn(t),e=4096,n=new Hi(n,Jn(t,0,62,s)),sr(t,1835022);break;case 671751:for(t.R=!1,Yn(t);1835019!==t.$&&(i.push(Jn(t,0,62,s)),ir(t,1572876)););sr(t,1835019),n=1024&e?new Wi(r,i,n.ancestor):2048&e?new zi(n,r,i):new Ki(n,i),e=0;break;case 540714:t.R=!1,o=[t.L],n=new Xi(o,o,n),Yn(t);break;case 540715:n=_n(t,e,s,n,!0)}}}if(448<i)return n;for(;(65536&t.$)>0;){const r=t.$;if((448&r)<=i)break;Yn(t),n=new Qi(nr[63&r],n,Jn(t,e,448&r,s)),t.R=!1}if(63<i)return n;if(ir(t,1572880)){const i=Jn(t,e,62,s);sr(t,1572879),n=new Vi(n,i,Jn(t,e,62,s)),t.R=!1}if(62<i)return n;if(ir(t,1048616)){if(!t.R)throw new Error(`AUR0158:${t.ip}`);n=new Bi(n,Jn(t,e,62,s))}if(61<i)return n;for(;ir(t,1572884);){if(1572864===t.$)throw new Error(`AUR0159:${t.ip}`);const i=t.L;Yn(t);const r=new Array;for(;ir(t,1572879);)r.push(Jn(t,e,62,s));n=new Ni(n,i,r)}for(;ir(t,1572883);){if(1572864===t.$)throw new Error(`AUR0160:${t.ip}`);const i=t.L;Yn(t);const r=new Array;for(;ir(t,1572879);)r.push(Jn(t,e,62,s));n=new Mi(n,i,r)}if(1572864!==t.$){if(1&s)return n;if("of"===t.P)throw new Error(`AUR0161:${t.ip}`);throw new Error(`AUR0162:${t.ip}`)}return n}function _n(t,e,i,s,n){const r=[t.L];sr(t,540715);const o=[Jn(t,e,62,i)];for(;540714!==(t.$=er(t));)r.push(t.L),sr(t,540715),o.push(Jn(t,e,62,i));return r.push(t.L),t.R=!1,n?(Yn(t),new Xi(r,r,s,o)):(Yn(t),new Zi(r,o))}function Yn(t){for(;t.index<t.length;)if(t.C=t.index,null!=(t.$=dr[t.O](t)))return;t.$=1572864}function Zn(t){return t.O=t.ip.charCodeAt(++t.index)}function Xn(t,e){let i=t.O;if(!1===e){do{i=Zn(t)}while(i<=57&&i>=48);if(46!==i)return t.L=parseInt(t.P,10),8192;if(i=Zn(t),t.index>=t.length)return t.L=parseInt(t.P.slice(0,-1),10),8192}if(i<=57&&i>=48)do{i=Zn(t)}while(i<=57&&i>=48);else t.O=t.ip.charCodeAt(--t.index);return t.L=parseFloat(t.P),8192}function tr(t){let e=!0,i="";for(;96!==Zn(t);)if(36===t.O){if(t.index+1<t.length&&123===t.ip.charCodeAt(t.index+1)){t.index++,e=!1;break}i+="$"}else if(92===t.O)i+=String.fromCharCode(Dn(Zn(t)));else{if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);i+=String.fromCharCode(t.O)}return Zn(t),t.L=i,e?540714:540715}function er(t){if(t.index>=t.length)throw new Error(`AUR0166:${t.ip}`);return t.index--,tr(t)}function ir(t,e){return t.$===e&&(Yn(t),!0)}function sr(t,e){if(t.$!==e)throw new Error(`AUR0167:${t.ip}<${e}`);Yn(t)}const nr=[qn,Fn,Hn,Wn,"$this",null,"$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!",540714,540715,"of"],rr=oi();rr.true=2049,rr.null=2050,rr.false=2048,rr.undefined=2051,rr.$this=3076,rr.$parent=3078,rr.in=1640799,rr.instanceof=1640800,rr.typeof=34851,rr.void=34852,rr.of=1051180;const or=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],ar=[48,58];function cr(t,e,i,s){const n=i.length;for(let r=0;r<n;r+=2){const n=i[r];let o=i[r+1];if(o=o>0?o:n+1,t&&t.fill(s,n,o),e)for(let t=n;t<o;t++)e.add(t)}}function lr(t){return e=>(Zn(e),t)}const hr=t=>{throw new Error(`AUR0168:${t.ip}`)};hr.notMapped=!0,cr(null,new Set,[36,0,48,58,65,91,95,0,97,123],!0);const ur=new Uint8Array(65535);cr(ur,null,or,1),cr(ur,null,ar,1);const dr=new Array(65535);dr.fill(hr,0,65535),cr(dr,null,[0,33,127,161],(t=>(Zn(t),null))),cr(dr,null,or,(function(t){for(;ur[Zn(t)];);const e=rr[t.L=t.P];return void 0===e?1024:e})),cr(dr,null,ar,(t=>Xn(t,!1))),dr[34]=dr[39]=t=>function(t){const e=t.O;Zn(t);let i=0;const s=new Array;let n=t.index;for(;t.O!==e;)if(92===t.O)s.push(t.ip.slice(n,t.index)),Zn(t),i=Dn(t.O),Zn(t),s.push(String.fromCharCode(i)),n=t.index;else{if(t.index>=t.length)throw new Error(`AUR0165:${t.ip}`);Zn(t)}const r=t.ip.slice(n,t.index);Zn(t),s.push(r);const o=s.join("");return t.L=o,4096}(t),dr[96]=t=>tr(t),dr[33]=t=>61!==Zn(t)?32809:61!==Zn(t)?1638680:(Zn(t),1638682),dr[61]=t=>61!==Zn(t)?1048616:61!==Zn(t)?1638679:(Zn(t),1638681),dr[38]=t=>38!==Zn(t)?1572883:(Zn(t),1638614),dr[124]=t=>124!==Zn(t)?1572884:(Zn(t),1638549),dr[46]=t=>Zn(t)<=57&&t.O>=48?Xn(t,!0):16393,dr[60]=t=>61!==Zn(t)?1638747:(Zn(t),1638749),dr[62]=t=>61!==Zn(t)?1638748:(Zn(t),1638750),dr[37]=lr(1638886),dr[40]=lr(671751),dr[41]=lr(1835019),dr[42]=lr(1638885),dr[43]=lr(623009),dr[44]=lr(1572876),dr[45]=lr(623010),dr[47]=lr(1638887),dr[58]=lr(1572879),dr[63]=lr(1572880),dr[91]=lr(671757),dr[93]=lr(1835022),dr[123]=lr(131080),dr[125]=lr(1835018);let pr=null;const fr=[];let gr=!1;function vr(){return pr}function mr(t){if(null==t)throw new Error("AUR0206");if(null==pr)return pr=t,fr[0]=pr,void(gr=!0);if(pr===t)throw new Error("AUR0207");fr.push(t),pr=t,gr=!0}function wr(t){if(null==t)throw new Error("AUR0208");if(pr!==t)throw new Error("AUR0209");fr.pop(),pr=fr.length>0?fr[fr.length-1]:null,gr=null!=pr}const br=Object.freeze({get current(){return pr},get connecting(){return gr},enter:mr,exit:wr,pause:function(){gr=!1},resume:function(){gr=!0}}),yr=Reflect.get,$r=Object.prototype.toString,kr=new WeakMap;function xr(t){switch($r.call(t)){case"[object Object]":case"[object Array]":case"[object Map]":case"[object Set]":return!0;default:return!1}}const Cr="__raw__";function Sr(t){return xr(t)?Ar(t):t}function Ar(t){var e;return null!==(e=kr.get(t))&&void 0!==e?e:function(t){const e=t instanceof Array?Pr:t instanceof Map||t instanceof Set?to:Or,i=new Proxy(t,e);return kr.set(t,i),i}(t)}function Tr(t){var e;return null!==(e=t[Cr])&&void 0!==e?e:t}function Rr(t){return xr(t)&&t[Cr]||t}function Er(t){return"constructor"===t||"__proto__"===t||"$observers"===t||t===Symbol.toPrimitive||t===Symbol.toStringTag}const Or={get(t,e,i){if(e===Cr)return t;const s=vr();return!gr||Er(e)||null==s?yr(t,e,i):(s.observe(t,e),Sr(yr(t,e,i)))}},Pr={get(t,e,i){if(e===Cr)return t;const s=vr();if(!gr||Er(e)||null==s)return yr(t,e,i);switch(e){case"length":return s.observe(t,"length"),t.length;case"map":return jr;case"includes":return Lr;case"indexOf":return Mr;case"lastIndexOf":return Nr;case"every":return Ir;case"filter":return Ur;case"find":return Vr;case"findIndex":return Br;case"flat":return Dr;case"flatMap":return qr;case"join":return Fr;case"push":return Wr;case"pop":return Hr;case"reduce":return Zr;case"reduceRight":return Xr;case"reverse":return Gr;case"shift":return zr;case"unshift":return Kr;case"slice":return Yr;case"splice":return Qr;case"some":return Jr;case"sort":return _r;case"keys":return co;case"values":case Symbol.iterator:return lo;case"entries":return ho}return s.observe(t,e),Sr(yr(t,e,i))},ownKeys(t){var e;return null===(e=vr())||void 0===e||e.observe(t,"length"),Reflect.ownKeys(t)}};function jr(t,e){var i;const s=Tr(this),n=s.map(((i,s)=>Rr(t.call(e,Sr(i),s,this))));return null===(i=vr())||void 0===i||i.observeCollection(s),Sr(n)}function Ir(t,e){var i;const s=Tr(this),n=s.every(((i,s)=>t.call(e,Sr(i),s,this)));return null===(i=vr())||void 0===i||i.observeCollection(s),n}function Ur(t,e){var i;const s=Tr(this),n=s.filter(((i,s)=>Rr(t.call(e,Sr(i),s,this))));return null===(i=vr())||void 0===i||i.observeCollection(s),Sr(n)}function Lr(t){var e;const i=Tr(this),s=i.includes(Rr(t));return null===(e=vr())||void 0===e||e.observeCollection(i),s}function Mr(t){var e;const i=Tr(this),s=i.indexOf(Rr(t));return null===(e=vr())||void 0===e||e.observeCollection(i),s}function Nr(t){var e;const i=Tr(this),s=i.lastIndexOf(Rr(t));return null===(e=vr())||void 0===e||e.observeCollection(i),s}function Br(t,e){var i;const s=Tr(this),n=s.findIndex(((i,s)=>Rr(t.call(e,Sr(i),s,this))));return null===(i=vr())||void 0===i||i.observeCollection(s),n}function Vr(t,e){var i;const s=Tr(this),n=s.find(((e,i)=>t(Sr(e),i,this)),e);return null===(i=vr())||void 0===i||i.observeCollection(s),Sr(n)}function Dr(){var t;const e=Tr(this);return null===(t=vr())||void 0===t||t.observeCollection(e),Sr(e.flat())}function qr(t,e){var i;const s=Tr(this);return null===(i=vr())||void 0===i||i.observeCollection(s),Ar(s.flatMap(((i,s)=>Sr(t.call(e,Sr(i),s,this)))))}function Fr(t){var e;const i=Tr(this);return null===(e=vr())||void 0===e||e.observeCollection(i),i.join(t)}function Hr(){return Sr(Tr(this).pop())}function Wr(...t){return Tr(this).push(...t)}function zr(){return Sr(Tr(this).shift())}function Kr(...t){return Tr(this).unshift(...t)}function Qr(...t){return Sr(Tr(this).splice(...t))}function Gr(...t){var e;const i=Tr(this),s=i.reverse();return null===(e=vr())||void 0===e||e.observeCollection(i),Sr(s)}function Jr(t,e){var i;const s=Tr(this),n=s.some(((i,s)=>Rr(t.call(e,Sr(i),s,this))));return null===(i=vr())||void 0===i||i.observeCollection(s),n}function _r(t){var e;const i=Tr(this),s=i.sort(t);return null===(e=vr())||void 0===e||e.observeCollection(i),Sr(s)}function Yr(t,e){var i;const s=Tr(this);return null===(i=vr())||void 0===i||i.observeCollection(s),Ar(s.slice(t,e))}function Zr(t,e){var i;const s=Tr(this),n=s.reduce(((e,i,s)=>t(e,Sr(i),s,this)),e);return null===(i=vr())||void 0===i||i.observeCollection(s),Sr(n)}function Xr(t,e){var i;const s=Tr(this),n=s.reduceRight(((e,i,s)=>t(e,Sr(i),s,this)),e);return null===(i=vr())||void 0===i||i.observeCollection(s),Sr(n)}const to={get(t,e,i){if(e===Cr)return t;const s=vr();if(!gr||Er(e)||null==s)return yr(t,e,i);switch(e){case"size":return s.observe(t,"size"),t.size;case"clear":return oo;case"delete":return ao;case"forEach":return eo;case"add":if(t instanceof Set)return ro;break;case"get":if(t instanceof Map)return so;break;case"set":if(t instanceof Map)return no;break;case"has":return io;case"keys":return co;case"values":return lo;case"entries":return ho;case Symbol.iterator:return t instanceof Map?ho:lo}return Sr(yr(t,e,i))}};function eo(t,e){var i;const s=Tr(this);return null===(i=vr())||void 0===i||i.observeCollection(s),s.forEach(((i,s)=>{t.call(e,Sr(i),Sr(s),this)}))}function io(t){var e;const i=Tr(this);return null===(e=vr())||void 0===e||e.observeCollection(i),i.has(Rr(t))}function so(t){var e;const i=Tr(this);return null===(e=vr())||void 0===e||e.observeCollection(i),Sr(i.get(Rr(t)))}function no(t,e){return Sr(Tr(this).set(Rr(t),Rr(e)))}function ro(t){return Sr(Tr(this).add(Rr(t)))}function oo(){return Sr(Tr(this).clear())}function ao(t){return Sr(Tr(this).delete(Rr(t)))}function co(){var t;const e=Tr(this);null===(t=vr())||void 0===t||t.observeCollection(e);const i=e.keys();return{next(){const t=i.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:Sr(e),done:s}},[Symbol.iterator](){return this}}}function lo(){var t;const e=Tr(this);null===(t=vr())||void 0===t||t.observeCollection(e);const i=e.values();return{next(){const t=i.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:Sr(e),done:s}},[Symbol.iterator](){return this}}}function ho(){var t;const e=Tr(this);null===(t=vr())||void 0===t||t.observeCollection(e);const i=e.entries();return{next(){const t=i.next(),e=t.value,s=t.done;return s?{value:void 0,done:s}:{value:[Sr(e[0]),Sr(e[1])],done:s}},[Symbol.iterator](){return this}}}const uo=Object.freeze({getProxy:Ar,getRaw:Tr,wrap:Sr,unwrap:Rr,rawKey:Cr});class po{constructor(t,e,i,s,n){this.interceptor=this,this.type=1,this.v=void 0,this.ov=void 0,this.ir=!1,this.D=!1,this.o=t,this.get=e,this.set=i,this.up=s,this.oL=n}static create(t,e,i,s,n){const r=i.get,o=i.set,a=new po(t,r,o,n,s),c=()=>a.getValue();return c.getObserver=()=>a,ei(t,e,{enumerable:i.enumerable,configurable:!0,get:c,set:t=>{a.setValue(t,0)}}),a}getValue(){return 0===this.subs.count?this.get.call(this.o,this):(this.D&&(this.compute(),this.D=!1),this.v)}setValue(t,e){if(!ii(this.set))throw new Error("AUR0221");t!==this.v&&(this.ir=!0,this.set.call(this.o,t),this.ir=!1,this.run())}handleChange(){this.D=!0,this.subs.count>0&&this.run()}handleCollectionChange(){this.D=!0,this.subs.count>0&&this.run()}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.compute(),this.D=!1)}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.D=!0,this.obs.clearAll())}flush(){fo=this.ov,this.ov=this.v,this.subs.notify(this.v,fo,0)}run(){if(this.ir)return;const t=this.v,e=this.compute();this.D=!1,Object.is(e,t)||(this.ov=t,this.queue.add(this))}compute(){this.ir=!0,this.obs.version++;try{return mr(this),this.v=Rr(this.get.call(this.up?Sr(this.o):this.o,this))}finally{this.obs.clear(),this.ir=!1,wr(this)}}}let fo;In(po),ws(po),Cs(po);const go=Dt.createInterface("IDirtyChecker",(t=>t.singleton(wo))),vo={timeoutsPerCheck:25,disabled:!1,throw:!1,resetToDefault(){this.timeoutsPerCheck=6,this.disabled=!1,this.throw=!1}},mo={persistent:!0};class wo{constructor(t){this.p=t,this.tracked=[],this.T=null,this.j=0,this.check=()=>{if(vo.disabled)return;if(++this.j<vo.timeoutsPerCheck)return;this.j=0;const t=this.tracked,e=t.length;let i,s=0;for(;s<e;++s)i=t[s],i.isDirty()&&this.queue.add(i)}}createProperty(t,e){if(vo.throw)throw new Error(`AUR0222:${e}`);return new bo(this,t,e)}addProperty(t){this.tracked.push(t),1===this.tracked.length&&(this.T=this.p.taskQueue.queueTask(this.check,mo))}removeProperty(t){this.tracked.splice(this.tracked.indexOf(t),1),0===this.tracked.length&&(this.T.cancel(),this.T=null)}}wo.inject=[Ce],Cs(wo);class bo{constructor(t,e,i){this.obj=e,this.key=i,this.type=0,this.ov=void 0,this.I=t}getValue(){return this.obj[this.key]}setValue(t,e){throw new Error(`Trying to set value for property ${this.key} in dirty checker`)}isDirty(){return this.ov!==this.obj[this.key]}flush(){const t=this.ov,e=this.getValue();this.ov=e,this.subs.notify(e,t,0)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.ov=this.obj[this.key],this.I.addProperty(this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.I.removeProperty(this)}}ws(bo);class yo{constructor(t,e){this.type=0,this.o=t,this.k=e}get doNotCache(){return!0}getValue(){return this.o[this.k]}setValue(){}subscribe(){}unsubscribe(){}}class $o{constructor(){this.type=0}getValue(t,e){return t[e]}setValue(t,e,i,s){i[s]=t}}let ko;class xo{constructor(t,e){this.type=1,this.v=void 0,this.ov=void 0,this.iO=!1,this.f=0,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){if(this.iO){if(Object.is(t,this.v))return;this.ov=this.v,this.v=t,this.f=e,this.queue.add(this)}else this.o[this.k]=t}subscribe(t){!1===this.iO&&this.start(),this.subs.add(t)}flush(){ko=this.ov,this.ov=this.v,this.subs.notify(this.v,ko,this.f)}start(){return!1===this.iO&&(this.iO=!0,this.v=this.o[this.k],ei(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:t=>{this.setValue(t,0)}})),this}stop(){return this.iO&&(ei(this.o,this.k,{enumerable:!0,configurable:!0,writable:!0,value:this.v}),this.iO=!1),this}}class Co{constructor(t,e,i,s){this.type=1,this.v=void 0,this.ov=void 0,this.f=0,this.o=t,this.S=i,this.hs=ii(i);const n=t[e];this.cb=ii(n)?n:void 0,this.v=s}getValue(){return this.v}setValue(t,e){var i;this.hs&&(t=this.S(t,null)),Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.f=e,null===(i=this.cb)||void 0===i||i.call(this.o,this.v,this.ov,e),this.queue.add(this))}flush(){ko=this.ov,this.ov=this.v,this.subs.notify(this.v,ko,this.f)}}ws(xo),ws(Co),Cs(xo),Cs(Co);const So=new $o,Ao=Dt.createInterface("IObserverLocator",(t=>t.singleton(Eo))),To=Dt.createInterface("INodeObserverLocator",(t=>t.cachedCallback((t=>(t.getAll(je).forEach((t=>{t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).")})),new Ro)))));class Ro{handles(){return!1}getObserver(){return So}getAccessor(){return So}}class Eo{constructor(t,e){this.I=t,this.M=e,this.F=[]}addAdapter(t){this.F.push(t)}getObserver(t,e){var i,s;return null!==(s=null===(i=t.$observers)||void 0===i?void 0:i[e])&&void 0!==s?s:this.V(t,e,this.createObserver(t,e))}getAccessor(t,e){var i;const s=null===(i=t.$observers)||void 0===i?void 0:i[e];return void 0!==s?s:this.M.handles(t,e,this)?this.M.getAccessor(t,e,this):So}getArrayObserver(t){return Xs(t)}getMapObserver(t){return kn(t)}getSetObserver(t){return un(t)}createObserver(t,e){var i,s,n,r;if(!(t instanceof Object))return new yo(t,e);if(this.M.handles(t,e,this))return this.M.getObserver(t,e,this);switch(e){case"length":if(t instanceof Array)return Xs(t).getLengthObserver();break;case"size":if(t instanceof Map)return kn(t).getLengthObserver();if(t instanceof Set)return un(t).getLengthObserver();break;default:if(t instanceof Array&&et(e))return Xs(t).getIndexObserver(Number(e))}let o=Po(t,e);if(void 0===o){let i=Oo(t);for(;null!==i&&(o=Po(i,e),void 0===o);)i=Oo(i)}if(void 0!==o&&!ti.call(o,"value")){let a=this.N(t,e,o);return null==a&&(a=null===(r=null!==(s=null===(i=o.get)||void 0===i?void 0:i.getObserver)&&void 0!==s?s:null===(n=o.set)||void 0===n?void 0:n.getObserver)||void 0===r?void 0:r(t,this)),null==a?o.configurable?po.create(t,e,o,this,!0):this.I.createProperty(t,e):a}return new xo(t,e)}N(t,e,i){if(this.F.length>0)for(const s of this.F){const n=s.getObserver(t,e,i,this);if(null!=n)return n}return null}V(t,e,i){return!0===i.doNotCache?i:void 0===t.$observers?(ei(t,"$observers",{value:{[e]:i}}),i):t.$observers[e]=i}}Eo.inject=[go,To];const Oo=Object.getPrototypeOf,Po=Object.getOwnPropertyDescriptor;Dt.createInterface("IObservation",(t=>t.singleton(jo)));class jo{constructor(t){this.oL=t}static get inject(){return[Ao]}run(t){const e=new Io(this.oL,t);return e.run(),e}}class Io{constructor(t,e){this.oL=t,this.fn=e,this.interceptor=this,this.maxRunCount=10,this.queued=!1,this.running=!1,this.runCount=0,this.stopped=!1}handleChange(){this.queued=!0,this.run()}handleCollectionChange(){this.queued=!0,this.run()}run(){if(this.stopped)throw new Error("AUR0225");if(!this.running){++this.runCount,this.running=!0,this.queued=!1,++this.obs.version;try{mr(this),this.fn(this)}finally{this.obs.clear(),this.running=!1,wr(this)}if(this.queued){if(this.runCount>this.maxRunCount)throw this.runCount=0,new Error("AUR0226");this.run()}else this.runCount=0}}stop(){this.stopped=!0,this.obs.clearAll()}}function Uo(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function Lo(t,e){return function(i,s){e(i,s,t)}}In(Io);const Mo=U.getOwn,No=U.hasOwn,Bo=U.define,{annotation:Vo,resource:Do}=Pt,qo=Vo.keyFor,Fo=Do.keyFor,Ho=Do.appendTo,Wo=Vo.appendTo,zo=Vo.getKeys,Ko=()=>Object.create(null),Qo=Object.prototype.hasOwnProperty,Go=Ko(),Jo=(t,e,i)=>{if(!0===Go[e])return!0;if(!Zo(e))return!1;const s=e.slice(0,5);return Go[e]="aria-"===s||"data-"===s||i.isStandardSvgAttribute(t,e)},_o=t=>t instanceof Promise,Yo=t=>"function"==typeof t,Zo=t=>"string"==typeof t;function Xo(t,e){let i;function s(t,e){arguments.length>1&&(i.property=e),Bo(ea,sa.create(e,t,i),t.constructor,e),Wo(t.constructor,ia.keyFrom(e))}return arguments.length>1?(i={},void s(t,e)):Zo(t)?(i={},s):(i=void 0===t?{}:t,s)}function ta(t){return t.startsWith(ea)}const ea=qo("bindable"),ia=Object.freeze({name:ea,keyFrom:t=>`${ea}:${t}`,from(t,...e){const i={},s=Array.isArray;function n(e){i[e]=sa.create(e,t)}function r(e,s){i[e]=s instanceof sa?s:sa.create(e,t,s)}return e.forEach((function(t){s(t)?t.forEach(n):t instanceof sa?i[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>r(e,t[e])))})),i},for(t){let e;const i={add(s){let n,r;return Zo(s)?(n=s,r={property:n}):(n=s.property,r=s),e=sa.create(n,t,r),No(ea,t,n)||Wo(t,ia.keyFrom(n)),Bo(ea,e,t,n),i},mode:t=>(e.mode=t,i),callback:t=>(e.callback=t,i),attribute:t=>(e.attribute=t,i),primary:()=>(e.primary=!0,i),set:t=>(e.set=t,i)};return i},getAll(t){const e=ea.length+1,i=[],s=gt(t);let n,r,o,a,c=s.length,l=0;for(;--c>=0;)for(o=s[c],n=zo(o).filter(ta),r=n.length,a=0;a<r;++a)i[l++]=Mo(ea,o,n[a].slice(e));return i}});class sa{constructor(t,e,i,s,n,r){this.attribute=t,this.callback=e,this.mode=i,this.primary=s,this.property=n,this.set=r}static create(t,e,i={}){return new sa(ft(i.attribute,at(t)),ft(i.callback,`${t}Changed`),ft(i.mode,us.toView),ft(i.primary,!1),ft(i.property,t),ft(i.set,function(t,e,i={}){var s,n,r;const o=null!==(n=null!==(s=i.type)&&void 0!==s?s:Reflect.getMetadata("design:type",e,t))&&void 0!==n?n:null;if(null==o)return xe;let a;switch(o){case Number:case Boolean:case String:case BigInt:a=o;break;default:{const t=o.coerce;a="function"==typeof t?t.bind(o):null!==(r=na.for(o))&&void 0!==r?r:xe;break}}return a===xe?a:function(t,e){return function(i,s){var n;return(null==s?void 0:s.enableCoercion)?(null!=e?e:null===(n=null==s?void 0:s.coerceNullish)||void 0===n||!n)&&null==i?i:t(i,s):i}}(a,i.nullable)}(t,e,i)))}}const na={key:qo("coercer"),define(t,e){Bo(na.key,t[e].bind(t),t)},for:t=>Mo(na.key,t)};class ra{constructor(t,e,i,s,n,r){this.set=s,this.$controller=n,this.t=r,this.v=void 0,this.ov=void 0,this.f=0;const o=t[i],a=t.propertyChanged,c=this.i=Yo(o),l=this.u=Yo(a),h=this.hs=s!==xe;let u;this.o=t,this.k=e,this.cb=c?o:xe,this.C=l?a:xe,void 0!==this.cb||l||h?(this.iO=!0,u=t[e],this.v=h&&void 0!==u?s(u,this.t):u,this.A()):this.iO=!1}get type(){return 1}getValue(){return this.v}setValue(t,e){this.hs&&(t=this.set(t,this.t));const i=this.v;if(this.iO){if(Object.is(t,i))return;this.v=t,this.ov=i,this.f=e,(null==this.$controller||this.$controller.isBound)&&(this.i&&this.cb.call(this.o,t,i,e),this.u&&this.C.call(this.o,this.k,t,i,e)),this.queue.add(this)}else this.o[this.k]=t}subscribe(t){0==!this.iO&&(this.iO=!0,this.v=this.hs?this.set(this.o[this.k],this.t):this.o[this.k],this.A()),this.subs.add(t)}flush(){oa=this.ov,this.ov=this.v,this.subs.notify(this.v,oa,this.f)}A(){Reflect.defineProperty(this.o,this.k,{enumerable:!0,configurable:!0,get:()=>this.v,set:t=>{this.setValue(t,0)}})}}let oa;ws(ra),Cs(ra);class aa{constructor(t,e,i,s){if(this.chars=t,this.repeat=e,this.isSymbol=i,this.isInverted=s,s)switch(t.length){case 0:this.has=this.R;break;case 1:this.has=this.B;break;default:this.has=this.I}else switch(t.length){case 0:this.has=this.T;break;case 1:this.has=this.P;break;default:this.has=this.O}}equals(t){return this.chars===t.chars&&this.repeat===t.repeat&&this.isSymbol===t.isSymbol&&this.isInverted===t.isInverted}O(t){return this.chars.includes(t)}P(t){return this.chars===t}T(t){return!1}I(t){return!this.chars.includes(t)}B(t){return this.chars!==t}R(t){return!0}}class ca{constructor(){this.parts=$e,this.$="",this.L={},this.q={}}get pattern(){const t=this.$;return""===t?null:t}set pattern(t){null==t?(this.$="",this.parts=$e):(this.$=t,this.parts=this.q[t])}append(t,e){const i=this.L;void 0===i[t]?i[t]=e:i[t]+=e}next(t){const e=this.L;let i;void 0!==e[t]&&(i=this.q,void 0===i[t]?i[t]=[e[t]]:i[t].push(e[t]),e[t]=void 0)}}class la{constructor(t,...e){this.charSpec=t,this.nextStates=[],this.types=null,this.isEndpoint=!1,this.patterns=e}get pattern(){return this.isEndpoint?this.patterns[0]:null}findChild(t){const e=this.nextStates,i=e.length;let s=null,n=0;for(;n<i;++n)if(s=e[n],t.equals(s.charSpec))return s;return null}append(t,e){const i=this.patterns;i.includes(e)||i.push(e);let s=this.findChild(t);return null==s&&(s=new la(t,e),this.nextStates.push(s),t.repeat&&s.nextStates.push(s)),s}findMatches(t,e){const i=[],s=this.nextStates,n=s.length;let r=0,o=null,a=0,c=0;for(;a<n;++a)if(o=s[a],o.charSpec.has(t))if(i.push(o),r=o.patterns.length,c=0,o.charSpec.isSymbol)for(;c<r;++c)e.next(o.patterns[c]);else for(;c<r;++c)e.append(o.patterns[c],t);return i}}class ha{constructor(t){this.text=t;const e=this.len=t.length,i=this.specs=[];let s=0;for(;e>s;++s)i.push(new aa(t[s],!1,!1,!1))}eachChar(t){const e=this.len,i=this.specs;let s=0;for(;e>s;++s)t(i[s])}}class ua{constructor(t){this.text="PART",this.spec=new aa(t,!0,!1,!0)}eachChar(t){t(this.spec)}}class da{constructor(t){this.text=t,this.spec=new aa(t,!1,!0,!1)}eachChar(t){t(this.spec)}}class pa{constructor(){this.statics=0,this.dynamics=0,this.symbols=0}}const fa=Dt.createInterface("ISyntaxInterpreter",(t=>t.singleton(ga)));class ga{constructor(){this.rootState=new la(null),this.initialStates=[this.rootState]}add(t){t=t.slice(0).sort(((t,e)=>t.pattern>e.pattern?1:-1));const e=t.length;let i,s,n,r,o,a,c,l,h=0;for(;e>h;){for(i=this.rootState,s=t[h],n=s.pattern,r=new pa,o=this.parse(s,r),a=o.length,c=t=>{i=i.append(t,n)},l=0;a>l;++l)o[l].eachChar(c);i.types=r,i.isEndpoint=!0,++h}}interpret(t){const e=new ca,i=t.length;let s,n=this.initialStates,r=0;for(;r<i&&(n=this.getNextStates(n,t.charAt(r),e),0!==n.length);++r);return n=n.filter(va),n.length>0&&(n.sort(ma),s=n[0],s.charSpec.isSymbol||e.next(s.pattern),e.pattern=s.pattern),e}getNextStates(t,e,i){const s=[];let n=null;const r=t.length;let o=0;for(;o<r;++o)n=t[o],s.push(...n.findMatches(e,i));return s}parse(t,e){const i=[],s=t.pattern,n=s.length,r=t.symbols;let o=0,a=0,c="";for(;o<n;)c=s.charAt(o),0!==r.length&&r.includes(c)?o!==a?(i.push(new ha(s.slice(a,o))),++e.statics,a=o):(i.push(new da(s.slice(a,o+1))),++e.symbols,a=++o):o===a&&"P"===c&&"PART"===s.slice(o,o+4)?(a=o+=4,i.push(new ua(r)),++e.dynamics):++o;return a!==o&&(i.push(new ha(s.slice(a,o))),++e.statics),i}}function va(t){return t.isEndpoint}function ma(t,e){const i=t.types,s=e.types;return i.statics!==s.statics?s.statics-i.statics:i.dynamics!==s.dynamics?s.dynamics-i.dynamics:i.symbols!==s.symbols?s.symbols-i.symbols:0}class wa{constructor(t,e,i,s){this.rawName=t,this.rawValue=e,this.target=i,this.command=s}}const ba=Dt.createInterface("IAttributePattern"),ya=Dt.createInterface("IAttributeParser",(t=>t.singleton($a)));class $a{constructor(t,e){this.M={},this.U=t;const i=this.F={},s=e.reduce(((t,e)=>{const s=Aa(e.constructor);return s.forEach((t=>i[t.pattern]=e)),t.concat(s)}),$e);t.add(s)}parse(t,e){let i=this.M[t];null==i&&(i=this.M[t]=this.U.interpret(t));const s=i.pattern;return null==s?new wa(t,e,t,null):this.F[s][s](t,e,i.parts)}}function ka(...t){return function(e){return Ta.define(t,e)}}$a.inject=[fa,Yt(ba)];class xa{constructor(t){this.Type=t,this.name=void 0}register(t){ve.singleton(ba,this.Type).register(t)}}const Ca=Fo("attribute-pattern"),Sa="attribute-pattern-definitions",Aa=t=>Pt.annotation.get(t,Sa),Ta=Object.freeze({name:Ca,definitionAnnotationKey:Sa,define(t,e){const i=new xa(e);return Bo(Ca,i,e),Ho(e,Ca),Pt.annotation.set(e,Sa,t),Wo(e,Sa),e},getPatternDefinitions:Aa});let Ra=class{"PART.PART"(t,e,i){return new wa(t,e,i[0],i[1])}"PART.PART.PART"(t,e,i){return new wa(t,e,i[0],i[2])}};Ra=Uo([ka({pattern:"PART.PART",symbols:"."},{pattern:"PART.PART.PART",symbols:"."})],Ra);let Ea=class{ref(t,e,i){return new wa(t,e,"element","ref")}"PART.ref"(t,e,i){return new wa(t,e,i[0],"ref")}};Ea=Uo([ka({pattern:"ref",symbols:""},{pattern:"PART.ref",symbols:"."})],Ea);let Oa=class{":PART"(t,e,i){return new wa(t,e,i[0],"bind")}};Oa=Uo([ka({pattern:":PART",symbols:":"})],Oa);let Pa=class{"@PART"(t,e,i){return new wa(t,e,i[0],"trigger")}};Pa=Uo([ka({pattern:"@PART",symbols:"@"})],Pa);let ja=class{"...$attrs"(t,e,i){return new wa(t,e,"","...$attrs")}};ja=Uo([ka({pattern:"...$attrs",symbols:""})],ja);const Ia=Ce,Ua=Dt.createInterface("ISVGAnalyzer",(t=>t.singleton(La)));class La{isStandardSvgAttribute(t,e){return!1}}const Ma=Dt.createInterface("IAttrMapper",(t=>t.singleton(Na)));class Na{constructor(t){this.svg=t,this.fns=[],this.N=Ko(),this.W=Ko(),this.useMapping({LABEL:{for:"htmlFor"},IMG:{usemap:"useMap"},INPUT:{maxlength:"maxLength",minlength:"minLength",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",inputmode:"inputMode"},TEXTAREA:{maxlength:"maxLength"},TD:{rowspan:"rowSpan",colspan:"colSpan"},TH:{rowspan:"rowSpan",colspan:"colSpan"}}),this.useGlobalMapping({accesskey:"accessKey",contenteditable:"contentEditable",tabindex:"tabIndex",textcontent:"textContent",innerhtml:"innerHTML",scrolltop:"scrollTop",scrollleft:"scrollLeft",readonly:"readOnly"})}static get inject(){return[Ua]}useMapping(t){var e,i;let s,n,r,o;for(r in t)for(o in s=t[r],n=null!==(e=(i=this.N)[r])&&void 0!==e?e:i[r]=Ko(),s){if(void 0!==n[o])throw Ba(o,r);n[o]=s[o]}}useGlobalMapping(t){const e=this.W;for(const i in t){if(void 0!==e[i])throw Ba(i,"*");e[i]=t[i]}}useTwoWay(t){this.fns.push(t)}isTwoWay(t,e){return function(t,e){switch(t.nodeName){case"INPUT":switch(t.type){case"checkbox":case"radio":return"checked"===e;default:return"value"===e||"files"===e||"value-as-number"===e||"value-as-date"===e}case"TEXTAREA":case"SELECT":return"value"===e;default:switch(e){case"textcontent":case"innerhtml":return t.hasAttribute("contenteditable");case"scrolltop":case"scrollleft":return!0;default:return!1}}}(t,e)||this.fns.length>0&&this.fns.some((i=>i(t,e)))}map(t,e){var i,s,n;return null!==(n=null!==(s=null===(i=this.N[t.nodeName])||void 0===i?void 0:i[e])&&void 0!==s?s:this.W[e])&&void 0!==n?n:Jo(t,e,this.svg)?e:null}}function Ba(t,e){return new Error(`Attribute ${t} has been already registered for ${"*"===e?"all elements":`<${e}/>`}`)}class Va{constructor(t,e,i,s,n){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=n,this.interceptor=this,this.isBound=!1,this.targetObserver=s.getAccessor(e,i)}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),i}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.targetObserver.setValue((t=>this.interceptor.callSource(t)),t,this.target,this.targetProperty),this.isBound=!0}$unbind(t){this.isBound&&(this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.targetObserver.setValue(null,t,this.target,this.targetProperty),this.isBound=!1)}observe(t,e){}handleChange(t,e,i){}}class Da{constructor(t,e,i){this.type=7,this.v=null,this.ov=null,this.H=!1,this.f=0,this.o=t,this.G=e,this.X=i}getValue(){return this.v}setValue(t,e){this.v=t,this.H=t!==this.ov,0==(256&e)&&this.K()}K(){if(this.H)switch(this.H=!1,this.ov=this.v,this.X){case"class":this.o.classList.toggle(this.G,!!this.v);break;case"style":{let t="",e=this.v;Zo(e)&&e.includes("!important")&&(t="important",e=e.replace("!important","")),this.o.style.setProperty(this.G,e,t);break}default:null==this.v?this.o.removeAttribute(this.X):this.o.setAttribute(this.X,String(this.v))}}handleMutation(t){let e=!1;for(let i=0,s=t.length;s>i;++i){const s=t[i];if("attributes"===s.type&&s.attributeName===this.G){e=!0;break}}if(e){let t;switch(this.X){case"class":t=this.o.classList.contains(this.G);break;case"style":t=this.o.style.getPropertyValue(this.G);break;default:throw new Error(`AUR0651:${this.X}`)}t!==this.v&&(this.ov=this.v,this.v=t,this.H=!1,this.f=0,this.queue.add(this))}}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.v=this.ov=this.o.getAttribute(this.G),qa(this.o.ownerDocument.defaultView.MutationObserver,this.o,this))}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&Fa(this.o,this)}flush(){za=this.ov,this.ov=this.v,this.subs.notify(this.v,za,this.f)}}ws(Da),Cs(Da);const qa=(t,e,i)=>{void 0===e.$eMObs&&(e.$eMObs=new Set),void 0===e.$mObs&&(e.$mObs=new t(Ha)).observe(e,{attributes:!0}),e.$eMObs.add(i)},Fa=(t,e)=>{const i=t.$eMObs;return!(!i||!i.delete(e)||(0===i.size&&(t.$mObs.disconnect(),t.$mObs=void 0),0))},Ha=t=>{t[0].target.$eMObs.forEach(Wa,t)};function Wa(t){t.handleMutation(this)}let za;class Ka{constructor(t){this.b=t}handleChange(t,e,i){const s=this.b;t!==s.sourceExpression.evaluate(i,s.$scope,s.locator,null)&&s.updateSource(t,i)}}const{oneTime:Qa,toView:Ga,fromView:Ja}=us,_a=Ga|Qa,Ya={reusable:!1,preempt:!0};class Za{constructor(t,e,i,s,n,r,o){this.sourceExpression=t,this.targetAttribute=i,this.targetProperty=s,this.mode=n,this.locator=o,this.interceptor=this,this.isBound=!1,this.$scope=null,this.task=null,this.targetSubscriber=null,this.persistentFlags=0,this.value=void 0,this.target=e,this.p=o.get(Ia),this.oL=r}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;i|=this.persistentFlags;const s=this.mode,n=this.interceptor,r=this.sourceExpression,o=this.$scope,a=this.locator,c=this.targetObserver,l=0==(2&i)&&(4&c.type)>0;let h,u=!1;(10082!==r.$kind||this.obs.count>1)&&(u=0==(s&Qa),u&&this.obs.version++,t=r.evaluate(i,o,a,n),u&&this.obs.clear()),t!==this.value&&(this.value=t,l?(h=this.task,this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,n.updateTarget(t,i)}),Ya),null==h||h.cancel()):n.updateTarget(t,i))}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.persistentFlags=961&t,this.$scope=e;let s=this.sourceExpression;s.hasBind&&s.bind(t,e,this.interceptor);let n=this.targetObserver;n||(n=this.targetObserver=new Da(this.target,this.targetProperty,this.targetAttribute)),s=this.sourceExpression;const r=this.mode,o=this.interceptor;let a=!1;r&_a&&(a=(r&Ga)>0,o.updateTarget(this.value=s.evaluate(t,e,this.locator,a?o:null),t)),r&Ja&&n.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new Ka(o)),this.isBound=!0}$unbind(t){var e;this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.value=void 0,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.obs.clearAll(),this.isBound=!1)}}In(Za);const{toView:Xa}=us,tc={reusable:!1,preempt:!0};class ec{constructor(t,e,i,s,n,r,o){this.interpolation=e,this.target=i,this.targetProperty=s,this.mode=n,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.oL=t,this.targetObserver=t.getAccessor(i,s);const a=e.expressions,c=this.partBindings=Array(a.length),l=a.length;let h=0;for(;l>h;++h)c[h]=new ic(a[h],i,s,r,t,this)}updateTarget(t,e){const i=this.partBindings,s=this.interpolation.parts,n=i.length;let r="",o=0;if(1===n)r=s[0]+i[0].value+s[1];else for(r=s[0];n>o;++o)r+=i[o].value+s[o+1];const a=this.targetObserver;let c;0==(2&e)&&(4&a.type)>0?(c=this.task,this.task=this.taskQueue.queueTask((()=>{this.task=null,a.setValue(r,e,this.target,this.targetProperty)}),tc),null==c||c.cancel(),c=null):a.setValue(r,e,this.target,this.targetProperty)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e;const i=this.partBindings,s=i.length;let n=0;for(;s>n;++n)i[n].$bind(t,e);this.updateTarget(void 0,t)}$unbind(t){var e;if(!this.isBound)return;this.isBound=!1,this.$scope=void 0;const i=this.partBindings,s=i.length;let n=0;for(;s>n;++n)i[n].interceptor.$unbind(t);null===(e=this.task)||void 0===e||e.cancel(),this.task=null}}class ic{constructor(t,e,i,s,n,r){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.locator=s,this.owner=r,this.interceptor=this,this.mode=us.toView,this.value="",this.task=null,this.isBound=!1,this.oL=n}handleChange(t,e,i){if(!this.isBound)return;const s=this.sourceExpression,n=this.obs;let r=!1;10082===s.$kind&&1===n.count||(r=(this.mode&Xa)>0,r&&n.version++,t=s.evaluate(i,this.$scope,this.locator,r?this.interceptor:null),r&&n.clear()),t!=this.value&&(this.value=t,t instanceof Array&&this.observeCollection(t),this.owner.updateTarget(t,i))}handleCollectionChange(t,e){this.owner.updateTarget(void 0,e)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Xa)>0?this.interceptor:null),this.value instanceof Array&&this.observeCollection(this.value)}$unbind(t){this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll())}}In(ic);class sc{constructor(t,e,i,s,n,r){this.sourceExpression=t,this.target=e,this.locator=i,this.p=n,this.strict=r,this.interceptor=this,this.mode=us.toView,this.value="",this.task=null,this.isBound=!1,this.oL=s}updateTarget(t,e){var i,s;const n=this.target,r=this.p.Node,o=this.value;this.value=t,o instanceof r&&(null===(i=o.parentNode)||void 0===i||i.removeChild(o)),t instanceof r?(n.textContent="",null===(s=n.parentNode)||void 0===s||s.insertBefore(t,n)):n.textContent=String(t)}handleChange(t,e,i){var s;if(!this.isBound)return;const n=this.sourceExpression,r=this.obs;let o=!1;if(10082===n.$kind&&1===r.count||(o=(this.mode&Xa)>0,o&&r.version++,i|=this.strict?1:0,t=n.evaluate(i,this.$scope,this.locator,o?this.interceptor:null),o&&r.clear()),t===this.value)return null===(s=this.task)||void 0===s||s.cancel(),void(this.task=null);0==(2&i)?this.queueUpdate(t,i):this.updateTarget(t,i)}handleCollectionChange(){this.queueUpdate(this.value,0)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(t)}this.isBound=!0,this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this.interceptor),t|=this.strict?1:0;const i=this.value=this.sourceExpression.evaluate(t,e,this.locator,(this.mode&Xa)>0?this.interceptor:null);i instanceof Array&&this.observeCollection(i),this.updateTarget(i,t)}$unbind(t){var e;this.isBound&&(this.isBound=!1,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),null===(e=this.task)||void 0===e||e.cancel(),this.task=null)}queueUpdate(t,e){const i=this.task;this.task=this.p.domWriteQueue.queueTask((()=>{this.task=null,this.updateTarget(t,e)}),tc),null==i||i.cancel()}}In(sc);class nc{constructor(t,e,i,s,n=!1){this.sourceExpression=t,this.targetProperty=e,this.locator=s,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.task=null,this.target=null,this.oL=i,this.Y=n}handleChange(t,e,i){if(!this.isBound)return;const s=this.target,n=this.targetProperty,r=s[n];this.obs.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),this.obs.clear(),t!==r&&(s[n]=t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.target=this.Y?e.bindingContext:e.overrideContext;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.target[this.targetProperty]=this.sourceExpression.evaluate(2|t,e,this.locator,this.interceptor),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.obs.clearAll(),this.isBound=!1}}In(nc);const{oneTime:rc,toView:oc,fromView:ac}=us,cc=oc|rc,lc={reusable:!1,preempt:!0};class hc{constructor(t,e,i,s,n,r,o){this.sourceExpression=t,this.target=e,this.targetProperty=i,this.mode=s,this.locator=r,this.taskQueue=o,this.interceptor=this,this.isBound=!1,this.$scope=void 0,this.targetObserver=void 0,this.persistentFlags=0,this.task=null,this.targetSubscriber=null,this.oL=n}updateTarget(t,e){e|=this.persistentFlags,this.targetObserver.setValue(t,e,this.target,this.targetProperty)}updateSource(t,e){e|=this.persistentFlags,this.sourceExpression.assign(e,this.$scope,this.locator,t)}handleChange(t,e,i){if(!this.isBound)return;const s=0==(2&(i|=this.persistentFlags))&&(4&this.targetObserver.type)>0,n=this.obs;let r=!1;(10082!==this.sourceExpression.$kind||n.count>1)&&(r=this.mode>rc,r&&n.version++,t=this.sourceExpression.evaluate(i,this.$scope,this.locator,this.interceptor),r&&n.clear()),s?(uc=this.task,this.task=this.taskQueue.queueTask((()=>{this.interceptor.updateTarget(t,i),this.task=null}),lc),null==uc||uc.cancel(),uc=null):this.interceptor.updateTarget(t,i)}$bind(t,e){var i;if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}t|=1,this.persistentFlags=961&t,this.$scope=e;let s=this.sourceExpression;s.hasBind&&s.bind(t,e,this.interceptor);const n=this.oL,r=this.mode;let o=this.targetObserver;o||(o=r&ac?n.getObserver(this.target,this.targetProperty):n.getAccessor(this.target,this.targetProperty),this.targetObserver=o),s=this.sourceExpression;const a=this.interceptor,c=(r&oc)>0;r&cc&&a.updateTarget(s.evaluate(t,e,this.locator,c?a:null),t),r&ac&&(o.subscribe(null!==(i=this.targetSubscriber)&&void 0!==i?i:this.targetSubscriber=new Ka(a)),c||a.updateSource(o.getValue(this.target,this.targetProperty),t)),this.isBound=!0}$unbind(t){this.isBound&&(this.persistentFlags=0,this.sourceExpression.hasUnbind&&this.sourceExpression.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,uc=this.task,this.targetSubscriber&&this.targetObserver.unsubscribe(this.targetSubscriber),null!=uc&&(uc.cancel(),uc=this.task=null),this.obs.clearAll(),this.isBound=!1)}}In(hc);let uc=null;class dc{constructor(t,e,i){this.sourceExpression=t,this.target=e,this.locator=i,this.interceptor=this,this.isBound=!1,this.$scope=void 0}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e,this.sourceExpression.hasBind&&this.sourceExpression.bind(t,e,this),this.sourceExpression.assign(t,this.$scope,this.locator,this.target),this.isBound=!0}$unbind(t){if(!this.isBound)return;let e=this.sourceExpression;e.evaluate(t,this.$scope,this.locator,null)===this.target&&e.assign(t,this.$scope,this.locator,null),e=this.sourceExpression,e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=void 0,this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const pc=Dt.createInterface("IAppTask");class fc{constructor(t,e,i){this.c=void 0,this.slot=t,this.k=e,this.cb=i}register(t){return this.c=t.register(ve.instance(pc,this))}run(){const t=this.k,e=this.cb;return null===t?e():e(this.c.get(t))}}const gc=Object.freeze({beforeCreate:vc("beforeCreate"),hydrating:vc("hydrating"),hydrated:vc("hydrated"),beforeActivate:vc("beforeActivate"),afterActivate:vc("afterActivate"),beforeDeactivate:vc("beforeDeactivate"),afterDeactivate:vc("afterDeactivate")});function vc(t){return function(e,i){return Yo(i)?new fc(t,e,i):new fc(t,null,e)}}function mc(t){return t.startsWith(wc)}const wc=qo("children-observer"),bc=Object.freeze({name:wc,keyFrom:t=>`${wc}:${t}`,from(...t){const e={},i=Array.isArray;function s(t){e[t]=$c.create(t)}function n(t,i){e[t]=$c.create(t,i)}return t.forEach((function(t){i(t)?t.forEach(s):t instanceof $c?e[t.property]=t:void 0!==t&&Object.keys(t).forEach((e=>n(e,t)))})),e},getAll(t){const e=wc.length+1,i=[],s=gt(t);let n,r,o,a=s.length,c=0;for(;--a>=0;){o=s[a],n=zo(o).filter(mc),r=n.length;for(let t=0;t<r;++t)i[c++]=Mo(wc,o,n[t].slice(e))}return i}}),yc={childList:!0};class $c{constructor(t,e,i,s,n,r){this.callback=t,this.property=e,this.options=i,this.query=s,this.filter=n,this.map=r}static create(t,e={}){var i;return new $c(ft(e.callback,`${t}Changed`),ft(e.property,t),null!==(i=e.options)&&void 0!==i?i:yc,e.query,e.filter,e.map)}}class kc{constructor(t,e,i,s,n=xc,r=Cc,o=Sc,a){this.controller=t,this.obj=e,this.propertyKey=i,this.query=n,this.filter=r,this.map=o,this.options=a,this.observing=!1,this.children=void 0,this.observer=void 0,this.callback=e[s],Reflect.defineProperty(this.obj,this.propertyKey,{enumerable:!0,configurable:!0,get:()=>this.getValue(),set:()=>{}})}getValue(){return this.observing?this.children:this.get()}setValue(t){}start(){var t;this.observing||(this.observing=!0,this.children=this.get(),(null!==(t=this.observer)&&void 0!==t?t:this.observer=new this.controller.host.ownerDocument.defaultView.MutationObserver((()=>{this.Z()}))).observe(this.controller.host,this.options))}stop(){this.observing&&(this.observing=!1,this.observer.disconnect(),this.children=$e)}Z(){this.children=this.get(),void 0!==this.callback&&this.callback.call(this.obj),this.subs.notify(this.children,void 0,0)}get(){return function(t,e,i,s){var n;const r=e(t),o=r.length,a=[];let c,l,h,u=0;for(;u<o;++u)c=r[u],l=Jc.for(c,Ac),h=null!==(n=null==l?void 0:l.viewModel)&&void 0!==n?n:null,i(c,l,h)&&a.push(s(c,l,h));return a}(this.controller,this.query,this.filter,this.map)}}function xc(t){return t.host.childNodes}function Cc(t,e,i){return!!i}function Sc(t,e,i){return i}ws()(kc);const Ac={optional:!0};function Tc(t){return function(e){return Ic.define(t,e)}}function Rc(t){return function(e){return Ic.define(Zo(t)?{isTemplateController:!0,name:t}:{isTemplateController:!0,...t},e)}}class Ec{constructor(t,e,i,s,n,r,o,a,c){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.defaultBindingMode=n,this.isTemplateController=r,this.bindables=o,this.noMultiBindings=a,this.watches=c}get type(){return 2}static create(t,e){let i,s;return Zo(t)?(i=t,s={name:i}):(i=t.name,s=t),new Ec(e,ft(jc(e,"name"),i),pt(jc(e,"aliases"),s.aliases,e.aliases),Ic.keyFrom(i),ft(jc(e,"defaultBindingMode"),s.defaultBindingMode,e.defaultBindingMode,us.toView),ft(jc(e,"isTemplateController"),s.isTemplateController,e.isTemplateController,!1),ia.from(e,...ia.getAll(e),jc(e,"bindables"),e.bindables,s.bindables),ft(jc(e,"noMultiBindings"),s.noMultiBindings,e.noMultiBindings,!1),pt(Mc.getAnnotation(e),e.watches))}register(t){const{Type:e,key:i,aliases:s}=this;ve.transient(i,e).register(t),ve.aliasTo(i,e).register(t),pi(s,Ic,i,t)}}const Oc=Fo("custom-attribute"),Pc=t=>`${Oc}:${t}`,jc=(t,e)=>Mo(qo(e),t),Ic=Object.freeze({name:Oc,keyFrom:Pc,isType:t=>Yo(t)&&No(Oc,t),for(t,e){var i;return null!==(i=ih(t,Pc(e)))&&void 0!==i?i:void 0},define(t,e){const i=Ec.create(t,e);return Bo(Oc,i,i.Type),Bo(Oc,i,i),Ho(e,Oc),i.Type},getDefinition(t){const e=Mo(Oc,t);if(void 0===e)throw new Error(`AUR0759:${t.name}`);return e},annotate(t,e,i){Bo(qo(e),i,t)},getAnnotation:jc}),Uc=$e,Lc=qo("watch"),Mc=Object.freeze({name:Lc,add(t,e){let i=Mo(Lc,t);null==i&&Bo(Lc,i=[],t),i.push(e)},getAnnotation(t){var e;return null!==(e=Mo(Lc,t))&&void 0!==e?e:Uc}});function Nc(t){return function(e){return Jc.define(t,e)}}const Bc=new WeakMap;class Vc{constructor(t,e,i,s,n,r,o,a,c,l,h,u,d,p,f,g,v,m,w,b,y){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.cache=n,this.capture=r,this.template=o,this.instructions=a,this.dependencies=c,this.injectable=l,this.needsCompile=h,this.surrogates=u,this.bindables=d,this.childrenObservers=p,this.containerless=f,this.isStrictBinding=g,this.shadowOptions=v,this.hasSlots=m,this.enhance=w,this.watches=b,this.processContent=y}get type(){return 1}static create(t,e=null){if(null===e){const i=t;if(Zo(i))throw new Error(`AUR0761:${t}`);const s=Lt("name",i,Qc);return e=Yo(i.Type)?i.Type:Jc.generateType(ot(s)),new Vc(e,s,pt(i.aliases),Lt("key",i,(()=>Jc.keyFrom(s))),Lt("cache",i,qc),Lt("capture",i,Hc),Lt("template",i,Fc),pt(i.instructions),pt(i.dependencies),Lt("injectable",i,Fc),Lt("needsCompile",i,Wc),pt(i.surrogates),ia.from(e,i.bindables),bc.from(i.childrenObservers),Lt("containerless",i,Hc),Lt("isStrictBinding",i,Hc),Lt("shadowOptions",i,Fc),Lt("hasSlots",i,Hc),Lt("enhance",i,Hc),Lt("watches",i,zc),Ut("processContent",e,Fc))}if(Zo(t))return new Vc(e,t,pt(Gc(e,"aliases"),e.aliases),Jc.keyFrom(t),Ut("cache",e,qc),Ut("capture",e,Hc),Ut("template",e,Fc),pt(Gc(e,"instructions"),e.instructions),pt(Gc(e,"dependencies"),e.dependencies),Ut("injectable",e,Fc),Ut("needsCompile",e,Wc),pt(Gc(e,"surrogates"),e.surrogates),ia.from(e,...ia.getAll(e),Gc(e,"bindables"),e.bindables),bc.from(...bc.getAll(e),Gc(e,"childrenObservers"),e.childrenObservers),Ut("containerless",e,Hc),Ut("isStrictBinding",e,Hc),Ut("shadowOptions",e,Fc),Ut("hasSlots",e,Hc),Ut("enhance",e,Hc),pt(Mc.getAnnotation(e),e.watches),Ut("processContent",e,Fc));const i=Lt("name",t,Qc);return new Vc(e,i,pt(Gc(e,"aliases"),t.aliases,e.aliases),Jc.keyFrom(i),It("cache",t,e,qc),It("capture",t,e,Hc),It("template",t,e,Fc),pt(Gc(e,"instructions"),t.instructions,e.instructions),pt(Gc(e,"dependencies"),t.dependencies,e.dependencies),It("injectable",t,e,Fc),It("needsCompile",t,e,Wc),pt(Gc(e,"surrogates"),t.surrogates,e.surrogates),ia.from(e,...ia.getAll(e),Gc(e,"bindables"),e.bindables,t.bindables),bc.from(...bc.getAll(e),Gc(e,"childrenObservers"),e.childrenObservers,t.childrenObservers),It("containerless",t,e,Hc),It("isStrictBinding",t,e,Hc),It("shadowOptions",t,e,Fc),It("hasSlots",t,e,Hc),It("enhance",t,e,Hc),pt(t.watches,Mc.getAnnotation(e),e.watches),It("processContent",t,e,Fc))}static getOrCreate(t){if(t instanceof Vc)return t;if(Bc.has(t))return Bc.get(t);const e=Vc.create(t);return Bc.set(t,e),Bo(Kc,e,e.Type),e}register(t){const{Type:e,key:i,aliases:s}=this;t.has(i,!1)||(ve.transient(i,e).register(t),ve.aliasTo(i,e).register(t),pi(s,Jc,i,t))}}const Dc={name:void 0,searchParents:!1,optional:!1},qc=()=>0,Fc=()=>null,Hc=()=>!1,Wc=()=>!0,zc=()=>$e,Kc=Fo("custom-element"),Qc=(()=>{let t=0;return()=>"unnamed-"+ ++t})(),Gc=(t,e)=>Mo(qo(e),t),Jc=Object.freeze({name:Kc,keyFrom:t=>`${Kc}:${t}`,isType:t=>Yo(t)&&No(Kc,t),for(t,e=Dc){if(void 0===e.name&&!0!==e.searchParents){const i=ih(t,Kc);if(null===i){if(!0===e.optional)return null;throw new Error("AUR0762")}return i}if(void 0!==e.name){if(!0!==e.searchParents){const i=ih(t,Kc);if(null===i)throw new Error("AUR0763");return i.is(e.name)?i:void 0}let i=t,s=!1;for(;null!==i;){const t=ih(i,Kc);if(null!==t&&(s=!0,t.is(e.name)))return t;i=lh(i)}if(s)return;throw new Error("AUR0764")}let i=t;for(;null!==i;){const t=ih(i,Kc);if(null!==t)return t;i=lh(i)}throw new Error("AUR0765")},define(t,e){const i=Vc.create(t,e);return Bo(Kc,i,i.Type),Bo(Kc,i,i),Ho(i.Type,Kc),i.Type},getDefinition(t){const e=Mo(Kc,t);if(void 0===e)throw new Error(`AUR0760:${t.name}`);return e},annotate:(t,e,i)=>{Bo(qo(e),i,t)},getAnnotation:Gc,generateName:Qc,createInjectable(){const t=function(e,i,s){return Dt.getOrCreateAnnotationParamTypes(e)[s]=t,e};return t.register=function(e){return{resolve:(e,i)=>i.has(t,!0)?i.get(t):null}},t},generateType:function(){const t={value:"",writable:!1,enumerable:!1,configurable:!0},e={};return function(i,s=e){const n=class{};return t.value=i,Reflect.defineProperty(n,"name",t),s!==e&&Object.assign(n.prototype,s),n}}()});qo("processContent");class _c{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.J={},this.tt=0,this.H=!1}get doNotCache(){return!0}getValue(){return this.value}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(256&e)&&this.K()}K(){if(this.H){this.H=!1;const t=this.value,e=this.J,i=Yc(t);let s=this.tt;if(this.ov=t,i.length>0&&this.et(i),this.tt+=1,0===s)return;s-=1;for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&e[t]===s&&this.obj.classList.remove(t)}}et(t){const e=this.obj,i=t.length;let s,n=0;for(;n<i;n++)s=t[n],0!==s.length&&(this.J[s]=this.tt,e.classList.add(s))}}function Yc(t){if(Zo(t))return Zc(t);if("object"!=typeof t)return $e;if(t instanceof Array){const e=t.length;if(e>0){const i=[];let s=0;for(;e>s;++s)i.push(...Yc(t[s]));return i}return $e}const e=[];let i;for(i in t)Boolean(t[i])&&(i.includes(" ")?e.push(...Zc(i)):e.push(i));return e}function Zc(t){const e=t.match(/\S+/g);return null===e?$e:e}Dt.createInterface("IShadowDOMStyleFactory",(t=>t.cachedCallback((t=>sl.supported(t.get(Ia))?t.get(Xc):t.get(tl)))));class Xc{constructor(t){this.p=t,this.cache=new Map}createStyles(t,e){return new sl(this.p,t,this.cache,e)}}Xc.inject=[Ia];class tl{constructor(t){this.p=t}createStyles(t,e){return new nl(this.p,t,e)}}tl.inject=[Ia];const el=Dt.createInterface("IShadowDOMStyles"),il=Dt.createInterface("IShadowDOMGlobalStyles",(t=>t.instance({applyTo:xe})));class sl{constructor(t,e,i,s=null){this.sharedStyles=s,this.styleSheets=e.map((e=>{let s;return e instanceof t.CSSStyleSheet?s=e:(s=i.get(e),void 0===s&&(s=new t.CSSStyleSheet,s.replaceSync(e),i.set(e,s))),s}))}static supported(t){return"adoptedStyleSheets"in t.ShadowRoot.prototype}applyTo(t){null!==this.sharedStyles&&this.sharedStyles.applyTo(t),t.adoptedStyleSheets=[...t.adoptedStyleSheets,...this.styleSheets]}}class nl{constructor(t,e,i=null){this.p=t,this.localStyles=e,this.sharedStyles=i}applyTo(t){const e=this.localStyles,i=this.p;for(let s=e.length-1;s>-1;--s){const n=i.document.createElement("style");n.innerHTML=e[s],t.prepend(n)}null!==this.sharedStyles&&this.sharedStyles.applyTo(t)}}const{enter:rl,exit:ol}=br,{wrap:al,unwrap:cl}=uo;class ll{constructor(t,e,i,s,n){this.obj=t,this.get=i,this.cb=s,this.useProxy=n,this.interceptor=this,this.value=void 0,this.isBound=!1,this.running=!1,this.oL=e}handleChange(){this.run()}handleCollectionChange(){this.run()}$bind(){this.isBound||(this.isBound=!0,this.compute())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll())}run(){if(!this.isBound||this.running)return;const t=this.obj,e=this.value,i=this.compute();Object.is(i,e)||this.cb.call(t,i,e,t)}compute(){this.running=!0,this.obs.version++;try{return rl(this),this.value=cl(this.get.call(void 0,this.useProxy?al(this.obj):this.obj,this))}finally{this.obs.clear(),this.running=!1,ol(this)}}}class hl{constructor(t,e,i,s,n){this.scope=t,this.locator=e,this.oL=i,this.expression=s,this.callback=n,this.interceptor=this,this.isBound=!1,this.obj=t.bindingContext}handleChange(t){const e=this.expression,i=this.obj,s=this.value;10082===e.$kind&&1===this.obs.count||(this.obs.version++,t=e.evaluate(0,this.scope,this.locator,this),this.obs.clear()),Object.is(t,s)||(this.value=t,this.callback.call(i,t,s,i))}$bind(){this.isBound||(this.isBound=!0,this.obs.version++,this.value=this.expression.evaluate(0,this.scope,this.locator,this),this.obs.clear())}$unbind(){this.isBound&&(this.isBound=!1,this.obs.clearAll(),this.value=void 0)}}In(ll),In(hl);const ul=Dt.createInterface("ILifecycleHooks");class dl{constructor(t,e){this.definition=t,this.instance=e}}class pl{constructor(t,e){this.Type=t,this.propertyNames=e}static create(t,e){const i=new Set;let s=e.prototype;for(;s!==Object.prototype;){for(const t of Object.getOwnPropertyNames(s))"constructor"!==t&&i.add(t);s=Object.getPrototypeOf(s)}return new pl(e,i)}register(t){ve.singleton(ul,this.Type).register(t)}}const fl=new WeakMap,gl=qo("lifecycle-hooks"),vl=Object.freeze({name:gl,define(t,e){const i=pl.create(t,e);return Bo(gl,i,e),Ho(e,gl),i.Type},resolve(t){let e=fl.get(t);if(void 0===e){e=new ml;const i=t.root,s=i.id===t.id?t.getAll(ul):t.has(ul,!1)?[...i.getAll(ul),...t.getAll(ul)]:i.getAll(ul);let n,r,o,a,c;for(n of s)for(a of(r=Mo(gl,n.constructor),o=new dl(r,n),r.propertyNames))c=e[a],void 0===c?e[a]=[o]:c.push(o)}return e}});class ml{}const wl=Dt.createInterface("IViewFactory");class bl{constructor(t,e){this.isCaching=!1,this.cache=null,this.cacheSize=-1,this.name=e.name,this.container=t,this.def=e}setCacheSize(t,e){t&&("*"===t?t=bl.maxCacheSize:Zo(t)&&(t=parseInt(t,10)),-1!==this.cacheSize&&e||(this.cacheSize=t)),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0}canReturnToCache(t){return null!=this.cache&&this.cache.length<this.cacheSize}tryReturnToCache(t){return!!this.canReturnToCache(t)&&(this.cache.push(t),!0)}create(t){const e=this.cache;let i;return null!=e&&e.length>0?(i=e.pop(),i):(i=jl.$view(this,t),i)}}bl.maxCacheSize=65535;const yl=new WeakSet;function $l(t){return!yl.has(t)}function kl(t){return yl.add(t),Vc.create(t)}const xl=Fo("views"),Cl=Object.freeze({name:xl,has:t=>Yo(t)&&(No(xl,t)||"$views"in t),get(t){if(Yo(t)&&"$views"in t){const e=t.$views.filter($l).map(kl);for(const i of e)Cl.add(t,i)}let e=Mo(xl,t);return void 0===e&&Bo(xl,e=[],t),e},add(t,e){const i=Vc.create(e);let s=Mo(xl,t);return void 0===s?Bo(xl,s=[i],t):s.push(i),s}}),Sl=Dt.createInterface("IViewLocator",(t=>t.singleton(Al)));class Al{constructor(){this.it=new WeakMap,this.st=new Map}getViewComponentForObject(t,e){if(t){const i=Cl.has(t.constructor)?Cl.get(t.constructor):[],s=Yo(e)?e(t,i):this.nt(i,e);return this.rt(t,i,s)}return null}rt(t,e,i){let s,n=this.it.get(t);if(void 0===n?(n={},this.it.set(t,n)):s=n[i],void 0===s){const r=this.ot(t,e,i);s=Jc.define(Jc.getDefinition(r),class extends r{constructor(){super(t)}}),n[i]=s}return s}ot(t,e,i){let s,n=this.st.get(t.constructor);if(void 0===n?(n={},this.st.set(t.constructor,n)):s=n[i],void 0===s){s=Jc.define(this.lt(e,i),class{constructor(t){this.viewModel=t}define(t,e,i){const s=this.viewModel;if(t.scope=vi.fromParent(t.scope,s),void 0!==s.define)return s.define(t,e,i)}});const r=s.prototype;"hydrating"in t&&(r.hydrating=function(t){this.viewModel.hydrating(t)}),"hydrated"in t&&(r.hydrated=function(t){this.viewModel.hydrated(t)}),"created"in t&&(r.created=function(t){this.viewModel.created(t)}),"binding"in t&&(r.binding=function(t,e,i){return this.viewModel.binding(t,e,i)}),"bound"in t&&(r.bound=function(t,e,i){return this.viewModel.bound(t,e,i)}),"attaching"in t&&(r.attaching=function(t,e,i){return this.viewModel.attaching(t,e,i)}),"attached"in t&&(r.attached=function(t,e){return this.viewModel.attached(t,e)}),"detaching"in t&&(r.detaching=function(t,e,i){return this.viewModel.detaching(t,e,i)}),"unbinding"in t&&(r.unbinding=function(t,e,i){return this.viewModel.unbinding(t,e,i)}),"dispose"in t&&(r.dispose=function(){this.viewModel.dispose()}),n[i]=s}return s}nt(t,e){return e||(1===t.length?t[0].name:"default-view")}lt(t,e){const i=t.find((t=>t.name===e));if(void 0===i)throw new Error(`Could not find view: ${e}`);return i}}const Tl=Dt.createInterface("IRendering",(t=>t.singleton(Rl)));class Rl{constructor(t){this.ht=new WeakMap,this.at=new WeakMap,this.ct=(this.ut=t.root).get(Ia),this.ft=new dh(this.ct,this.ct.document.createDocumentFragment())}get renderers(){return null==this.rs?this.rs=this.ut.getAll(Jh,!1).reduce(((t,e)=>(t[e.instructionType]=e,t)),Ko()):this.rs}compile(t,e,i){if(!1!==t.needsCompile){const s=this.ht,n=e.get(Gh);let r=s.get(t);return null==r?s.set(t,r=n.compile(t,e,i)):e.register(...r.dependencies),r}return t}getViewFactory(t,e){return new bl(e,Vc.getOrCreate(t))}createNodes(t){if(!0===t.enhance)return new dh(this.ct,t.template);let e;const i=this.at;if(i.has(t))e=i.get(t);else{const s=this.ct,n=s.document,r=t.template;let o;null===r?e=null:r instanceof s.Node?"TEMPLATE"===r.nodeName?e=n.adoptNode(r.content):(e=n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(!0)):(o=n.createElement("template"),Zo(r)&&(o.innerHTML=r),n.adoptNode(e=o.content)),i.set(t,e)}return null==e?this.ft:new dh(this.ct,e.cloneNode(!0))}render(t,e,i,s){const n=i.instructions,r=this.renderers,o=e.length;if(e.length!==n.length)throw new Error(`AUR0757:${o}<>${n.length}`);let a,c,l,h=0,u=0,d=0;if(o>0)for(;o>h;){for(a=n[h],l=e[h],u=0,d=a.length;d>u;)c=a[u],r[c.type].render(t,l,c),++u;++h}if(null!=s&&(a=i.surrogates,(d=a.length)>0))for(u=0;d>u;)c=a[u],r[c.type].render(t,s,c),++u}}var El;Rl.inject=[Ht],function(t){t[t.none=0]="none",t[t.host=1]="host",t[t.shadowRoot=2]="shadowRoot",t[t.location=3]="location"}(El||(El={}));const Ol={optional:!0},Pl=new WeakMap;class jl{constructor(t,e,i,s,n,r){switch(this.container=t,this.vmKind=e,this.definition=i,this.viewFactory=s,this.viewModel=n,this.host=r,this.id=ht("au$component"),this.head=null,this.tail=null,this.next=null,this.parent=null,this.bindings=null,this.children=null,this.hasLockedScope=!1,this.isStrictBinding=!1,this.scope=null,this.isBound=!1,this.hostController=null,this.mountTarget=0,this.shadowRoot=null,this.nodes=null,this.location=null,this.lifecycleHooks=null,this.state=0,this.dt=!1,this.vt=$e,this.flags=0,this.$initiator=null,this.$flags=0,this.$resolve=void 0,this.$reject=void 0,this.$promise=void 0,this.gt=0,this.wt=0,this.bt=0,this.r=t.root.get(Tl),e){case 1:case 0:this.hooks=new Vl(n);break;case 2:this.hooks=Vl.none}}get isActive(){return(3&this.state)>0&&0==(4&this.state)}get name(){var t;if(null===this.parent)switch(this.vmKind){case 1:return`[${this.definition.name}]`;case 0:return this.definition.name;case 2:return this.viewFactory.name}switch(this.vmKind){case 1:return`${this.parent.name}>[${this.definition.name}]`;case 0:return`${this.parent.name}>${this.definition.name}`;case 2:return this.viewFactory.name===(null===(t=this.parent.definition)||void 0===t?void 0:t.name)?`${this.parent.name}[view]`:`${this.parent.name}[view:${this.viewFactory.name}]`}}static getCached(t){return Pl.get(t)}static getCachedOrThrow(t){const e=jl.getCached(t);if(void 0===e)throw new Error(`AUR0500:${t}`);return e}static $el(t,e,i,s,n){if(Pl.has(e))return Pl.get(e);n=null!=n?n:Jc.getDefinition(e.constructor);const r=new jl(t,0,n,null,e,i),o=t.get(Zt(zl));return n.dependencies.length>0&&t.register(...n.dependencies),t.registerResolver(zl,new me("IHydrationContext",new Kl(r,s,o))),Pl.set(e,r),null!=s&&!1===s.hydrate||r.xt(s,o),r}static $attr(t,e,i,s){if(Pl.has(e))return Pl.get(e);s=null!=s?s:Ic.getDefinition(e.constructor);const n=new jl(t,1,s,null,e,i);return Pl.set(e,n),n.yt(),n}static $view(t,e){const i=new jl(t.container,2,null,t,null,null);return i.parent=null!=e?e:null,i.kt(),i}xt(t,e){const i=this.container,s=(this.flags,this.viewModel);let n=this.definition;if(this.scope=vi.create(s,null,!0),n.watches.length>0&&Nl(this,i,n,s),Ul(this,n,0,s),this.vt=function(t,e,i){const s=e.childrenObservers,n=Object.getOwnPropertyNames(s),r=n.length;if(r>0){const e=Il(i),o=[];let a,c,l=0;for(;l<r;++l)a=n[l],null==e[a]&&(c=s[a],o[o.length]=e[a]=new kc(t,i,a,c.callback,c.query,c.filter,c.map,c.options));return o}return $e}(this,n,s),this.hooks.hasDefine){const t=s.define(this,e,n);void 0!==t&&t!==n&&(n=Vc.getOrCreate(t))}this.lifecycleHooks=vl.resolve(i),n.register(i),null!==n.injectable&&i.registerResolver(n.injectable,new me("definition.injectable",s)),null!=t&&!1===t.hydrate||(this.Ct(t),this.At())}Ct(t){this.hooks.hasHydrating&&this.viewModel.hydrating(this);const e=this.St=this.r.compile(this.definition,this.container,t),{shadowOptions:i,isStrictBinding:s,hasSlots:n,containerless:r}=e;if(this.isStrictBinding=s,null!==(this.hostController=Jc.for(this.host,Ol))&&(this.host=this.container.root.get(Ia).document.createElement(this.definition.name)),sh(this.host,Jc.name,this),sh(this.host,this.definition.key,this),null!==i||n){if(r)throw new Error("AUR0501");sh(this.shadowRoot=this.host.attachShadow(null!=i?i:Dl),Jc.name,this),sh(this.shadowRoot,this.definition.key,this),this.mountTarget=2}else r?(sh(this.location=hh(this.host),Jc.name,this),sh(this.location,this.definition.key,this),this.mountTarget=3):this.mountTarget=1;this.viewModel.$controller=this,this.nodes=this.r.createNodes(e),this.hooks.hasHydrated&&this.viewModel.hydrated(this)}At(){this.r.render(this,this.nodes.findTargets(),this.St,this.host),this.hooks.hasCreated&&this.viewModel.created(this)}yt(){const t=this.definition,e=this.viewModel;t.watches.length>0&&Nl(this,this.container,t,e),Ul(this,t,this.flags,e),e.$controller=this,this.lifecycleHooks=vl.resolve(this.container),this.hooks.hasCreated&&this.viewModel.created(this)}kt(){this.St=this.r.compile(this.viewFactory.def,this.container,null),this.isStrictBinding=this.St.isStrictBinding,this.r.render(this,(this.nodes=this.r.createNodes(this.St)).findTargets(),this.St,void 0)}activate(t,e,i,s){switch(this.state){case 0:case 8:if(null!==e&&!e.isActive)return;this.state=1;break;case 2:return;case 32:throw new Error(`AUR0502:${this.name}`);default:throw new Error(`AUR0503:${this.name} ${Hl(this.state)}`)}switch(this.parent=e,i|=2,this.vmKind){case 0:this.scope.parentScope=null!=s?s:null;break;case 1:this.scope=null!=s?s:null;break;case 2:if(null==s)throw new Error("AUR0504");this.hasLockedScope||(this.scope=s)}if(this.isStrictBinding&&(i|=1),this.$initiator=t,this.$flags=i,this.Rt(),this.hooks.hasBinding){const t=this.viewModel.binding(this.$initiator,this.parent,this.$flags);if(t instanceof Promise)return this.Et(),t.then((()=>{this.bind()})).catch((t=>{this.Bt(t)})),this.$promise}return this.bind(),this.$promise}bind(){let t,e=0,i=this.vt.length;if(i>0)for(;i>e;)this.vt[e].start(),++e;if(null!==this.bindings)for(e=0,i=this.bindings.length;i>e;)this.bindings[e].$bind(this.$flags,this.scope),++e;if(this.hooks.hasBound&&(t=this.viewModel.bound(this.$initiator,this.parent,this.$flags),t instanceof Promise))return this.Et(),void t.then((()=>{this.isBound=!0,this.It()})).catch((t=>{this.Bt(t)}));this.isBound=!0,this.It()}Tt(...t){switch(this.mountTarget){case 1:this.host.append(...t);break;case 2:this.shadowRoot.append(...t);break;case 3:{let e=0;for(;e<t.length;++e)this.location.parentNode.insertBefore(t[e],this.location);break}}}It(){if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.hostController.Tt(this.host);break;case 3:this.hostController.Tt(this.location.$start,this.location)}switch(this.mountTarget){case 1:this.nodes.appendTo(this.host,null!=this.definition&&this.definition.enhance);break;case 2:{const t=this.container;(t.has(el,!1)?t.get(el):t.get(il)).applyTo(this.shadowRoot),this.nodes.appendTo(this.shadowRoot);break}case 3:this.nodes.insertBefore(this.location)}if(this.hooks.hasAttaching){const t=this.viewModel.attaching(this.$initiator,this.parent,this.$flags);t instanceof Promise&&(this.Et(),this.Rt(),t.then((()=>{this.Dt()})).catch((t=>{this.Bt(t)})))}if(null!==this.children){let t=0;for(;t<this.children.length;++t)this.children[t].activate(this.$initiator,this,this.$flags,this.scope)}this.Dt()}deactivate(t,e,i){switch(-17&this.state){case 2:this.state=4;break;case 0:case 8:case 32:case 40:return;default:throw new Error(`AUR0505:${this.name} ${Hl(this.state)}`)}this.$initiator=t,this.$flags=i,t===this&&this.Pt();let s=0;if(this.vt.length)for(;s<this.vt.length;++s)this.vt[s].stop();if(null!==this.children)for(s=0;s<this.children.length;++s)this.children[s].deactivate(t,this,i);if(this.hooks.hasDetaching){const e=this.viewModel.detaching(this.$initiator,this.parent,this.$flags);e instanceof Promise&&(this.Et(),t.Pt(),e.then((()=>{t.Ot()})).catch((e=>{t.Bt(e)})))}if(null===t.head?t.head=this:t.tail.next=this,t.tail=this,t===this)return this.Ot(),this.$promise}removeNodes(){switch(this.vmKind){case 0:case 2:this.nodes.remove(),this.nodes.unlink()}if(null!==this.hostController)switch(this.mountTarget){case 1:case 2:this.host.remove();break;case 3:this.location.$start.remove(),this.location.remove()}}unbind(){const t=4|this.$flags;let e=0;if(null!==this.bindings)for(;e<this.bindings.length;++e)this.bindings[e].$unbind(t);switch(this.parent=null,this.vmKind){case 1:this.scope=null;break;case 2:this.hasLockedScope||(this.scope=null),16!=(16&this.state)||this.viewFactory.tryReturnToCache(this)||this.$initiator!==this||this.dispose();break;case 0:this.scope.parentScope=null}32==(32&t)&&this.$initiator===this&&this.dispose(),this.state=32&this.state|8,this.$initiator=null,this.$t()}Et(){void 0===this.$promise&&(this.$promise=new Promise(((t,e)=>{this.$resolve=t,this.$reject=e})),this.$initiator!==this&&this.parent.Et())}$t(){void 0!==this.$promise&&(Gl=this.$resolve,this.$resolve=this.$reject=this.$promise=void 0,Gl(),Gl=void 0)}Bt(t){void 0!==this.$promise&&(Jl=this.$reject,this.$resolve=this.$reject=this.$promise=void 0,Jl(t),Jl=void 0),this.$initiator!==this&&this.parent.Bt(t)}Rt(){++this.gt,this.$initiator!==this&&this.parent.Rt()}Dt(){if(0==--this.gt){if(this.hooks.hasAttached){if(_l=this.viewModel.attached(this.$initiator,this.$flags),_l instanceof Promise)return this.Et(),_l.then((()=>{this.state=2,this.$t(),this.$initiator!==this&&this.parent.Dt()})).catch((t=>{this.Bt(t)})),void(_l=void 0);_l=void 0}this.state=2,this.$t()}this.$initiator!==this&&this.parent.Dt()}Pt(){++this.wt}Ot(){if(0==--this.wt){this.Lt(),this.removeNodes();let t=this.$initiator.head;for(;null!==t;)t!==this&&(t.debug&&t.logger.trace("detach()"),t.removeNodes()),t.hooks.hasUnbinding&&(t.debug&&t.logger.trace("unbinding()"),_l=t.viewModel.unbinding(t.$initiator,t.parent,t.$flags),_l instanceof Promise&&(this.Et(),this.Lt(),_l.then((()=>{this.qt()})).catch((t=>{this.Bt(t)}))),_l=void 0),t=t.next;this.qt()}}Lt(){++this.bt}qt(){if(0==--this.bt){let t=this.$initiator.head,e=null;for(;null!==t;)t!==this&&(t.isBound=!1,t.unbind()),e=t.next,t.next=null,t=e;this.head=this.tail=null,this.isBound=!1,this.unbind()}}addBinding(t){null===this.bindings?this.bindings=[t]:this.bindings[this.bindings.length]=t}addChild(t){null===this.children?this.children=[t]:this.children[this.children.length]=t}is(t){switch(this.vmKind){case 1:return Ic.getDefinition(this.viewModel.constructor).name===t;case 0:return Jc.getDefinition(this.viewModel.constructor).name===t;case 2:return this.viewFactory.name===t}}lockScope(t){this.scope=t,this.hasLockedScope=!0}setHost(t){return 0===this.vmKind&&(sh(t,Jc.name,this),sh(t,this.definition.key,this)),this.host=t,this.mountTarget=1,this}setShadowRoot(t){return 0===this.vmKind&&(sh(t,Jc.name,this),sh(t,this.definition.key,this)),this.shadowRoot=t,this.mountTarget=2,this}setLocation(t){return 0===this.vmKind&&(sh(t,Jc.name,this),sh(t,this.definition.key,this)),this.location=t,this.mountTarget=3,this}release(){this.state|=16}dispose(){32!=(32&this.state)&&(this.state|=32,this.hooks.hasDispose&&this.viewModel.dispose(),null!==this.children&&(this.children.forEach(Ql),this.children=null),this.hostController=null,this.scope=null,this.nodes=null,this.location=null,this.viewFactory=null,null!==this.viewModel&&(Pl.delete(this.viewModel),this.viewModel=null),this.viewModel=null,this.host=null,this.shadowRoot=null,this.container.disposeResolvers())}accept(t){if(!0===t(this))return!0;if(this.hooks.hasAccept&&!0===this.viewModel.accept(t))return!0;if(null!==this.children){const{children:e}=this;for(let i=0,s=e.length;i<s;++i)if(!0===e[i].accept(t))return!0}}}function Il(t){let e=t.$observers;return void 0===e&&Reflect.defineProperty(t,"$observers",{enumerable:!1,value:e={}}),e}function Ul(t,e,i,s){const n=e.bindables,r=Object.getOwnPropertyNames(n),o=r.length;if(o>0){let e,i,a=0;const c=Il(s),l=t.container,h=l.has(hs,!0)?l.get(hs):null;for(;a<o;++a)e=r[a],void 0===c[e]&&(i=n[e],c[e]=new ra(s,e,i.callback,i.set,t,h))}}const Ll=new Map,Ml=t=>{let e=Ll.get(t);return null==e&&(e=new qi(t,0),Ll.set(t,e)),e};function Nl(t,e,i,s){const n=e.get(Ao),r=e.get(Un),o=i.watches,a=0===t.vmKind?t.scope:vi.create(s,null,!0),c=o.length;let l,h,u,d=0;for(;c>d;++d){if(({expression:l,callback:h}=o[d]),h=Yo(h)?h:Reflect.get(s,h),!Yo(h))throw new Error(`AUR0506:${String(h)}`);Yo(l)?t.addBinding(new ll(s,n,l,h,!0)):(u=Zo(l)?r.parse(l,8):Ml(l),t.addBinding(new hl(a,e,n,u,h)))}}function Bl(t){return u(t)&&Jc.isType(t.constructor)}class Vl{constructor(t){this.hasDefine="define"in t,this.hasHydrating="hydrating"in t,this.hasHydrated="hydrated"in t,this.hasCreated="created"in t,this.hasBinding="binding"in t,this.hasBound="bound"in t,this.hasAttaching="attaching"in t,this.hasAttached="attached"in t,this.hasDetaching="detaching"in t,this.hasUnbinding="unbinding"in t,this.hasDispose="dispose"in t,this.hasAccept="accept"in t}}Vl.none=new Vl({});const Dl={mode:"open"};var ql,Fl;function Hl(t){const e=[];return 1==(1&t)&&e.push("activating"),2==(2&t)&&e.push("activated"),4==(4&t)&&e.push("deactivating"),8==(8&t)&&e.push("deactivated"),16==(16&t)&&e.push("released"),32==(32&t)&&e.push("disposed"),0===e.length?"none":e.join("|")}!function(t){t[t.customElement=0]="customElement",t[t.customAttribute=1]="customAttribute",t[t.synthetic=2]="synthetic"}(ql||(ql={})),function(t){t[t.none=0]="none",t[t.activating=1]="activating",t[t.activated=2]="activated",t[t.deactivating=4]="deactivating",t[t.deactivated=8]="deactivated",t[t.released=16]="released",t[t.disposed=32]="disposed"}(Fl||(Fl={}));const Wl=Dt.createInterface("IController"),zl=Dt.createInterface("IHydrationContext");class Kl{constructor(t,e,i){this.instruction=e,this.parent=i,this.controller=t}}function Ql(t){t.dispose()}let Gl,Jl,_l;const Yl=Dt.createInterface("IAppRoot"),Zl=Dt.createInterface("IWorkTracker",(t=>t.singleton(Xl)));class Xl{constructor(t){this.Mt=0,this.Ut=null,this.$t=null,this.Ft=t.scopeTo("WorkTracker")}start(){this.Ft.trace(`start(stack:${this.Mt})`),++this.Mt}finish(){if(this.Ft.trace(`finish(stack:${this.Mt})`),0==--this.Mt){const t=this.$t;null!==t&&(this.$t=this.Ut=null,t())}}wait(){if(this.Ft.trace(`wait(stack:${this.Mt})`),null===this.Ut){if(0===this.Mt)return Promise.resolve();this.Ut=new Promise((t=>{this.$t=t}))}return this.Ut}}Xl.inject=[je];class th{constructor(t,e,i,s){this.config=t,this.platform=e,this.container=i,this.controller=void 0,this.Vt=void 0,this.host=t.host,this.work=i.get(Zl),s.prepare(this),i.registerResolver(e.HTMLElement,i.registerResolver(e.Element,i.registerResolver(nh,new me("ElementResolver",t.host)))),this.Vt=wt(this._t("beforeCreate"),(()=>{const e=t.component,s=i.createChild();let n;n=Jc.isType(e)?this.container.get(e):t.component;const r={hydrate:!1,projections:null},o=this.controller=jl.$el(s,n,this.host,r);return o.xt(r,null),wt(this._t("hydrating"),(()=>(o.Ct(null),wt(this._t("hydrated"),(()=>{o.At(),this.Vt=void 0})))))}))}activate(){return wt(this.Vt,(()=>wt(this._t("beforeActivate"),(()=>wt(this.controller.activate(this.controller,null,2,void 0),(()=>this._t("afterActivate")))))))}deactivate(){return wt(this._t("beforeDeactivate"),(()=>wt(this.controller.deactivate(this.controller,null,0),(()=>this._t("afterDeactivate")))))}_t(t){return bt(...this.container.getAll(pc).reduce(((e,i)=>(i.slot===t&&e.push(i.run()),e)),[]))}dispose(){var t;null===(t=this.controller)||void 0===t||t.dispose()}}class eh{}function ih(t,e){var i,s;return null!==(s=null===(i=t.$au)||void 0===i?void 0:i[e])&&void 0!==s?s:null}function sh(t,e,i){var s,n;(null!==(s=(n=t).$au)&&void 0!==s?s:n.$au=new eh)[e]=i}const nh=Dt.createInterface("INode"),rh=Dt.createInterface("IEventTarget",(t=>t.cachedCallback((t=>t.has(Yl,!0)?t.get(Yl).host:t.get(Ia).document)))),oh=Dt.createInterface("IRenderLocation");var ah;!function(t){t[t.Element=1]="Element",t[t.Attr=2]="Attr",t[t.Text=3]="Text",t[t.CDATASection=4]="CDATASection",t[t.EntityReference=5]="EntityReference",t[t.Entity=6]="Entity",t[t.ProcessingInstruction=7]="ProcessingInstruction",t[t.Comment=8]="Comment",t[t.Document=9]="Document",t[t.DocumentType=10]="DocumentType",t[t.DocumentFragment=11]="DocumentFragment",t[t.Notation=12]="Notation"}(ah||(ah={}));const ch=new WeakMap;function lh(t){if(ch.has(t))return ch.get(t);let e=0,i=t.nextSibling;for(;null!==i;){if(8===i.nodeType)switch(i.textContent){case"au-start":++e;break;case"au-end":if(0==e--)return i}i=i.nextSibling}if(null===t.parentNode&&11===t.nodeType){const e=Jc.for(t);if(void 0===e)return null;if(2===e.mountTarget)return lh(e.host)}return t.parentNode}function hh(t){if(uh(t))return t;const e=t.ownerDocument.createComment("au-end"),i=t.ownerDocument.createComment("au-start");return null!==t.parentNode&&(t.parentNode.replaceChild(e,t),e.parentNode.insertBefore(i,e)),e.$start=i,e}function uh(t){return"au-end"===t.textContent}class dh{constructor(t,e){this.platform=t,this.fragment=e,this.isMounted=!1,this.isLinked=!1,this.next=void 0,this.refNode=void 0;const i=e.querySelectorAll(".au");let s,n=0,r=i.length,o=this.targets=Array(r);for(;r>n;)s=i[n],"AU-M"===s.nodeName?o[n]=hh(s):o[n]=s,++n;const a=e.childNodes,c=this.childNodes=Array(r=a.length);for(n=0;r>n;)c[n]=a[n],++n;this.firstChild=e.firstChild,this.lastChild=e.lastChild}findTargets(){return this.targets}insertBefore(t){if(this.isLinked&&this.refNode)this.addToLinked();else{const e=t.parentNode;if(this.isMounted){let i,s=this.firstChild;const n=this.lastChild;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.isMounted=!0,t.parentNode.insertBefore(this.fragment,t)}}appendTo(t,e=!1){if(this.isMounted){let e,i=this.firstChild;const s=this.lastChild;for(;null!=i&&(e=i.nextSibling,t.appendChild(i),i!==s);)i=e}else this.isMounted=!0,e||t.appendChild(this.fragment)}remove(){if(this.isMounted){this.isMounted=!1;const t=this.fragment,e=this.lastChild;let i,s=this.firstChild;for(;null!==s&&(i=s.nextSibling,t.appendChild(s),s!==e);)s=i}}addToLinked(){const t=this.refNode,e=t.parentNode;if(this.isMounted){let i,s=this.firstChild;const n=this.lastChild;for(;null!=s&&(i=s.nextSibling,e.insertBefore(s,t),s!==n);)s=i}else this.isMounted=!0,e.insertBefore(this.fragment,t)}unlink(){this.isLinked=!1,this.next=void 0,this.refNode=void 0}link(t){this.isLinked=!0,uh(t)?this.refNode=t:(this.next=t,this.obtainRefNode())}obtainRefNode(){void 0!==this.next?this.refNode=this.next.firstChild:this.refNode=void 0}}const ph=Dt.createInterface("IWindow",(t=>t.callback((t=>t.get(Ia).window)))),fh=Dt.createInterface("ILocation",(t=>t.callback((t=>t.get(ph).location)))),gh=Dt.createInterface("IHistory",(t=>t.callback((t=>t.get(ph).history)))),vh={[fs.capturing]:{capture:!0},[fs.bubbling]:{capture:!1}};class mh{constructor(t,e,i,s,n,r,o,a){this.platform=t,this.targetEvent=e,this.delegationStrategy=i,this.sourceExpression=s,this.target=n,this.preventDefault=r,this.eventDelegator=o,this.locator=a,this.interceptor=this,this.isBound=!1,this.handler=null}callSource(t){const e=this.$scope.overrideContext;e.$event=t;const i=this.sourceExpression.evaluate(8,this.$scope,this.locator,null);return Reflect.deleteProperty(e,"$event"),!0!==i&&this.preventDefault&&t.preventDefault(),i}handleEvent(t){this.interceptor.callSource(t)}$bind(t,e){if(this.isBound){if(this.$scope===e)return;this.interceptor.$unbind(2|t)}this.$scope=e;const i=this.sourceExpression;i.hasBind&&i.bind(t,e,this.interceptor),this.delegationStrategy===fs.none?this.target.addEventListener(this.targetEvent,this):this.handler=this.eventDelegator.addEventListener(this.locator.get(rh),this.target,this.targetEvent,this,vh[this.delegationStrategy]),this.isBound=!0}$unbind(t){if(!this.isBound)return;const e=this.sourceExpression;e.hasUnbind&&e.unbind(t,this.$scope,this.interceptor),this.$scope=null,this.delegationStrategy===fs.none?this.target.removeEventListener(this.targetEvent,this):(this.handler.dispose(),this.handler=null),this.isBound=!1}observe(t,e){}handleChange(t,e,i){}}const wh={capture:!1};class bh{constructor(t,e,i=wh){this.jt=t,this.Nt=e,this.Wt=i,this.Ht=0,this.zt=new Map,this.Gt=new Map}Xt(){1==++this.Ht&&this.jt.addEventListener(this.Nt,this,this.Wt)}Kt(){0==--this.Ht&&this.jt.removeEventListener(this.Nt,this,this.Wt)}dispose(){this.Ht>0&&(this.Ht=0,this.jt.removeEventListener(this.Nt,this,this.Wt)),this.zt.clear(),this.Gt.clear()}Yt(t){const e=!0===this.Wt.capture?this.zt:this.Gt;let i=e.get(t);return void 0===i&&e.set(t,i=Ko()),i}handleEvent(t){const e=!0===this.Wt.capture?this.zt:this.Gt,i=t.composedPath();!0===this.Wt.capture&&i.reverse();for(const s of i){const i=e.get(s);if(void 0===i)continue;const n=i[this.Nt];if(void 0!==n&&(Yo(n)?n(t):n.handleEvent(t),!0===t.cancelBubble))return}}}class yh{constructor(t,e,i,s){this.Qt=t,this.Zt=e,this.Nt=i,t.Xt(),e[i]=s}dispose(){this.Qt.Kt(),this.Zt[this.Nt]=void 0}}class $h{constructor(t){this.config=t,this.target=null,this.handler=null}subscribe(t,e){let i;for(i of(this.target=t,this.handler=e,this.config.events))t.addEventListener(i,e)}dispose(){const{target:t,handler:e}=this;let i;if(null!==t&&null!==e)for(i of this.config.events)t.removeEventListener(i,e);this.target=this.handler=null}}const kh=Dt.createInterface("IEventDelegator",(t=>t.singleton(xh)));class xh{constructor(){this.Jt=Ko()}addEventListener(t,e,i,s,n){var r,o;const a=null!==(r=(o=this.Jt)[i])&&void 0!==r?r:o[i]=new Map;let c=a.get(t);return void 0===c&&a.set(t,c=new bh(t,i,n)),new yh(c,c.Yt(e),i,s)}dispose(){for(const t in this.Jt){const e=this.Jt[t];for(const t of e.values())t.dispose();e.clear()}}}Dt.createInterface("IProjections");const Ch=Dt.createInterface("IAuSlotsInfo");class Sh{constructor(t){this.projectedSlots=t}}var Ah;!function(t){t.hydrateElement="ra",t.hydrateAttribute="rb",t.hydrateTemplateController="rc",t.hydrateLetElement="rd",t.setProperty="re",t.interpolation="rf",t.propertyBinding="rg",t.callBinding="rh",t.letBinding="ri",t.refBinding="rj",t.iteratorBinding="rk",t.textBinding="ha",t.listenerBinding="hb",t.attributeBinding="hc",t.stylePropertyBinding="hd",t.setAttribute="he",t.setClassAttribute="hf",t.setStyleAttribute="hg",t.spreadBinding="hs",t.spreadElementProp="hp"}(Ah||(Ah={}));const Th=Dt.createInterface("Instruction");function Rh(t){const e=t.type;return Zo(e)&&2===e.length}class Eh{constructor(t,e){this.from=t,this.to=e}get type(){return"rf"}}class Oh{constructor(t,e,i){this.from=t,this.to=e,this.mode=i}get type(){return"rg"}}class Ph{constructor(t,e){this.from=t,this.to=e}get type(){return"rk"}}class jh{constructor(t,e){this.from=t,this.to=e}get type(){return"rh"}}class Ih{constructor(t,e){this.from=t,this.to=e}get type(){return"rj"}}class Uh{constructor(t,e){this.value=t,this.to=e}get type(){return"re"}}class Lh{constructor(t,e,i,s,n,r){this.res=t,this.alias=e,this.props=i,this.projections=s,this.containerless=n,this.captures=r,this.auSlot=null}get type(){return"ra"}}class Mh{constructor(t,e,i){this.res=t,this.alias=e,this.props=i}get type(){return"rb"}}class Nh{constructor(t,e,i,s){this.def=t,this.res=e,this.alias=i,this.props=s}get type(){return"rc"}}class Bh{constructor(t,e){this.instructions=t,this.toBindingContext=e}get type(){return"rd"}}class Vh{constructor(t,e){this.from=t,this.to=e}get type(){return"ri"}}class Dh{constructor(t,e){this.from=t,this.strict=e}get type(){return"ha"}}class qh{constructor(t,e,i,s){this.from=t,this.to=e,this.preventDefault=i,this.strategy=s}get type(){return"hb"}}class Fh{constructor(t,e){this.value=t,this.to=e}get type(){return"he"}}class Hh{constructor(t){this.value=t,this.type="hf"}}class Wh{constructor(t){this.value=t,this.type="hg"}}class zh{constructor(t,e,i){this.attr=t,this.from=e,this.to=i}get type(){return"hc"}}class Kh{get type(){return"hs"}}class Qh{constructor(t){this.instructions=t}get type(){return"hp"}}const Gh=Dt.createInterface("ITemplateCompiler"),Jh=Dt.createInterface("IRenderer");function _h(t){return function(e){const i=function(...i){const s=new e(...i);return s.instructionType=t,s};i.register=function(t){ve.singleton(Jh,i).register(t)};const s=U.getOwnKeys(e);for(const t of s)Bo(t,Mo(t,e),i);const n=Object.getOwnPropertyDescriptors(e);return Object.keys(n).filter((t=>"prototype"!==t)).forEach((t=>{Reflect.defineProperty(i,t,n[t])})),i}}function Yh(t,e,i){return Zo(e)?t.parse(e,i):e}function Zh(t){return null!=t.viewModel?t.viewModel:t}let Xh=class{render(t,e,i){const s=Zh(e);void 0!==s.$observers&&void 0!==s.$observers[i.to]?s.$observers[i.to].setValue(i.value,2):s[i.to]=i.value}};Xh=Uo([_h("re")],Xh);let tu=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Tl,Ia]}render(t,e,i){let s,n,r,o;const a=i.res,c=i.projections,l=t.container,h=function(t,e,i,s,n,r){const o=e.container.createChild();return o.registerResolver(t.HTMLElement,o.registerResolver(t.Element,o.registerResolver(nh,new me("ElementResolver",i)))),o.registerResolver(Wl,new me(ku,e)),o.registerResolver(Th,new me(xu,s)),o.registerResolver(oh,null==n?Ru:new me(Cu,n)),o.registerResolver(wl,Eu),o.registerResolver(Ch,null==r?Ou:new me(Su,r)),o}(this.p,t,e,i,e,null==c?void 0:new Sh(Object.keys(c)));if("string"==typeof a){if(s=l.find(Jc,a),null==s)throw new Error(`AUR0752:${a}@${t.name}`)}else s=a;n=s.Type,r=h.invoke(n),h.registerResolver(n,new me(s.key,r)),o=jl.$el(h,r,e,i,s),sh(e,s.key,o);const u=this.r.renderers,d=i.props,p=d.length;let f,g=0;for(;p>g;)f=d[g],u[f.type].render(t,o,f),++g;t.addChild(o)}};tu=Uo([_h("ra")],tu);let eu=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Tl,Ia]}render(t,e,i){let s,n=t.container;if("string"==typeof i.res){if(s=n.find(Ic,i.res),null==s)throw new Error(`AUR0753:${i.res}@${t.name}`)}else s=i.res;const r=Tu(this.p,s,t,e,i,void 0,void 0),o=jl.$attr(t.container,r,e,s);sh(e,s.key,o);const a=this.r.renderers,c=i.props,l=c.length;let h,u=0;for(;l>u;)h=c[u],a[h.type].render(t,o,h),++u;t.addChild(o)}};eu=Uo([_h("rb")],eu);let iu=class{constructor(t,e){this.r=t,this.p=e}static get inject(){return[Tl,Ia]}render(t,e,i){var s;let n,r=t.container;if("string"==typeof i.res){if(n=r.find(Ic,i.res),null==n)throw new Error(`AUR0754:${i.res}@${t.name}`)}else n=i.res;const o=this.r.getViewFactory(i.def,r),a=hh(e),c=Tu(this.p,n,t,e,i,o,a),l=jl.$attr(t.container,c,e,n);sh(a,n.key,l),null===(s=c.link)||void 0===s||s.call(c,t,l,e,i);const h=this.r.renderers,u=i.props,d=u.length;let p,f=0;for(;d>f;)p=u[f],h[p.type].render(t,l,p),++f;t.addChild(l)}};iu=Uo([_h("rc")],iu);let su=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){e.remove();const s=i.instructions,n=i.toBindingContext,r=t.container,o=s.length;let a,c,l,h=0;for(;o>h;)a=s[h],c=Yh(this.ep,a.from,8),l=new nc(c,a.to,this.oL,r,n),t.addBinding(38962===c.$kind?uu(l,c,r):l),++h}};su.inject=[Un,Ao],su=Uo([_h("rd")],su);let nu=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const s=Yh(this.ep,i.from,12),n=new Va(s,Zh(e),i.to,this.oL,t.container);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};nu.inject=[Un,Ao],nu=Uo([_h("rh")],nu);let ru=class{constructor(t){this.ep=t}render(t,e,i){const s=Yh(this.ep,i.from,8),n=new dc(s,function(t,e){if("element"===e)return t;switch(e){case"controller":return Jc.for(t);case"view":throw new Error("AUR0750");case"view-model":return Jc.for(t).viewModel;default:{const i=Ic.for(t,e);if(void 0!==i)return i.viewModel;const s=Jc.for(t,{name:e});if(void 0===s)throw new Error(`AUR0751:${e}`);return s.viewModel}}}(e,i.to),t.container);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};ru.inject=[Un],ru=Uo([_h("rj")],ru);let ou=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const s=t.container,n=Yh(this.ep,i.from,1),r=new ec(this.oL,n,Zh(e),i.to,us.toView,s,this.p.domWriteQueue),o=r.partBindings,a=o.length;let c,l=0;for(;a>l;++l)c=o[l],38962===c.sourceExpression.$kind&&(o[l]=uu(c,c.sourceExpression,s));t.addBinding(r)}};ou.inject=[Un,Ao,Ia],ou=Uo([_h("rf")],ou);let au=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const s=Yh(this.ep,i.from,8),n=new hc(s,Zh(e),i.to,i.mode,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};au.inject=[Un,Ao,Ia],au=Uo([_h("rg")],au);let cu=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const s=Yh(this.ep,i.from,2),n=new hc(s,Zh(e),i.to,us.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===s.iterable.$kind?uu(n,s.iterable,t.container):n)}};cu.inject=[Un,Ao,Ia],cu=Uo([_h("rk")],cu);let lu=0;const hu=[];function uu(t,e,i){for(;e instanceof Mi;)hu[lu++]=e,e=e.expression;for(;lu>0;){const e=hu[--lu],s=i.get(e.behaviorKey);s instanceof xi&&(t=s.construct(t,e))}return hu.length=0,t}let du=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const s=t.container,n=e.nextSibling,r=e.parentNode,o=this.p.document,a=Yh(this.ep,i.from,1),c=a.parts,l=a.expressions,h=l.length;let u,d,p=0,f=c[0];for(""!==f&&r.insertBefore(o.createTextNode(f),n);h>p;++p)d=l[p],u=new sc(d,r.insertBefore(o.createTextNode(""),n),s,this.oL,this.p,i.strict),t.addBinding(38962===d.$kind?uu(u,d,s):u),f=c[p+1],""!==f&&r.insertBefore(o.createTextNode(f),n);"AU-M"===e.nodeName&&e.remove()}};du.inject=[Un,Ao,Ia],du=Uo([_h("ha")],du);let pu=class{constructor(t,e,i){this.ep=t,this.te=e,this.p=i}render(t,e,i){const s=Yh(this.ep,i.from,4),n=new mh(this.p,i.to,i.strategy,s,e,i.preventDefault,this.te,t.container);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};pu.inject=[Un,kh,Ia],pu=Uo([_h("hb")],pu);let fu=class{render(t,e,i){e.setAttribute(i.to,i.value)}};fu=Uo([_h("he")],fu);let gu=class{render(t,e,i){!function(t,e){const i=e.length;let s=0;for(let n=0;n<i;++n)32===e.charCodeAt(n)?(n!==s&&t.add(e.slice(s,n)),s=n+1):n+1===i&&t.add(e.slice(s))}(e.classList,i.value)}};gu=Uo([_h("hf")],gu);let vu=class{render(t,e,i){e.style.cssText+=i.value}};vu=Uo([_h("hg")],vu);let mu=class{constructor(t,e,i){this.ep=t,this.oL=e,this.p=i}render(t,e,i){const s=Yh(this.ep,i.from,8),n=new hc(s,e.style,i.to,us.toView,this.oL,t.container,this.p.domWriteQueue);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};mu.inject=[Un,Ao,Ia],mu=Uo([_h("hd")],mu);let wu=class{constructor(t,e){this.ep=t,this.oL=e}render(t,e,i){const s=Yh(this.ep,i.from,8),n=new Za(s,e,i.attr,i.to,us.toView,this.oL,t.container);t.addBinding(38962===s.$kind?uu(n,s,t.container):n)}};wu.inject=[Un,Ao],wu=Uo([_h("hc")],wu);let bu=class{constructor(t,e){this.ee=t,this.r=e}static get inject(){return[Gh,Tl]}render(t,e,i){const s=t.container.get(zl),n=this.r.renderers,r=t=>{let e=t,i=s;for(;null!=i&&e>0;)i=i.parent,--e;if(null==i)throw new Error("No scope context for spread binding.");return i},o=i=>{var s,a;const c=r(i),l=$u(c),h=this.ee.compileSpread(c.controller.definition,null!==(a=null===(s=c.instruction)||void 0===s?void 0:s.captures)&&void 0!==a?a:$e,c.controller.container,e);let u;for(u of h)switch(u.type){case"hs":o(i+1);break;case"hp":n[u.instructions.type].render(l,Jc.for(e),u.instructions);break;default:n[u.type].render(l,e,u)}t.addBinding(l)};o(0)}};bu=Uo([_h("hs")],bu);class yu{constructor(t,e){this.ie=t,this.se=e,this.interceptor=this,this.isBound=!1,this.ctrl=e.controller,this.locator=this.ctrl.container}get container(){return this.locator}get definition(){return this.ctrl.definition}get isStrictBinding(){return this.ctrl.isStrictBinding}$bind(t,e){var i;if(this.isBound)return;this.isBound=!0;const s=this.$scope=null!==(i=this.se.controller.scope.parentScope)&&void 0!==i?i:void 0;if(null==s)throw new Error("Invalid spreading. Context scope is null/undefined");this.ie.forEach((e=>e.$bind(t,s)))}$unbind(t){this.ie.forEach((e=>e.$unbind(t))),this.isBound=!1}addBinding(t){this.ie.push(t)}addChild(t){if(1!==t.vmKind)throw new Error("Spread binding does not support spreading custom attributes/template controllers");this.ctrl.addChild(t)}}const $u=t=>new yu([],t),ku="IController",xu="IInstruction",Cu="IRenderLocation",Su="IAuSlotsInfo";class Au{constructor(t){this.f=t}get $isResolver(){return!0}resolve(){const t=this.f;if(null===t)throw new Error("AUR7055");if(!Zo(t.name)||0===t.name.length)throw new Error("AUR0756");return t}}function Tu(t,e,i,s,n,r,o,a){const c=i.container.createChild();return c.registerResolver(t.HTMLElement,c.registerResolver(t.Element,c.registerResolver(nh,new me("ElementResolver",s)))),i=i instanceof jl?i:i.ctrl,c.registerResolver(Wl,new me(ku,i)),c.registerResolver(Th,new me(xu,n)),c.registerResolver(oh,null==o?Ru:new me(Cu,o)),c.registerResolver(wl,null==r?Eu:new Au(r)),c.registerResolver(Ch,null==a?Ou:new me(Su,a)),c.invoke(e.Type)}const Ru=new me(Cu),Eu=new Au(null),Ou=new me(Su,new Sh($e));var Pu;function ju(t){return function(e){return Nu.define(t,e)}}!function(t){t[t.None=0]="None",t[t.IgnoreAttr=1]="IgnoreAttr"}(Pu||(Pu={}));class Iu{constructor(t,e,i,s,n){this.Type=t,this.name=e,this.aliases=i,this.key=s,this.type=n}static create(t,e){let i,s;return Zo(t)?(i=t,s={name:i}):(i=t.name,s=t),new Iu(e,ft(Mu(e,"name"),i),pt(Mu(e,"aliases"),s.aliases,e.aliases),Lu(i),ft(Mu(e,"type"),s.type,e.type,null))}register(t){const{Type:e,key:i,aliases:s}=this;ve.singleton(i,e).register(t),ve.aliasTo(i,e).register(t),pi(s,Nu,i,t)}}const Uu=Fo("binding-command"),Lu=t=>`${Uu}:${t}`,Mu=(t,e)=>Mo(qo(e),t),Nu=Object.freeze({name:Uu,keyFrom:Lu,define(t,e){const i=Iu.create(t,e);return Bo(Uu,i,i.Type),Bo(Uu,i,i),Ho(e,Uu),i.Type},getAnnotation:Mu});let Bu=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"one-time"}build(t){var e;let i=t.attr.target,s=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:rt(i):(""===s&&1===t.def.type&&(s=rt(i)),i=t.bindable.property),new Oh(this.ep.parse(s,8),i,us.oneTime)}};Bu.inject=[Ma,Un],Bu=Uo([ju("one-time")],Bu);let Vu=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"to-view"}build(t){var e;let i=t.attr.target,s=t.attr.rawValue;return null==t.bindable?i=null!==(e=this.m.map(t.node,i))&&void 0!==e?e:rt(i):(""===s&&1===t.def.type&&(s=rt(i)),i=t.bindable.property),new Oh(this.ep.parse(s,8),i,us.toView)}};Vu.inject=[Ma,Un],Vu=Uo([ju("to-view")],Vu);let Du=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"from-view"}build(t){var e;const i=t.attr;let s=i.target,n=i.rawValue;return null==t.bindable?s=null!==(e=this.m.map(t.node,s))&&void 0!==e?e:rt(s):(""===n&&1===t.def.type&&(n=rt(s)),s=t.bindable.property),new Oh(this.ep.parse(n,8),s,us.fromView)}};Du.inject=[Ma,Un],Du=Uo([ju("from-view")],Du);let qu=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"two-way"}build(t){var e;const i=t.attr;let s=i.target,n=i.rawValue;return null==t.bindable?s=null!==(e=this.m.map(t.node,s))&&void 0!==e?e:rt(s):(""===n&&1===t.def.type&&(n=rt(s)),s=t.bindable.property),new Oh(this.ep.parse(n,8),s,us.twoWay)}};qu.inject=[Ma,Un],qu=Uo([ju("two-way")],qu);let Fu=class{constructor(t,e){this.type=0,this.m=t,this.ep=e}get name(){return"bind"}build(t){var e;const i=t.attr,s=t.bindable;let n,r,o=i.target,a=i.rawValue;return null==s?(r=this.m.isTwoWay(t.node,o)?us.twoWay:us.toView,o=null!==(e=this.m.map(t.node,o))&&void 0!==e?e:rt(o)):(""===a&&1===t.def.type&&(a=rt(o)),n=t.def.defaultBindingMode,r=s.mode===us.default||null==s.mode?null==n||n===us.default?us.toView:n:s.mode,o=s.property),new Oh(this.ep.parse(a,8),o,r)}};Fu.inject=[Ma,Un],Fu=Uo([ju("bind")],Fu);let Hu=class{constructor(t){this.type=0,this.ep=t}get name(){return"call"}build(t){const e=null===t.bindable?rt(t.attr.target):t.bindable.property;return new jh(this.ep.parse(t.attr.rawValue,12),e)}};Hu.inject=[Un],Hu=Uo([ju("call")],Hu);let Wu=class{constructor(t){this.type=0,this.ep=t}get name(){return"for"}build(t){const e=null===t.bindable?rt(t.attr.target):t.bindable.property;return new Ph(this.ep.parse(t.attr.rawValue,2),e)}};Wu.inject=[Un],Wu=Uo([ju("for")],Wu);let zu=class{constructor(t){this.type=1,this.ep=t}get name(){return"trigger"}build(t){return new qh(this.ep.parse(t.attr.rawValue,4),t.attr.target,!0,fs.none)}};zu.inject=[Un],zu=Uo([ju("trigger")],zu);let Ku=class{constructor(t){this.type=1,this.ep=t}get name(){return"delegate"}build(t){return new qh(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,fs.bubbling)}};Ku.inject=[Un],Ku=Uo([ju("delegate")],Ku);let Qu=class{constructor(t){this.type=1,this.ep=t}get name(){return"capture"}build(t){return new qh(this.ep.parse(t.attr.rawValue,4),t.attr.target,!1,fs.capturing)}};Qu.inject=[Un],Qu=Uo([ju("capture")],Qu);let Gu=class{constructor(t){this.type=1,this.ep=t}get name(){return"attr"}build(t){return new zh(t.attr.target,this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Gu.inject=[Un],Gu=Uo([ju("attr")],Gu);let Ju=class{constructor(t){this.type=1,this.ep=t}get name(){return"style"}build(t){return new zh("style",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Ju.inject=[Un],Ju=Uo([ju("style")],Ju);let _u=class{constructor(t){this.type=1,this.ep=t}get name(){return"class"}build(t){return new zh("class",this.ep.parse(t.attr.rawValue,8),t.attr.target)}};_u.inject=[Un],_u=Uo([ju("class")],_u);let Yu=class{constructor(t){this.type=1,this.ep=t}get name(){return"ref"}build(t){return new Ih(this.ep.parse(t.attr.rawValue,8),t.attr.target)}};Yu.inject=[Un],Yu=Uo([ju("ref")],Yu);let Zu=class{constructor(){this.type=1}get name(){return"...$attrs"}build(t){return new Kh}};Zu=Uo([ju("...$attrs")],Zu);const Xu=Dt.createInterface("ITemplateElementFactory",(t=>t.singleton(ed))),td={};class ed{constructor(t){this.p=t,this.ne=t.document.createElement("template")}createTemplate(t){var e;if(Zo(t)){let e=td[t];if(void 0===e){const i=this.ne;i.innerHTML=t;const s=i.content.firstElementChild;null==s||"TEMPLATE"!==s.nodeName||null!=s.nextElementSibling?(this.ne=this.p.document.createElement("template"),e=i):(i.content.removeChild(s),e=s),td[t]=e}return e.cloneNode(!0)}if("TEMPLATE"!==t.nodeName){const e=this.p.document.createElement("template");return e.content.appendChild(t),e}return null===(e=t.parentNode)||void 0===e||e.removeChild(t),t.cloneNode(!0)}}ed.inject=[Ia];class id{constructor(t,e,i,s,n,r){this.hasSlot=!1,this.Ce=Ko();const o=null!==s;this.c=e,this.root=null===n?this:n,this.def=t,this.ci=i,this.parent=s,this.re=o?s.re:e.get(Xu),this.de=o?s.de:e.get(ya),this.ep=o?s.ep:e.get(Un),this.m=o?s.m:e.get(Ma),this.Ft=o?s.Ft:e.get(je),this.p=o?s.p:e.get(Ia),this.localEls=o?s.localEls:new Set,this.rows=null!=r?r:[]}ke(t){var e,i;(null!==(e=(i=this.root).deps)&&void 0!==e?e:i.deps=[]).push(t),this.root.c.register(t)}h(t){const e=this.p.document.createElement(t);return"template"===t&&this.p.document.adoptNode(e.content),e}ae(t){return this.c.find(Jc,t)}ue(t){return this.c.find(Ic,t)}xe(t){return new id(this.def,this.c,this.ci,this,this.root,t)}ce(t){if(this.root!==this)return this.root.ce(t);const e=t.command;if(null===e)return null;let i=this.Ce[e];if(void 0===i){if(i=this.c.create(Nu,e),null===i)throw new Error(`AUR0713:${e}`);this.Ce[e]=i}return i}}function sd(t){const e=t.length;let i=0,s=0;for(;e>s;){if(i=t.charCodeAt(s),92===i)++s;else{if(58===i)return!0;if(36===i&&123===t.charCodeAt(s+1))return!1}++s}return!1}function nd(){ad.node=ad.attr=ad.bindable=ad.def=null}const rd={projections:null},od={name:"unnamed"},ad={node:null,attr:null,bindable:null,def:null},cd=Object.assign(Ko(),{id:!0,name:!0,"au-slot":!0,"as-element":!0}),ld={checkbox:1,radio:1},hd=new WeakMap;class ud{constructor(t,e,i){this.attrs=t,this.bindables=e,this.primary=i}static from(t,e){let i=hd.get(t);if(null==i){const s=t.bindables,n=Ko(),r=e?void 0===t.defaultBindingMode?us.default:t.defaultBindingMode:us.default;let o,a,c,l,h=!1;for(a in s){if(o=s[a],l=o.attribute,!0===o.primary){if(h)throw new Error(`AUR0714:${t.name}`);h=!0,c=o}else h||null!=c||(c=o);n[l]=sa.create(a,t.Type,o)}null==o&&e&&(c=n.value=sa.create("value",t.Type,{mode:r})),hd.set(t,i=new ud(n,s,c))}return i}}var dd;!function(t){t.property="property",t.attribute="attribute",t.mode="mode"}(dd||(dd={}));const pd=Object.freeze(["property","attribute","mode"]),fd="as-custom-element";function gd(t,e){const i=t.getAttribute(fd);if(null===i||""===i)throw new Error("AUR0715");if(e.has(i))throw new Error(`AUR0716:${i}`);return e.add(i),t.removeAttribute(fd),i}function vd(t){switch(t.getAttribute("mode")){case"oneTime":return us.oneTime;case"toView":return us.toView;case"fromView":return us.fromView;case"twoWay":return us.twoWay;default:return us.default}}const md=Dt.createInterface("ITemplateCompilerHooks"),wd=new WeakMap,bd=Fo("compiler-hooks");Object.freeze({name:bd,define(t){let e=wd.get(t);return void 0===e&&(wd.set(t,e=new yd(t)),Bo(bd,e,t),Ho(t,bd)),t}});class yd{constructor(t){this.Type=t}get name(){return""}register(t){t.register(ve.singleton(md,this.Type))}}const $d=Jc.generateName;class kd{constructor(t){this.mode=t,this.Ae=new Map}bind(t,e,i){this.Ae.set(i,i.mode),i.mode=this.mode}unbind(t,e,i){i.mode=this.Ae.get(i),this.Ae.delete(i)}}class xd extends kd{constructor(){super(us.oneTime)}}class Cd extends kd{constructor(){super(us.toView)}}class Sd extends kd{constructor(){super(us.fromView)}}class Ad extends kd{constructor(){super(us.twoWay)}}$i("oneTime")(xd),$i("toView")(Cd),$i("fromView")(Sd),$i("twoWay")(Ad);class Td extends Ci{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.taskQueue=t.locator.get(Ce).taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.queueTask((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null),this.binding.handleChange(t,e,i)}updateSource(t,e){this.queueTask((()=>this.binding.updateSource(t,e)))}queueTask(t){const e=this.task;this.task=this.taskQueue.queueTask((()=>(this.task=null,t())),this.opts),null==e||e.cancel()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,this.binding.$unbind(t)}}$i("debounce")(Td);class Rd{constructor(t){this.Zt=new Map,this.Se=t}bind(t,e,i,...s){if(!("handleChange"in i))throw new Error("AUR0817");if(0===s.length)throw new Error("AUR0818");let n;for(n of(this.Zt.set(i,s),s))this.Se.addSignalListener(n,i)}unbind(t,e,i){const s=this.Zt.get(i);let n;for(n of(this.Zt.delete(i),s))this.Se.removeSignalListener(n,i)}}Rd.inject=[wi],$i("signal")(Rd);class Ed extends Ci{constructor(t,e){super(t,e),this.opts={delay:200},this.firstArg=null,this.task=null,this.lastCall=0,this.delay=0,this.p=t.locator.get(Ce),this.Re=this.p.taskQueue,e.args.length>0&&(this.firstArg=e.args[0])}callSource(t){this.Ee((()=>this.binding.callSource(t)))}handleChange(t,e,i){null!==this.task&&(this.task.cancel(),this.task=null,this.lastCall=this.p.performanceNow()),this.binding.handleChange(t,e,i)}updateSource(t,e){this.Ee((()=>this.binding.updateSource(t,e)))}Ee(t){const e=this.opts,i=this.p,s=this.lastCall+e.delay-i.performanceNow();if(s>0){const n=this.task;e.delay=s,this.task=this.Re.queueTask((()=>{this.lastCall=i.performanceNow(),this.task=null,e.delay=this.delay,t()}),e),null==n||n.cancel()}else this.lastCall=i.performanceNow(),t()}$bind(t,e){if(null!==this.firstArg){const i=Number(this.firstArg.evaluate(t,e,this.locator,null));this.opts.delay=this.delay=isNaN(i)?200:i}this.binding.$bind(t,e)}$unbind(t){var e;null===(e=this.task)||void 0===e||e.cancel(),this.task=null,super.$unbind(t)}}$i("throttle")(Ed);const Od=new class{constructor(){this.type=6}getValue(t,e){return t.getAttribute(e)}setValue(t,e,i,s){null==t?i.removeAttribute(s):i.setAttribute(s,t)}};class Pd{bind(t,e,i){i.targetObserver=Od}unbind(t,e,i){}}function jd(t){const e=t.composedPath()[0];if(this.target===e)return this.selfEventCallSource(t)}$i("attr")(Pd);class Id{bind(t,e,i){if(!i.callSource||!i.targetEvent)throw new Error("AUR0801");i.selfEventCallSource=i.callSource,i.callSource=jd}unbind(t,e,i){i.callSource=i.selfEventCallSource,i.selfEventCallSource=null}}$i("self")(Id);const Ud=Ko();class Ld{constructor(t){this.ns=t,this.type=6}static forNs(t){var e;return null!==(e=Ud[t])&&void 0!==e?e:Ud[t]=new Ld(t)}getValue(t,e){return t.getAttributeNS(this.ns,e)}setValue(t,e,i,s){null==t?i.removeAttributeNS(this.ns,s):i.setAttributeNS(this.ns,s,t)}}function Md(t,e){return t===e}class Nd{constructor(t,e,i,s){this.handler=i,this.type=7,this.v=void 0,this.ov=void 0,this.Be=void 0,this.Ie=void 0,this.f=0,this.o=t,this.oL=s}getValue(){return this.v}setValue(t,e){const i=this.v;t!==i&&(this.v=t,this.ov=i,this.f=e,this.Te(),this.De(),this.queue.add(this))}handleCollectionChange(t,e){this.De()}handleChange(t,e,i){this.De()}De(){const t=this.v,e=this.o,i=Qo.call(e,"model")?e.model:e.value,s="radio"===e.type,n=void 0!==e.matcher?e.matcher:Md;if(s)e.checked=!!n(t,i);else if(!0===t)e.checked=!0;else{let s=!1;if(t instanceof Array)s=-1!==t.findIndex((t=>!!n(t,i)));else if(t instanceof Set){for(const e of t)if(n(e,i)){s=!0;break}}else if(t instanceof Map)for(const e of t){const t=e[0],r=e[1];if(n(t,i)&&!0===r){s=!0;break}}e.checked=s}}handleEvent(){let t=this.ov=this.v;const e=this.o,i=Qo.call(e,"model")?e.model:e.value,s=e.checked,n=void 0!==e.matcher?e.matcher:Md;if("checkbox"===e.type){if(t instanceof Array){const e=t.findIndex((t=>!!n(t,i)));return void(s&&-1===e?t.push(i):s||-1===e||t.splice(e,1))}if(t instanceof Set){const e={};let r=e;for(const e of t)if(!0===n(e,i)){r=e;break}return void(s&&r===e?t.add(i):s||r===e||t.delete(r))}if(t instanceof Map){let e;for(const s of t){const t=s[0];if(!0===n(t,i)){e=t;break}}return void t.set(e,s)}t=s}else{if(!s)return;t=i}this.v=t,this.queue.add(this)}start(){this.handler.subscribe(this.o,this),this.Te()}stop(){var t,e;this.handler.dispose(),null===(t=this.Be)||void 0===t||t.unsubscribe(this),this.Be=void 0,null===(e=this.Ie)||void 0===e||e.unsubscribe(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&this.start()}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.stop()}flush(){Bd=this.ov,this.ov=this.v,this.subs.notify(this.v,Bd,this.f)}Te(){var t,e,i,s,n,r,o;const a=this.o;null===(n=null!==(t=this.Ie)&&void 0!==t?t:this.Ie=null!==(i=null===(e=a.$observers)||void 0===e?void 0:e.model)&&void 0!==i?i:null===(s=a.$observers)||void 0===s?void 0:s.value)||void 0===n||n.subscribe(this),null===(r=this.Be)||void 0===r||r.unsubscribe(this),this.Be=void 0,"checkbox"===a.type&&(null===(o=this.Be=function(t,e){return t instanceof Array?e.getArrayObserver(t):t instanceof Map?e.getMapObserver(t):t instanceof Set?e.getSetObserver(t):void 0}(this.v,this.oL))||void 0===o||o.subscribe(this))}}let Bd;ws(Nd),Cs(Nd);const Vd=Object.prototype.hasOwnProperty,Dd={childList:!0,subtree:!0,characterData:!0};function qd(t,e){return t===e}class Fd{constructor(t,e,i,s){this.type=7,this.v=void 0,this.ov=void 0,this.H=!1,this.Pe=void 0,this.Oe=void 0,this.iO=!1,this.o=t,this.oL=s,this.handler=i}getValue(){return this.iO?this.v:this.o.multiple?function(t){const e=[];if(0===t.length)return e;const i=t.length;let s,n=0;for(;i>n;)s=t[n],s.selected&&(e[e.length]=Vd.call(s,"model")?s.model:s.value),++n;return e}(this.o.options):this.o.value}setValue(t,e){this.ov=this.v,this.v=t,this.H=t!==this.ov,this.$e(t instanceof Array?t:null),0==(256&e)&&this.K()}K(){this.H&&(this.H=!1,this.syncOptions())}handleCollectionChange(){this.syncOptions()}syncOptions(){var t;const e=this.v,i=this.o,s=Array.isArray(e),n=null!==(t=i.matcher)&&void 0!==t?t:qd,r=i.options;let o=r.length;for(;o-- >0;){const t=r[o],i=Vd.call(t,"model")?t.model:t.value;t.selected=s?-1!==e.findIndex((t=>!!n(i,t))):!!n(i,e)}}syncValue(){const t=this.o,e=t.options,i=e.length,s=this.v;let n=0;if(t.multiple){if(!(s instanceof Array))return!0;let r;const o=t.matcher||qd,a=[];for(;n<i;)r=e[n],r.selected&&a.push(Vd.call(r,"model")?r.model:r.value),++n;let c;for(n=0;n<s.length;)c=s[n],-1===a.findIndex((t=>!!o(c,t)))?s.splice(n,1):++n;for(n=0;n<a.length;)c=a[n],-1===s.findIndex((t=>!!o(c,t)))&&s.push(c),++n;return!1}let r,o=null;for(;n<i;){if(r=e[n],r.selected){o=Vd.call(r,"model")?r.model:r.value;break}++n}return this.ov=this.v,this.v=o,!0}Le(){(this.Oe=new this.o.ownerDocument.defaultView.MutationObserver(this.qe.bind(this))).observe(this.o,Dd),this.$e(this.v instanceof Array?this.v:null),this.iO=!0}Me(){var t;this.Oe.disconnect(),null===(t=this.Pe)||void 0===t||t.unsubscribe(this),this.Oe=this.Pe=void 0,this.iO=!1}$e(t){var e;if(null===(e=this.Pe)||void 0===e||e.unsubscribe(this),this.Pe=void 0,null!=t){if(!this.o.multiple)throw new Error("AUR0654");(this.Pe=this.oL.getArrayObserver(t)).subscribe(this)}}handleEvent(){this.syncValue()&&this.queue.add(this)}qe(t){this.syncOptions(),this.syncValue()&&this.queue.add(this)}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.Le())}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&(this.handler.dispose(),this.Me())}flush(){Hd=this.ov,this.ov=this.v,this.subs.notify(this.v,Hd,0)}}let Hd,Wd;ws(Fd),Cs(Fd);class zd{constructor(t){this.obj=t,this.type=6,this.value="",this.ov="",this.styles={},this.version=0,this.H=!1}getValue(){return this.obj.style.cssText}setValue(t,e){this.value=t,this.H=t!==this.ov,0==(256&e)&&this.K()}Ue(t){const e=[],i=/url\([^)]+$/;let s,n,r,o,a=0,c="";for(;a<t.length;)s=t.indexOf(";",a),-1===s&&(s=t.length),c+=t.substring(a,s),a=s+1,i.test(c)?c+=";":(n=c.indexOf(":"),r=c.substring(0,n).trim(),o=c.substring(n+1).trim(),e.push([r,o]),c="");return e}Fe(t){let e,i;const s=[];for(i in t)if(e=t[i],null!=e)if(Zo(e)){if(i.startsWith("--")){s.push([i,e]);continue}s.push([at(i),e])}else s.push(...this.Ve(e));return s}_e(t){const e=t.length;if(e>0){const i=[];let s=0;for(;e>s;++s)i.push(...this.Ve(t[s]));return i}return $e}Ve(t){return Zo(t)?this.Ue(t):t instanceof Array?this._e(t):t instanceof Object?this.Fe(t):$e}K(){if(this.H){this.H=!1;const t=this.value,e=this.styles,i=this.Ve(t);let s,n,r,o,a=this.version;this.ov=t;let c=0;const l=i.length;for(;c<l;++c)n=i[c],r=n[0],o=n[1],this.setProperty(r,o),e[r]=a;if(this.styles=e,this.version+=1,0===a)return;for(s in a-=1,e)Object.prototype.hasOwnProperty.call(e,s)&&e[s]===a&&this.obj.style.removeProperty(s)}}setProperty(t,e){let i="";null!=e&&Yo(e.indexOf)&&e.includes("!important")&&(i="important",e=e.replace("!important","")),this.obj.style.setProperty(t,e,i)}bind(t){this.value=this.ov=this.obj.style.cssText}}class Kd{constructor(t,e,i){this.handler=i,this.type=7,this.v="",this.ov="",this.H=!1,this.o=t,this.k=e}getValue(){return this.v}setValue(t,e){Object.is(t,this.v)||(this.ov=this.v,this.v=t,this.H=!0,this.handler.config.readonly||0!=(256&e)||this.K(e))}K(t){var e;this.H&&(this.H=!1,this.o[this.k]=null!==(e=this.v)&&void 0!==e?e:this.handler.config.default,0==(2&t)&&this.queue.add(this))}handleEvent(){this.ov=this.v,this.v=this.o[this.k],this.ov!==this.v&&(this.H=!1,this.queue.add(this))}subscribe(t){this.subs.add(t)&&1===this.subs.count&&(this.handler.subscribe(this.o,this),this.v=this.ov=this.o[this.k])}unsubscribe(t){this.subs.remove(t)&&0===this.subs.count&&this.handler.dispose()}flush(){Wd=this.ov,this.ov=this.v,this.subs.notify(this.v,Wd,0)}}ws(Kd),Cs(Kd);const Qd="http://www.w3.org/1999/xlink",Gd="http://www.w3.org/XML/1998/namespace",Jd="http://www.w3.org/2000/xmlns/",_d=Object.assign(Ko(),{"xlink:actuate":["actuate",Qd],"xlink:arcrole":["arcrole",Qd],"xlink:href":["href",Qd],"xlink:role":["role",Qd],"xlink:show":["show",Qd],"xlink:title":["title",Qd],"xlink:type":["type",Qd],"xml:lang":["lang",Gd],"xml:space":["space",Gd],xmlns:["xmlns",Jd],"xmlns:xlink":["xlink",Jd]}),Yd=new $o;Yd.type=6;class Zd{constructor(t){var e;this.type=null!==(e=t.type)&&void 0!==e?e:Kd,this.events=t.events,this.readonly=t.readonly,this.default=t.default}}class Xd{constructor(t,e,i,s){this.locator=t,this.platform=e,this.dirtyChecker=i,this.svgAnalyzer=s,this.allowDirtyCheck=!0,this.je=Ko(),this.Ne=Ko(),this.We=Ko(),this.He=Ko();const n=["change","input"],r={events:n,default:""};this.useConfig({INPUT:{value:r,valueAsNumber:{events:n,default:0},checked:{type:Nd,events:n},files:{events:n,readonly:!0}},SELECT:{value:{type:Fd,events:["change"],default:""}},TEXTAREA:{value:r}});const o={events:["change","input","blur","keyup","paste"],default:""},a={events:["scroll"],default:0};this.useConfigGlobal({scrollTop:a,scrollLeft:a,textContent:o,innerHTML:o}),this.overrideAccessorGlobal("css","style","class"),this.overrideAccessor({INPUT:["value","checked","model"],SELECT:["value"],TEXTAREA:["value"]})}static register(t){ve.aliasTo(To,Xd).register(t),ve.singleton(To,Xd).register(t)}handles(t,e){return t instanceof this.platform.Node}useConfig(t,e,i){var s,n;const r=this.je;let o;if(Zo(t))o=null!==(s=r[t])&&void 0!==s?s:r[t]=Ko(),null==o[e]?o[e]=new Zd(i):tp(t,e);else for(const i in t){o=null!==(n=r[i])&&void 0!==n?n:r[i]=Ko();const s=t[i];for(e in s)null==o[e]?o[e]=new Zd(s[e]):tp(i,e)}}useConfigGlobal(t,e){const i=this.Ne;if("object"==typeof t)for(const e in t)null==i[e]?i[e]=new Zd(t[e]):tp("*",e);else null==i[t]?i[t]=new Zd(e):tp("*",t)}getAccessor(t,e,i){var s;if(e in this.He||e in(null!==(s=this.We[t.tagName])&&void 0!==s?s:ke))return this.getObserver(t,e,i);switch(e){case"src":case"href":case"role":return Od;default:{const i=_d[e];return void 0!==i?Ld.forNs(i[1]):Jo(t,e,this.svgAnalyzer)?Od:Yd}}}overrideAccessor(t,e){var i,s,n,r;let o;if(Zo(t))o=null!==(i=(n=this.We)[t])&&void 0!==i?i:n[t]=Ko(),o[e]=!0;else for(const e in t)for(const i of t[e])o=null!==(s=(r=this.We)[e])&&void 0!==s?s:r[e]=Ko(),o[i]=!0}overrideAccessorGlobal(...t){for(const e of t)this.He[e]=!0}getObserver(t,e,i){var s,n;switch(e){case"role":return Od;case"class":return new _c(t);case"css":case"style":return new zd(t)}const r=null!==(n=null===(s=this.je[t.tagName])||void 0===s?void 0:s[e])&&void 0!==n?n:this.Ne[e];if(null!=r)return new r.type(t,e,new $h(r),i,this.locator);const o=_d[e];if(void 0!==o)return Ld.forNs(o[1]);if(Jo(t,e,this.svgAnalyzer))return Od;if(e in t.constructor.prototype){if(this.allowDirtyCheck)return this.dirtyChecker.createProperty(t,e);throw new Error(`AUR0652:${String(e)}`)}return new xo(t,e)}}function tp(t,e){throw new Error(`AUR0653:${String(e)}@${t}`)}Xd.inject=[Wt,Ia,go,Ua];class ep{constructor(t){this.oL=t}bind(t,e,i,...s){if(0===s.length)throw new Error("AUR0802");if(i.mode!==us.twoWay&&i.mode!==us.fromView)throw new Error("AUR0803");const n=this.oL.getObserver(i.target,i.targetProperty);if(!n.handler)throw new Error("AUR0804");i.targetObserver=n;const r=n.handler;n.originalHandler=r,n.handler=new $h(new Zd({default:r.config.default,events:s,readonly:r.config.readonly}))}unbind(t,e,i){i.targetObserver.handler.dispose(),i.targetObserver.handler=i.targetObserver.originalHandler,i.targetObserver.originalHandler=null}}ep.inject=[Ao],$i("updateTrigger")(ep);class ip{constructor(t,e){this.ze=t,this.p=e,this.Ge=!1}binding(){this.valueChanged()}valueChanged(){this.$controller.isActive?this.Xe():this.Ge=!0}attached(){this.Ge&&(this.Ge=!1,this.Xe()),this.ze.addEventListener("focus",this),this.ze.addEventListener("blur",this)}afterDetachChildren(){const t=this.ze;t.removeEventListener("focus",this),t.removeEventListener("blur",this)}handleEvent(t){"focus"===t.type?this.value=!0:this.Ke||(this.value=!1)}Xe(){const t=this.ze,e=this.Ke,i=this.value;i&&!e?t.focus():!i&&e&&t.blur()}get Ke(){return this.ze===this.p.document.activeElement}}ip.inject=[nh,Ia],Uo([Xo({mode:us.twoWay})],ip.prototype,"value",void 0),Tc("focus")(ip);let sp=class{constructor(t,e,i){this.el=t,this.p=e,this.Ye=!1,this.Qe=null,this.$val="",this.$prio="",this.update=()=>{this.Qe=null,Boolean(this.value)!==this.Ze&&(this.Ze===this.Je?(this.Ze=!this.Je,this.$val=this.el.style.getPropertyValue("display"),this.$prio=this.el.style.getPropertyPriority("display"),this.el.style.setProperty("display","none","important")):(this.Ze=this.Je,this.el.style.setProperty("display",this.$val,this.$prio),""===this.el.getAttribute("style")&&this.el.removeAttribute("style")))},this.Ze=this.Je="hide"!==i.alias}binding(){this.Ye=!0,this.update()}detaching(){var t;this.Ye=!1,null===(t=this.Qe)||void 0===t||t.cancel(),this.Qe=null}valueChanged(){this.Ye&&null===this.Qe&&(this.Qe=this.p.domWriteQueue.queueTask(this.update))}};Uo([Xo],sp.prototype,"value",void 0),sp=Uo([Lo(0,nh),Lo(1,Ia),Lo(2,Th)],sp),function(...t){return function(e){const i=hi("aliases"),s=ai(i,e);void 0===s?li(i,t,e):s.push(...t)}}("hide")(sp),Tc("show")(sp);class np{constructor(t,e,i){this.id=ht("au$component"),this.strict=!1,this.p=i,this.ti=i.document.createElement("div"),this.view=t.create(),function(t,e){if(void 0===t.platform||t instanceof t.platform.Node)ch.set(t,e);else{const i=t.childNodes;for(let t=0,s=i.length;t<s;++t)ch.set(i[t],e)}}(this.view.nodes,e)}attaching(t,e,i){null==this.callbackContext&&(this.callbackContext=this.$controller.scope.bindingContext);const s=this.ti=this.ei();return this.view.setHost(s),this.ii(t,s,i)}detaching(t,e,i){return this.si(t,this.ti,i)}targetChanged(){const{$controller:t}=this;if(!t.isActive)return;const e=this.ti,i=this.ti=this.ei();if(e===i)return;this.view.setHost(i);const s=wt(this.si(null,i,t.flags),(()=>this.ii(null,i,t.flags)));s instanceof Promise&&s.catch((t=>{throw t}))}ii(t,e,i){const{activating:s,callbackContext:n,view:r}=this;return r.setHost(e),wt(null==s?void 0:s.call(n,e,r),(()=>this.ni(t,e,i)))}ni(t,e,i){const{$controller:s,view:n}=this;return null!==t?wt(n.activate(null!=t?t:n,s,i,s.scope),(()=>this.ri(e))):(n.nodes.appendTo(e),this.ri(e))}ri(t){const{activated:e,callbackContext:i,view:s}=this;return null==e?void 0:e.call(i,t,s)}si(t,e,i){const{deactivating:s,callbackContext:n,view:r}=this;return wt(null==s?void 0:s.call(n,e,r),(()=>this.oi(t,e,i)))}oi(t,e,i){const{$controller:s,view:n}=this;return null!==t?wt(n.deactivate(t,s,i),(()=>this.li(e))):(n.nodes.remove(),this.li(e))}li(t){const{deactivated:e,callbackContext:i,view:s}=this;return null==e?void 0:e.call(i,t,s)}ei(){const t=this.p,e=t.document;let i=this.target,s=this.renderContext;if(""===i){if(this.strict)throw new Error("AUR0811");return e.body}if(Zo(i)){let n=e;Zo(s)&&(s=e.querySelector(s)),s instanceof t.Node&&(n=s),i=n.querySelector(i)}if(i instanceof t.Node)return i;if(null==i){if(this.strict)throw new Error("AUR0812");return e.body}return i}dispose(){this.view.dispose(),this.view=void 0,this.callbackContext=null}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}np.inject=[wl,oh,Ia],Uo([Xo({primary:!0})],np.prototype,"target",void 0),Uo([Xo({callback:"targetChanged"})],np.prototype,"renderContext",void 0),Uo([Xo()],np.prototype,"strict",void 0),Uo([Xo()],np.prototype,"deactivating",void 0),Uo([Xo()],np.prototype,"activating",void 0),Uo([Xo()],np.prototype,"deactivated",void 0),Uo([Xo()],np.prototype,"activated",void 0),Uo([Xo()],np.prototype,"callbackContext",void 0),Rc("portal")(np);class rp{constructor(t,e,i){this.fs=i,this.id=ht("au$component"),this.view=t.create().setLocation(e)}attaching(t,e,i){const{$controller:s}=this;return this.view.activate(t,s,i|this.fs,s.scope)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}class op extends rp{constructor(t,e){super(t,e,512)}}op.inject=[wl,oh];class ap extends rp{constructor(t,e){super(t,e,128)}}ap.inject=[wl,oh],Rc("frequent-mutations")(op),Rc("observe-shallow")(ap);class cp{constructor(t,e,i){this.ifFactory=t,this.location=e,this.work=i,this.id=ht("au$component"),this.elseFactory=void 0,this.elseView=void 0,this.ifView=void 0,this.view=void 0,this.value=!1,this.cache=!0,this.pending=void 0,this.hi=!1,this.ai=0}attaching(t,e,i){let s;const n=this.$controller,r=this.ai++,o=()=>!this.hi&&this.ai===r+1;return wt(this.pending,(()=>{var e;o()&&(this.pending=void 0,s=this.value?this.view=this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.view=this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=s&&(s.setLocation(this.location),this.pending=wt(s.activate(t,n,i,n.scope),(()=>{o()&&(this.pending=void 0)}))))}))}detaching(t,e,i){return this.hi=!0,wt(this.pending,(()=>{var e;this.hi=!1,this.pending=void 0,null===(e=this.view)||void 0===e||e.deactivate(t,this.$controller,i)}))}valueChanged(t,e,i){if(!this.$controller.isActive)return;if((t=!!t)==(e=!!e))return;this.work.start();const s=this.view,n=this.$controller,r=this.ai++,o=()=>!this.hi&&this.ai===r+1;let a;return wt(wt(this.pending,(()=>this.pending=wt(null==s?void 0:s.deactivate(s,n,i),(()=>{var e;if(o()&&(a=this.view=t?this.ifView=this.cache&&null!=this.ifView?this.ifView:this.ifFactory.create():this.elseView=this.cache&&null!=this.elseView?this.elseView:null===(e=this.elseFactory)||void 0===e?void 0:e.create(),null!=a))return a.setLocation(this.location),wt(a.activate(a,n,i,n.scope),(()=>{o()&&(this.pending=void 0)}))})))),(()=>this.work.finish()))}dispose(){var t,e;null===(t=this.ifView)||void 0===t||t.dispose(),null===(e=this.elseView)||void 0===e||e.dispose(),this.ifView=this.elseView=this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}cp.inject=[wl,oh,Zl],Uo([Xo],cp.prototype,"value",void 0),Uo([Xo({set:t=>""===t||!!t&&"false"!==t})],cp.prototype,"cache",void 0),Rc("if")(cp);class lp{constructor(t){this.factory=t,this.id=ht("au$component")}link(t,e,i,s){const n=t.children,r=n[n.length-1];if(r instanceof cp)r.elseFactory=this.factory;else{if(!(r.viewModel instanceof cp))throw new Error("AUR0810");r.viewModel.elseFactory=this.factory}}}function hp(t){t.dispose()}lp.inject=[wl],Rc({name:"else"})(lp);const up=[38962,36913];class dp{constructor(t,e,i){this.l=t,this.ui=e,this.f=i,this.id=ht("au$component"),this.views=[],this.key=void 0,this.fi=void 0,this.di=!1,this.mi=!1,this.vi=null,this.pi=void 0,this.gi=!1}binding(t,e,i){const s=this.ui.bindings,n=s.length;let r,o,a=0;for(;n>a;++a)if(r=s[a],r.target===this&&"items"===r.targetProperty){o=this.forOf=r.sourceExpression,this.wi=r;let t=o.iterable;for(;null!=t&&up.includes(t.$kind);)t=t.expression,this.di=!0;this.vi=t;break}this.bi(i);const c=o.declaration;(this.gi=90137===c.$kind||106521===c.$kind)||(this.local=c.evaluate(i,this.$controller.scope,r.locator,null))}attaching(t,e,i){return this.xi(i),this.yi(t,i)}detaching(t,e,i){return this.bi(i),this.ki(t,i)}itemsChanged(t){const{$controller:e}=this;if(!e.isActive)return;t|=e.flags,this.bi(t),this.xi(t);const i=wt(this.ki(null,t),(()=>this.yi(null,t)));i instanceof Promise&&i.catch((t=>{throw t}))}handleCollectionChange(t,e){const{$controller:i}=this;if(i.isActive){if(this.di){if(this.mi)return;return this.mi=!0,this.items=this.forOf.iterable.evaluate(e,i.scope,this.wi.locator,null),void(this.mi=!1)}if(e|=i.flags,this.xi(e),void 0===t){const t=wt(this.ki(null,e),(()=>this.yi(null,e)));t instanceof Promise&&t.catch((t=>{throw t}))}else{const i=this.views.length;if(function(t){let e=0,i=0;const s=t.length;for(let n=0;n<s;++n){for(;t.deletedItems[i]<=n-e;)++i,--e;-2===t[n]?++e:t[n]+=e}}(t),t.deletedItems.length>0){t.deletedItems.sort(ut);const s=wt(this.Ci(t,e),(()=>this.Ai(i,t,e)));s instanceof Promise&&s.catch((t=>{throw t}))}else this.Ai(i,t,e)}}}bi(t){var e;const i=this.$controller.scope;let s=this.Si,n=this.di;n&&(s=this.Si=null!==(e=this.vi.evaluate(t,i,this.wi.locator,null))&&void 0!==e?e:null,n=this.di=!Object.is(this.items,s));const r=this.fi;if(4&t)void 0!==r&&r.unsubscribe(this);else if(this.$controller.isActive){const t=this.fi=function(t){let e;return t instanceof Array?e=Xs(t):t instanceof Map?e=kn(t):t instanceof Set&&(e=un(t)),e}(n?s:this.items);r!==t&&r&&r.unsubscribe(this),t&&t.subscribe(this)}}xi(t){const e=this.items;if(e instanceof Array)return void(this.pi=e);if(void 0===this.forOf)return;const i=[];this.forOf.iterate(t,e,((t,e,s)=>{i[e]=s})),this.pi=i}yi(t,e){let i,s,n,r;const{$controller:o,f:a,local:c,l,items:h}=this,u=o.scope,d=this.forOf,p=d.count(e,h),f=this.views=Array(p);if(d.iterate(e,h,((h,g,v)=>{n=f[g]=a.create().setLocation(l),n.nodes.unlink(),this.gi?d.declaration.assign(e,r=vi.fromParent(u,gi.create()),this.wi.locator,v):r=vi.fromParent(u,gi.create(c,v)),vp(r.overrideContext,g,p),s=n.activate(null!=t?t:n,o,e,r),s instanceof Promise&&(null!=i?i:i=[]).push(s)})),void 0!==i)return 1===i.length?i[0]:Promise.all(i)}ki(t,e){let i,s,n,r=0;const{views:o,$controller:a}=this,c=o.length;for(;c>r;++r)n=o[r],n.release(),s=n.deactivate(null!=t?t:n,a,e),s instanceof Promise&&(null!=i?i:i=[]).push(s);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}Ci(t,e){let i,s,n;const{$controller:r,views:o}=this,a=t.deletedItems,c=a.length;let l=0;for(;c>l;++l)n=o[a[l]],n.release(),s=n.deactivate(n,r,e),s instanceof Promise&&(null!=i?i:i=[]).push(s);l=0;let h=0;for(;c>l;++l)h=a[l]-l,o.splice(h,1);if(void 0!==i)return 1===i.length?i[0]:Promise.all(i)}Ai(t,e,i){var s;let n,r,o,a,c=0;const{$controller:l,f:h,local:u,pi:d,l:p,views:f}=this,g=e.length;for(;g>c;++c)-2===e[c]&&(o=h.create(),f.splice(c,0,o));if(f.length!==g)throw new Error(`AUR0814:${f.length}!=${g}`);const v=l.scope,m=e.length;!function(t,e){const i=t.slice(),s=e.length;let n=0,r=0;for(;n<s;)r=e[n],-2!==r&&(t[n]=i[r]),++n}(f,e);const w=function(t){const e=t.length;e>pp&&(pp=e,fp=new Int32Array(e),gp=new Int32Array(e));let i=0,s=0,n=0,r=0,o=0,a=0,c=0,l=0;for(;r<e;r++)if(s=t[r],-2!==s){if(o=fp[i],n=t[o],-2!==n&&n<s){gp[r]=o,fp[++i]=r;continue}for(a=0,c=i;a<c;)l=a+c>>1,n=t[fp[l]],-2!==n&&n<s?a=l+1:c=l;n=t[fp[a]],(s<n||-2===n)&&(a>0&&(gp[r]=fp[a-1]),fp[a]=r)}r=++i;const h=new Int32Array(r);for(s=fp[i-1];i-- >0;)h[i]=s,s=gp[s];for(;r-- >0;)fp[r]=0;return h}(e),b=w.length;let y,$=b-1;for(c=m-1;c>=0;--c)o=f[c],y=f[c+1],o.nodes.link(null!==(s=null==y?void 0:y.nodes)&&void 0!==s?s:p),-2===e[c]?(this.gi?this.forOf.declaration.assign(i,a=vi.fromParent(v,gi.create()),this.wi.locator,d[c]):a=vi.fromParent(v,gi.create(u,d[c])),vp(a.overrideContext,c,m),o.setLocation(p),r=o.activate(o,l,i,a),r instanceof Promise&&(null!=n?n:n=[]).push(r)):$<0||1===b||c!==w[$]?(vp(o.scope.overrideContext,c,m),o.nodes.insertBefore(o.location)):(t!==m&&vp(o.scope.overrideContext,c,m),--$);if(void 0!==n)return 1===n.length?n[0]:Promise.all(n)}dispose(){this.views.forEach(hp),this.views=void 0}accept(t){const{views:e}=this;if(void 0!==e)for(let i=0,s=e.length;i<s;++i)if(!0===e[i].accept(t))return!0}}dp.inject=[oh,Wl,wl],Uo([Xo],dp.prototype,"items",void 0),Rc("repeat")(dp);let pp=16,fp=new Int32Array(pp),gp=new Int32Array(pp);function vp(t,e,i){const s=0===e,n=e===i-1,r=e%2==0;t.$index=e,t.$first=s,t.$last=n,t.$middle=!s&&!n,t.$even=r,t.$odd=!r,t.$length=i}class mp{constructor(t,e){this.id=ht("au$component"),this.id=ht("au$component"),this.view=t.create().setLocation(e)}valueChanged(t,e,i){const s=this.$controller,n=this.view.bindings;let r,o=0,a=0;if(s.isActive&&null!=n)for(r=vi.fromParent(s.scope,void 0===t?{}:t),a=n.length;a>o;++o)n[o].$bind(2,r)}attaching(t,e,i){const{$controller:s,value:n}=this,r=vi.fromParent(s.scope,void 0===n?{}:n);return this.view.activate(t,s,i,r)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}mp.inject=[wl,oh],Uo([Xo],mp.prototype,"value",void 0),Rc("with")(mp);let wp=class{constructor(t,e){this.f=t,this.l=e,this.id=ht("au$component"),this.cases=[],this.activeCases=[],this.promise=void 0}link(t,e,i,s){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const s=this.view,n=this.$controller;return this.queue((()=>s.activate(t,n,i,n.scope))),this.queue((()=>this.swap(t,i,this.value))),this.promise}detaching(t,e,i){return this.queue((()=>this.view.deactivate(t,this.$controller,i))),this.promise}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}valueChanged(t,e,i){this.$controller.isActive&&this.queue((()=>this.swap(null,i,this.value)))}caseChanged(t,e){this.queue((()=>this.Ri(t,e)))}Ri(t,e){const i=t.isMatch(this.value,e),s=this.activeCases,n=s.length;if(!i)return n>0&&s[0].id===t.id?this.Ei(null,e):void 0;if(n>0&&s[0].id<t.id)return;const r=[];let o=t.fallThrough;if(o){const e=this.cases,i=e.indexOf(t);for(let t=i,s=e.length;t<s&&o;t++){const i=e[t];r.push(i),o=i.fallThrough}}else r.push(t);return wt(this.Ei(null,e,r),(()=>(this.activeCases=r,this.Bi(null,e))))}swap(t,e,i){const s=[];let n=!1;for(const t of this.cases)if((n||t.isMatch(i,e))&&(s.push(t),n=t.fallThrough),s.length>0&&!n)break;const r=this.defaultCase;return 0===s.length&&void 0!==r&&s.push(r),wt(this.activeCases.length>0?this.Ei(t,e,s):void 0,(()=>{if(this.activeCases=s,0!==s.length)return this.Bi(t,e)}))}Bi(t,e){const i=this.$controller;if(!i.isActive)return;const s=this.activeCases,n=s.length;if(0===n)return;const r=i.scope;return 1===n?s[0].activate(t,e,r):bt(...s.map((i=>i.activate(t,e,r))))}Ei(t,e,i=[]){const s=this.activeCases,n=s.length;if(0!==n){if(1===n){const n=s[0];return i.includes(n)?void 0:(s.length=0,n.deactivate(t,e))}return wt(bt(...s.reduce(((s,n)=>(i.includes(n)||s.push(n.deactivate(t,e)),s)),[])),(()=>{s.length=0}))}}queue(t){const e=this.promise;let i;i=this.promise=wt(wt(e,t),(()=>{this.promise===i&&(this.promise=void 0)}))}accept(t){return!0===this.$controller.accept(t)||!!this.activeCases.some((e=>e.accept(t)))||void 0}};Uo([Xo],wp.prototype,"value",void 0),wp=Uo([Rc("switch"),Lo(0,wl),Lo(1,oh)],wp);let bp=class{constructor(t,e,i,s){this.Ii=e,this.id=ht("au$component"),this.fallThrough=!1,this.Ti=s.config.level<=1,this.Ft=s.scopeTo(`${this.constructor.name}-#${this.id}`),this.view=t.create().setLocation(i)}link(t,e,i,s){const n=t.parent,r=null==n?void 0:n.viewModel;if(!(r instanceof wp))throw new Error("AUR0815");this.$switch=r,this.linkToSwitch(r)}detaching(t,e,i){return this.deactivate(t,i)}isMatch(t,e){this.Ft.debug("isMatch()");const i=this.value;return Array.isArray(i)?(void 0===this.fi&&(this.fi=this.Di(e,i)),i.includes(t)):i===t}valueChanged(t,e,i){var s;Array.isArray(t)?(null===(s=this.fi)||void 0===s||s.unsubscribe(this),this.fi=this.Di(i,t)):void 0!==this.fi&&this.fi.unsubscribe(this),this.$switch.caseChanged(this,i)}handleCollectionChange(t,e){this.$switch.caseChanged(this,e)}activate(t,e,i){const s=this.view;if(!s.isActive)return s.activate(null!=t?t:s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(i.isActive)return i.deactivate(null!=t?t:i,this.$controller,e)}dispose(){var t,e;null===(t=this.fi)||void 0===t||t.unsubscribe(this),null===(e=this.view)||void 0===e||e.dispose(),this.view=void 0}linkToSwitch(t){t.cases.push(this)}Di(t,e){const i=this.Ii.getArrayObserver(e);return i.subscribe(this),i}accept(t){var e;return!0===this.$controller.accept(t)||(null===(e=this.view)||void 0===e?void 0:e.accept(t))}};bp.inject=[wl,Ao,oh,je],Uo([Xo],bp.prototype,"value",void 0),Uo([Xo({set:t=>{switch(t){case"true":return!0;case"false":return!1;default:return!!t}},mode:us.oneTime})],bp.prototype,"fallThrough",void 0),bp=Uo([Rc("case")],bp);let yp=class extends bp{linkToSwitch(t){if(void 0!==t.defaultCase)throw new Error("AUR0816");t.defaultCase=this}};yp=Uo([Rc("default-case")],yp);let $p=class{constructor(t,e,i,s){this.f=t,this.l=e,this.p=i,this.id=ht("au$component"),this.preSettledTask=null,this.postSettledTask=null,this.logger=s.scopeTo("promise.resolve")}link(t,e,i,s){this.view=this.f.create(this.$controller).setLocation(this.l)}attaching(t,e,i){const s=this.view,n=this.$controller;return wt(s.activate(t,n,i,this.viewScope=vi.fromParent(n.scope,{})),(()=>this.swap(t,i)))}valueChanged(t,e,i){this.$controller.isActive&&this.swap(null,i)}swap(t,e){var i,s;const n=this.value;if(!(n instanceof Promise))return void this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);const r=this.p.domWriteQueue,o=this.fulfilled,a=this.rejected,c=this.pending,l=this.viewScope;let h;const u={reusable:!1},d=()=>{bt(h=(this.preSettledTask=r.queueTask((()=>bt(null==o?void 0:o.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==c?void 0:c.activate(t,e,l))),u)).result.catch((t=>{if(!(t instanceof H))throw t})),n.then((i=>{if(this.value!==n)return;const s=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>bt(null==c?void 0:c.deactivate(t,e),null==a?void 0:a.deactivate(t,e),null==o?void 0:o.activate(t,e,l,i))),u)).result};1===this.preSettledTask.status?h.then(s):(this.preSettledTask.cancel(),s())}),(i=>{if(this.value!==n)return;const s=()=>{this.postSettlePromise=(this.postSettledTask=r.queueTask((()=>bt(null==c?void 0:c.deactivate(t,e),null==o?void 0:o.deactivate(t,e),null==a?void 0:a.activate(t,e,l,i))),u)).result};1===this.preSettledTask.status?h.then(s):(this.preSettledTask.cancel(),s())})))};1===(null===(i=this.postSettledTask)||void 0===i?void 0:i.status)?this.postSettlePromise.then(d):(null===(s=this.postSettledTask)||void 0===s||s.cancel(),d())}detaching(t,e,i){var s,n;return null===(s=this.preSettledTask)||void 0===s||s.cancel(),null===(n=this.postSettledTask)||void 0===n||n.cancel(),this.preSettledTask=this.postSettledTask=null,this.view.deactivate(t,this.$controller,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Uo([Xo],$p.prototype,"value",void 0),$p=Uo([Rc("promise"),Lo(0,wl),Lo(1,oh),Lo(2,Ia),Lo(3,je)],$p);let kp=class{constructor(t,e){this.factory=t,this.id=ht("au$component"),this.view=this.factory.create().setLocation(e)}link(t,e,i,s){Sp(t).pending=this}activate(t,e,i){const s=this.view;if(!s.isActive)return s.activate(s,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Uo([Xo({mode:us.toView})],kp.prototype,"value",void 0),kp=Uo([Rc("pending"),Lo(0,wl),Lo(1,oh)],kp);let xp=class{constructor(t,e){this.factory=t,this.id=ht("au$component"),this.view=this.factory.create().setLocation(e)}link(t,e,i,s){Sp(t).fulfilled=this}activate(t,e,i,s){this.value=s;const n=this.view;if(!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};Uo([Xo({mode:us.fromView})],xp.prototype,"value",void 0),xp=Uo([Rc("then"),Lo(0,wl),Lo(1,oh)],xp);let Cp=class{constructor(t,e){this.factory=t,this.id=ht("au$component"),this.view=this.factory.create().setLocation(e)}link(t,e,i,s){Sp(t).rejected=this}activate(t,e,i,s){this.value=s;const n=this.view;if(!n.isActive)return n.activate(n,this.$controller,e,i)}deactivate(t,e){const i=this.view;if(i.isActive)return i.deactivate(i,this.$controller,e)}detaching(t,e,i){return this.deactivate(t,i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}};function Sp(t){const e=t.parent,i=null==e?void 0:e.viewModel;if(i instanceof $p)return i;throw new Error("AUR0813")}Uo([Xo({mode:us.fromView})],Cp.prototype,"value",void 0),Cp=Uo([Rc("catch"),Lo(0,wl),Lo(1,oh)],Cp);let Ap=class{"promise.resolve"(t,e,i){return new wa(t,e,"promise","bind")}};Ap=Uo([ka({pattern:"promise.resolve",symbols:""})],Ap);let Tp=class{then(t,e,i){return new wa(t,e,"then","from-view")}};Tp=Uo([ka({pattern:"then",symbols:""})],Tp);let Rp=class{catch(t,e,i){return new wa(t,e,"catch","from-view")}};Rp=Uo([ka({pattern:"catch",symbols:""})],Rp);class Ep{constructor(t,e,i){this.node=t,this.instructions=e,this.Pi=i,this.Oi=void 0}get definition(){return void 0===this.Oi&&(this.Oi=Vc.create({name:Jc.generateName(),template:this.node,needsCompile:Zo(this.node),instructions:this.instructions,dependencies:this.Pi})),this.Oi}createView(t){return this.getViewFactory(t).create()}getViewFactory(t){return t.root.get(Tl).getViewFactory(this.definition,t.createChild().register(...this.Pi))}mergeInto(t,e,i){t.appendChild(this.node),e.push(...this.instructions),i.push(...this.Pi)}}function Op(t,e,i,s,n){for(let r=0,o=i.length;r<o;++r){const o=i[r];switch(typeof o){case"string":e.appendChild(t.document.createTextNode(o));break;case"object":o instanceof t.Node?e.appendChild(o):"mergeInto"in o&&o.mergeInto(e,s,n)}}}function Pp(t,e){const i=e.to;return void 0!==i&&"subject"!==i&&"composing"!==i&&(t[i]=e),t}class jp{constructor(t,e,i,s){this.p=t,this.$i=e,this.Li=i,this.r=s,this.id=ht("au$component"),this.component=void 0,this.composing=!1,this.view=void 0,this.qi=void 0,this.Mi=e.props.reduce(Pp,{})}attaching(t,e,i){const{component:s,view:n}=this;return void 0===n||this.qi!==s?(this.qi=s,this.composing=!0,this.compose(void 0,s,t,i)):this.compose(n,s,t,i)}detaching(t,e,i){return this.oi(this.view,t,i)}componentChanged(t,e,i){const{$controller:s}=this;if(!s.isActive)return;if(this.qi===t)return;this.qi=t,this.composing=!0,i|=s.flags;const n=wt(this.oi(this.view,null,i),(()=>this.compose(void 0,t,null,i)));n instanceof Promise&&n.catch((t=>{throw t}))}compose(t,e,i,s){return wt(void 0===t?wt(e,(t=>this.Ui(t,s))):t,(t=>this.ni(this.view=t,i,s)))}oi(t,e,i){return null==t?void 0:t.deactivate(null!=e?e:t,this.$controller,i)}ni(t,e,i){const{$controller:s}=this;return wt(null==t?void 0:t.activate(null!=e?e:t,s,i,s.scope),(()=>{this.composing=!1}))}Ui(t,e){const i=this.Fi(t,e);if(i)return i.setLocation(this.$controller.location),i.lockScope(this.$controller.scope),i}Fi(t,e){if(!t)return;const i=this.Li.controller.container;if("object"==typeof t){if(function(t){return"lockScope"in t}(t))return t;if("createView"in t)return t.createView(i);if("create"in t)return t.create();if("template"in t)return this.r.getViewFactory(Vc.getOrCreate(t),i).create()}if(Zo(t)){const e=i.find(Jc,t);if(null==e)throw new Error(`AUR0809:${t}`);t=e.Type}return function(t,e,i,s){if(Zo(e))return function(t,e,i,s){const n=[],r=[],o=[],a=t.document.createElement(e);let c=!1;return i&&Object.keys(i).forEach((t=>{const e=i[t];Rh(e)?(c=!0,n.push(e)):a.setAttribute(t,e)})),c&&(a.className="au",r.push(n)),s&&Op(t,a,s,r,o),new Ep(a,r,o)}(t,e,i,s);if(Jc.isType(e))return function(t,e,i,s){const n=Jc.getDefinition(e),r=[],o=[r],a=[],c=[],l=n.bindables,h=t.document.createElement(n.name);return h.className="au",a.includes(e)||a.push(e),r.push(new Lh(n,void 0,c,null,!1,void 0)),i&&Object.keys(i).forEach((t=>{const e=i[t];Rh(e)?c.push(e):void 0===l[t]?c.push(new Fh(e,t)):c.push(new Uh(e,t))})),s&&Op(t,h,s,o,a),new Ep(h,o,a)}(t,e,i,s);throw new Error("Invalid Tag or Type.")}(this.p,t,this.Mi,this.$controller.host.childNodes).createView(i)}dispose(){var t;null===(t=this.view)||void 0===t||t.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}jp.inject=[Ia,Th,zl,Tl],Uo([Xo],jp.prototype,"component",void 0),Uo([Xo({mode:us.fromView})],jp.prototype,"composing",void 0),Nc({name:"au-render",template:null,containerless:!0,capture:!0})(jp);class Ip{constructor(t,e,i,s,n,r){this.c=t,this.parent=e,this.host=i,this.p=s,this.scopeBehavior="auto",this.Vi=void 0,this.l=n.containerless?hh(this.host):void 0,this.r=t.get(Tl),this.$i=n,this._i=r}static get inject(){return[Ht,Wl,nh,Ia,Th,Gt(Lp)]}get pending(){return this.ji}get composition(){return this.Vi}attaching(t,e,i){return this.ji=wt(this.queue(new Mp(this.view,this.viewModel,this.model,void 0),t),(t=>{this._i.isCurrent(t)&&(this.ji=void 0)}))}detaching(t){const e=this.Vi,i=this.ji;return this._i.invalidate(),this.Vi=this.ji=void 0,wt(i,(()=>null==e?void 0:e.deactivate(t)))}propertyChanged(t){"model"!==t||null==this.Vi?this.ji=wt(this.ji,(()=>wt(this.queue(new Mp(this.view,this.viewModel,this.model,t),void 0),(t=>{this._i.isCurrent(t)&&(this.ji=void 0)})))):this.Vi.update(this.model)}queue(t,e){const i=this._i,s=this.Vi;return wt(i.create(t),(t=>i.isCurrent(t)?wt(this.compose(t),(n=>i.isCurrent(t)?wt(n.activate(e),(()=>i.isCurrent(t)?(this.Vi=n,wt(null==s?void 0:s.deactivate(e),(()=>t))):wt(n.controller.deactivate(n.controller,this.$controller,4),(()=>(n.controller.dispose(),t))))):(n.controller.dispose(),t))):t))}compose(t){let e,i,s;const{view:n,viewModel:r,model:o}=t.change,{c:a,host:c,$controller:l,l:h}=this,u=this.getDef(r),d=a.createChild(),p=null==h?c.parentNode:h.parentNode;if(null!==u){if(u.containerless)throw new Error("AUR0806");null==h?(i=c,s=()=>{}):(i=p.insertBefore(this.p.document.createElement(u.name),h),s=()=>{i.remove()}),e=this.getVm(d,r,i)}else i=null==h?c:h,e=this.getVm(d,r,i);const f=()=>{if(null!==u){const n=jl.$el(d,e,i,{projections:this.$i.projections},u);return new Vp(n,(t=>n.activate(null!=t?t:n,l,2,l.scope.parentScope)),(t=>wt(n.deactivate(null!=t?t:n,l,4),s)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}{const s=Vc.create({name:Jc.generateName(),template:n}),r=this.r.getViewFactory(s,d),o=jl.$view(r,l),a="auto"===this.scopeBehavior?vi.fromParent(this.parent.scope,e):vi.create(e);return uh(i)?o.setLocation(i):o.setHost(i),new Vp(o,(t=>o.activate(null!=t?t:o,l,2,a)),(t=>o.deactivate(null!=t?t:o,l,4)),(t=>{var i;return null===(i=e.activate)||void 0===i?void 0:i.call(e,t)}),t)}};return"activate"in e?wt(e.activate(o),(()=>f())):f()}getVm(t,e,i){if(null==e)return new Up;if("object"==typeof e)return e;const s=this.p,n=uh(i);t.registerResolver(s.Element,t.registerResolver(nh,new me("ElementResolver",n?null:i))),t.registerResolver(oh,new me("IRenderLocation",n?i:null));const r=t.invoke(e);return t.registerResolver(e,new me("au-compose.viewModel",r)),r}getDef(t){const e=Yo(t)?t:null==t?void 0:t.constructor;return Jc.isType(e)?Jc.getDefinition(e):null}}Uo([Xo],Ip.prototype,"view",void 0),Uo([Xo],Ip.prototype,"viewModel",void 0),Uo([Xo],Ip.prototype,"model",void 0),Uo([Xo({set:t=>{if("scoped"===t||"auto"===t)return t;throw new Error("AUR0805")}})],Ip.prototype,"scopeBehavior",void 0),Nc("au-compose")(Ip);class Up{}class Lp{constructor(){this.id=0}isCurrent(t){return t.id===this.id}create(t){return wt(t.load(),(t=>new Bp(++this.id,t)))}invalidate(){this.id++}}class Mp{constructor(t,e,i,s){this.view=t,this.viewModel=e,this.model=i,this.src=s}load(){return _o(this.view)||_o(this.viewModel)?Promise.all([this.view,this.viewModel]).then((([t,e])=>new Np(t,e,this.model,this.src))):new Np(this.view,this.viewModel,this.model,this.src)}}class Np{constructor(t,e,i,s){this.view=t,this.viewModel=e,this.model=i,this.src=s}}class Bp{constructor(t,e){this.id=t,this.change=e}}class Vp{constructor(t,e,i,s,n){this.controller=t,this.start=e,this.stop=i,this.update=s,this.context=n,this.state=0}activate(t){if(0!==this.state)throw new Error(`AUR0807:${this.controller.name}`);return this.state=1,this.start(t)}deactivate(t){switch(this.state){case 1:return this.state=-1,this.stop(t);case-1:throw new Error("AUR0808");default:this.state=-1}}}class Dp{constructor(t,e,i,s){var n,r;let o;this.Ni=null,this.Wi=null;const a=e.auSlot,c=null===(r=null===(n=i.instruction)||void 0===n?void 0:n.projections)||void 0===r?void 0:r[a.name];null==c?(o=s.getViewFactory(a.fallback,i.controller.container),this.Hi=!1):(o=s.getViewFactory(c,i.parent.controller.container),this.Hi=!0),this.Li=i,this.view=o.create().setLocation(t)}static get inject(){return[oh,Th,zl,Tl]}binding(t,e,i){var s;let n;this.Ni=this.$controller.scope.parentScope,this.Hi&&(n=this.Li.controller.scope.parentScope,(this.Wi=vi.fromParent(n,n.bindingContext)).overrideContext.$host=null!==(s=this.expose)&&void 0!==s?s:this.Ni.bindingContext)}attaching(t,e,i){return this.view.activate(t,this.$controller,i,this.Hi?this.Wi:this.Ni)}detaching(t,e,i){return this.view.deactivate(t,this.$controller,i)}exposeChanged(t){this.Hi&&null!=this.Wi&&(this.Wi.overrideContext.$host=t)}dispose(){this.view.dispose(),this.view=void 0}accept(t){var e;if(!0===(null===(e=this.view)||void 0===e?void 0:e.accept(t)))return!0}}Uo([Xo],Dp.prototype,"expose",void 0),Nc({name:"au-slot",template:null,containerless:!0})(Dp);const qp=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Fp=Dt.createInterface("ISanitizer",(t=>t.singleton(class{sanitize(t){return t.replace(qp,"")}})));let Hp=class{constructor(t){this.zi=t}toView(t){return null==t?null:this.zi.sanitize(t)}};Hp=Uo([Lo(0,Fp)],Hp),Ri("sanitize")(Hp);let Wp=class{constructor(t){this.Gi=t}toView(t,e){return this.Gi.getViewComponentForObject(t,e)}};Wp=Uo([Lo(0,Sl)],Wp),Ri("view")(Wp);const zp=Td,Kp=xd,Qp=Cd,Gp=Sd,Jp=Rd,_p=Ed,Yp=Ad,Zp=[class{constructor(){this.debug=!1,this.resolveResources=!0}static register(t){return ve.singleton(Gh,this).register(t)}compile(t,e,i){var s,n,r,o;const a=Vc.getOrCreate(t);if(null===a.template||void 0===a.template)return a;if(!1===a.needsCompile)return a;null!=i||(i=rd);const c=new id(t,e,i,null,null,void 0),l=Zo(a.template)||!t.enhance?c.re.createTemplate(a.template):a.template,h="TEMPLATE"===l.nodeName&&null!=l.content,u=h?l.content:l,d=e.get(function(t){function e(t,i,s){Dt.inject(e)(t,i,s)}return e.$isResolver=!0,e.resolve=function(e,i){return i.root===i?i.getAll(t,!1):i.has(t,!1)?i.getAll(t,!1).concat(i.root.getAll(t,!1)):i.root.getAll(t,!1)},e}(md)),p=d.length;let f=0;if(p>0)for(;p>f;)null===(n=(s=d[f]).compiling)||void 0===n||n.call(s,l),++f;if(l.hasAttribute(fd))throw new Error("AUR0701");return this.oe(u,c),this.le(u,c),Vc.create({...t,name:t.name||$d(),dependencies:(null!==(r=t.dependencies)&&void 0!==r?r:$e).concat(null!==(o=c.deps)&&void 0!==o?o:$e),instructions:c.rows,surrogates:h?this.he(l,c):$e,template:l,hasSlots:c.hasSlot,needsCompile:!1})}compileSpread(t,e,i,s){var n;const r=new id(t,i,rd,null,null,void 0),o=[],a=r.ae(s.nodeName.toLowerCase()),c=r.ep,l=e.length;let h,u,d,p,f,g,v,m,w,b,y=0,$=null,k=null;for(;l>y;++y)if(h=e[y],w=h.target,b=h.rawValue,k=r.ce(h),null!==k&&(1&k.type)>0)ad.node=s,ad.attr=h,ad.bindable=null,ad.def=null,o.push(k.build(ad));else if($=r.ue(w),null===$)if(null===k){if(v=c.parse(b,1),null!==a&&(p=ud.from(a,!1),f=p.attrs[w],void 0!==f)){v=c.parse(b,1),o.push(new Qh(null==v?new Uh(b,f.property):new Eh(v,f.property)));continue}if(null!=v)o.push(new Eh(v,null!==(n=r.m.map(s,w))&&void 0!==n?n:rt(w)));else switch(w){case"class":o.push(new Hh(b));break;case"style":o.push(new Wh(b));break;default:o.push(new Fh(b,w))}}else{if(null!==a&&(p=ud.from(a,!1),f=p.attrs[w],void 0!==f)){ad.node=s,ad.attr=h,ad.bindable=f,ad.def=a,o.push(new Qh(k.build(ad)));continue}ad.node=s,ad.attr=h,ad.bindable=null,ad.def=null,o.push(k.build(ad))}else{if($.isTemplateController)throw new Error(`AUR0703:${w}`);p=ud.from($,!0),m=!1===$.noMultiBindings&&null===k&&sd(b),m?d=this.fe(s,b,$,r):(g=p.primary,null===k?(v=c.parse(b,1),d=[null===v?new Uh(b,g.property):new Eh(v,g.property)]):(ad.node=s,ad.attr=h,ad.bindable=g,ad.def=$,d=[k.build(ad)])),(null!=u?u:u=[]).push(new Mh(this.resolveResources?$:$.name,null!=$.aliases&&$.aliases.includes(w)?w:void 0,d))}return nd(),null!=u?u.concat(o):o}he(t,e){var i;const s=[],n=t.attributes,r=e.ep;let o,a,c,l,h,u,d,p,f,g,v,m,w=n.length,b=0,y=null,$=null;for(;w>b;++b){if(o=n[b],a=o.name,c=o.value,l=e.de.parse(a,c),v=l.target,m=l.rawValue,cd[v])throw new Error(`AUR0702:${a}`);if($=e.ce(l),null!==$&&(1&$.type)>0)ad.node=t,ad.attr=l,ad.bindable=null,ad.def=null,s.push($.build(ad));else if(y=e.ue(v),null===y)if(null===$)if(f=r.parse(m,1),null!=f)t.removeAttribute(a),--b,--w,s.push(new Eh(f,null!==(i=e.m.map(t,v))&&void 0!==i?i:rt(v)));else switch(a){case"class":s.push(new Hh(m));break;case"style":s.push(new Wh(m));break;default:s.push(new Fh(m,a))}else ad.node=t,ad.attr=l,ad.bindable=null,ad.def=null,s.push($.build(ad));else{if(y.isTemplateController)throw new Error(`AUR0703:${v}`);d=ud.from(y,!0),g=!1===y.noMultiBindings&&null===$&&sd(m),g?u=this.fe(t,m,y,e):(p=d.primary,null===$?(f=r.parse(m,1),u=[null===f?new Uh(m,p.property):new Eh(f,p.property)]):(ad.node=t,ad.attr=l,ad.bindable=p,ad.def=y,u=[$.build(ad)])),t.removeAttribute(a),--b,--w,(null!=h?h:h=[]).push(new Mh(this.resolveResources?y:y.name,null!=y.aliases&&y.aliases.includes(v)?v:void 0,u))}}return nd(),null!=h?h.concat(s):s}le(t,e){switch(t.nodeType){case 1:return"LET"===t.nodeName?this.me(t,e):this.ve(t,e);case 3:return this.pe(t,e);case 11:{let i=t.firstChild;for(;null!==i;)i=this.le(i,e);break}}return t.nextSibling}me(t,e){const i=t.attributes,s=i.length,n=[],r=e.ep;let o,a,c,l,h,u,d,p,f=!1,g=0;for(;s>g;++g)if(o=i[g],c=o.name,l=o.value,"to-binding-context"!==c){if(a=e.de.parse(c,l),u=a.target,d=a.rawValue,h=e.ce(a),null!==h)switch(h.name){case"to-view":case"bind":n.push(new Vh(r.parse(d,8),rt(u)));continue;default:throw new Error(`AUR0704:${a.command}`)}p=r.parse(d,1),n.push(new Vh(null===p?new Ji(d):p,rt(u)))}else f=!0;return e.rows.push([new Bh(n,f)]),this.ge(t).nextSibling}ve(t,e){var i,s,n,r,o,a,c,l;const h=t.nextSibling,u=(null!==(i=t.getAttribute("as-element"))&&void 0!==i?i:t.nodeName).toLowerCase(),d=e.ae(u),p=!!(null==d?void 0:d.capture),f=p?[]:$e,g=e.ep,v=this.debug?xe:()=>{t.removeAttribute(b),--B,--N};let m,w,b,y,$,k,x,C,S,A,T,R,E,O,P,j,I,U,L,M=t.attributes,N=M.length,B=0,V=null,D=!1,q=null,F=!0,H=!1;if("slot"===u&&(e.root.hasSlot=!0),null!==d&&(F=null===(s=d.processContent)||void 0===s?void 0:s.call(d.Type,t,e.p),M=t.attributes,N=M.length),e.root.def.enhance&&t.classList.contains("au"))throw new Error("AUR0705");for(;N>B;++B){switch(w=M[B],b=w.name,y=w.value,b){case"as-element":case"containerless":v(),H||(H="containerless"===b);continue}if($=e.de.parse(b,y),q=e.ce($),I=$.target,U=$.rawValue,p){if(null!=q&&1&q.type){v(),f.push($);continue}if("au-slot"!==I&&(P=ud.from(d,!1),null==P.attrs[I]&&!(null===(n=e.ue(I))||void 0===n?void 0:n.isTemplateController))){v(),f.push($);continue}}if(null!==q&&1&q.type)ad.node=t,ad.attr=$,ad.bindable=null,ad.def=null,(null!=k?k:k=[]).push(q.build(ad)),v();else if(V=e.ue(I),null===V)if(null!==q)v(),null===d||(P=ud.from(d,!1),C=P.attrs[I],void 0===C)?(ad.node=t,ad.attr=$,ad.bindable=null,ad.def=null,(null!=k?k:k=[]).push(q.build(ad))):(ad.node=t,ad.attr=$,ad.bindable=C,ad.def=d,(null!=x?x:x=[]).push(q.build(ad)));else{if(null!==d&&(P=ud.from(d,!1),C=P.attrs[I],void 0!==C)){E=g.parse(U,1),(null!=x?x:x=[]).push(null==E?new Uh(U,C.property):new Eh(E,C.property)),v();continue}E=g.parse(U,1),null!=E&&(v(),(null!=k?k:k=[]).push(new Eh(E,null!==(r=e.m.map(t,I))&&void 0!==r?r:rt(I))))}else P=ud.from(V,!0),D=!1===V.noMultiBindings&&null===q&&sd(U),D?A=this.fe(t,U,V,e):(j=P.primary,null===q?(E=g.parse(U,1),A=[null===E?new Uh(U,j.property):new Eh(E,j.property)]):(ad.node=t,ad.attr=$,ad.bindable=j,ad.def=V,A=[q.build(ad)])),v(),V.isTemplateController?(null!=T?T:T=[]).push(new Nh(od,this.resolveResources?V:V.name,void 0,A)):(null!=S?S:S=[]).push(new Mh(this.resolveResources?V:V.name,null!=V.aliases&&V.aliases.includes(I)?I:void 0,A))}if(nd(),this.we(t)&&null!=k&&k.length>1&&this.be(t,k),null!==d&&(O=new Lh(this.resolveResources?d:d.name,void 0,null!=x?x:$e,null,H,f),"au-slot"===u)){const i=t.getAttribute("name")||"default",s=e.h("template"),n=e.xe();let r=t.firstChild;for(;null!==r;)1===r.nodeType&&r.hasAttribute("au-slot")?t.removeChild(r):s.content.appendChild(r),r=t.firstChild;this.le(s.content,n),O.auSlot={name:i,fallback:Vc.create({name:$d(),template:s,instructions:n.rows,needsCompile:!1})},t=this.ye(t,e)}if(null==k&&null==O&&null==S||(m=$e.concat(null!=O?O:$e,null!=S?S:$e,null!=k?k:$e),this.ge(t)),null!=T){let i;N=T.length-1,B=N,R=T[B],this.ye(t,e),"TEMPLATE"===t.nodeName?i=t:(i=e.h("template"),i.content.appendChild(t));const s=i,n=e.xe(null==m?[]:[m]);let r,a,l,h,p,f,g,v,w=0,b=0,y=t.firstChild;if(!1!==F)for(;null!==y;)if(1===y.nodeType){if(r=y,y=y.nextSibling,a=r.getAttribute("au-slot"),null!==a){if(null===d)throw new Error(`AUR0706:${u}[${a}]`);""===a&&(a="default"),r.removeAttribute("au-slot"),t.removeChild(r),(null!==(o=(c=null!=h?h:h={})[a])&&void 0!==o?o:c[a]=[]).push(r)}}else y=y.nextSibling;if(null!=h){for(a in l={},h){for(i=e.h("template"),p=h[a],w=0,b=p.length;b>w;++w)f=p[w],"TEMPLATE"===f.nodeName?f.attributes.length>0?i.content.appendChild(f):i.content.appendChild(f.content):i.content.appendChild(f);v=e.xe(),this.le(i.content,v),l[a]=Vc.create({name:$d(),template:i,instructions:v.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}O.projections=l}if(null!==d&&d.containerless&&this.ye(t,e),L=null===d||!d.containerless&&!H&&!1!==F,L)if("TEMPLATE"===t.nodeName)this.le(t.content,n);else for(y=t.firstChild;null!==y;)y=this.le(y,n);for(R.def=Vc.create({name:$d(),template:s,instructions:n.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding});B-- >0;)R=T[B],i=e.h("template"),g=e.h("au-m"),g.classList.add("au"),i.content.appendChild(g),R.def=Vc.create({name:$d(),template:i,needsCompile:!1,instructions:[[T[B+1]]],isStrictBinding:e.root.def.isStrictBinding});e.rows.push([R])}else{null!=m&&e.rows.push(m);let i,s,n,r,o,c,h,u=t.firstChild,p=null,f=0,g=0;if(!1!==F)for(;null!==u;)if(1===u.nodeType){if(i=u,u=u.nextSibling,s=i.getAttribute("au-slot"),null!==s){if(null===d)throw new Error(`AUR0706:${t.nodeName}[${s}]`);""===s&&(s="default"),t.removeChild(i),i.removeAttribute("au-slot"),(null!==(a=(l=null!=n?n:n={})[s])&&void 0!==a?a:l[s]=[]).push(i)}}else u=u.nextSibling;if(null!=n){for(s in p={},n){for(c=e.h("template"),r=n[s],f=0,g=r.length;g>f;++f)o=r[f],"TEMPLATE"===o.nodeName?o.attributes.length>0?c.content.appendChild(o):c.content.appendChild(o.content):c.content.appendChild(o);h=e.xe(),this.le(c.content,h),p[s]=Vc.create({name:$d(),template:c,instructions:h.rows,needsCompile:!1,isStrictBinding:e.root.def.isStrictBinding})}O.projections=p}if(null!==d&&d.containerless&&this.ye(t,e),L=null===d||!d.containerless&&!H&&!1!==F,L&&t.childNodes.length>0)for(u=t.firstChild;null!==u;)u=this.le(u,e)}return h}pe(t,e){let i="",s=t;for(;null!==s&&3===s.nodeType;)i+=s.textContent,s=s.nextSibling;const n=e.ep.parse(i,1);if(null===n)return s;const r=t.parentNode;for(r.insertBefore(this.ge(e.h("au-m")),t),e.rows.push([new Dh(n,!!e.def.isStrictBinding)]),t.textContent="",s=t.nextSibling;null!==s&&3===s.nodeType;)r.removeChild(s),s=t.nextSibling;return t.nextSibling}fe(t,e,i,s){const n=ud.from(i,!0),r=e.length,o=[];let a,c,l,h,u,d,p=0,f=0;for(let g=0;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(58===f){for(a=e.slice(p,g);e.charCodeAt(++g)<=32;);for(p=g;g<r;++g)if(f=e.charCodeAt(g),92===f)++g;else if(59===f){c=e.slice(p,g);break}if(void 0===c&&(c=e.slice(p)),h=s.de.parse(a,c),u=s.ce(h),d=n.attrs[h.target],null==d)throw new Error(`AUR0707:${i.name}.${h.target}`);for(null===u?(l=s.ep.parse(c,1),o.push(null===l?new Uh(c,d.property):new Eh(l,d.property))):(ad.node=t,ad.attr=h,ad.bindable=d,ad.def=i,o.push(u.build(ad)));g<r&&e.charCodeAt(++g)<=32;);p=g,a=void 0,c=void 0}return nd(),o}oe(t,e){const i=t,s=ct(i.querySelectorAll("template[as-custom-element]")),n=s.length;if(0===n)return;if(n===i.childElementCount)throw new Error("AUR0708");const r=new Set;for(const t of s){if(t.parentNode!==i)throw new Error("AUR0709");const s=gd(t,r),n=class{},o=t.content,a=ct(o.querySelectorAll("bindable")),c=ia.for(n),l=new Set,h=new Set;for(const t of a){if(t.parentNode!==o)throw new Error("AUR0710");const e=t.getAttribute("property");if(null===e)throw new Error("AUR0711");const i=t.getAttribute("attribute");if(null!==i&&h.has(i)||l.has(e))throw new Error(`AUR0712:${e}+${i}`);null!==i&&h.add(i),l.add(e),c.add({property:e,attribute:null!=i?i:void 0,mode:vd(t)}),t.getAttributeNames().filter((t=>!pd.includes(t))).length,o.removeChild(t)}e.ke(Jc.define({name:s,template:t},n)),i.removeChild(t)}}we(t){return"INPUT"===t.nodeName&&1===ld[t.type]}be(t,e){if("INPUT"===t.nodeName){const t=e;let i,s,n,r=0;for(let e=0;e<t.length&&r<3;e++)switch(n=t[e],n.to){case"model":case"value":case"matcher":i=e,r++;break;case"checked":s=e,r++}void 0!==s&&void 0!==i&&s<i&&([t[i],t[s]]=[t[s],t[i]])}}ge(t){return t.classList.add("au"),t}ye(t,e){const i=t.parentNode,s=e.h("au-m");return this.ge(i.insertBefore(s,t)),i.removeChild(t),s}},Xd],Xp=[Ea,Ra,ja],tf=[Fu,Bu,Du,Vu,qu,Hu,Wu,Yu,zu,Ku,Qu,_u,Ju,Gu,Zu],ef=[zp,Kp,Qp,Gp,Jp,_p,Yp,Hp,Wp,op,ap,cp,lp,dp,mp,wp,bp,yp,$p,kp,xp,Cp,Ap,Tp,Rp,Pd,Id,ep,jp,Ip,np,ip,sp,Dp],sf=[au,cu,nu,ru,ou,Xh,tu,eu,iu,su,pu,wu,fu,gu,vu,mu,du,bu],nf=function t(e){return{optionsProvider:e,register(t){const i={coercingOptions:{enableCoercion:!1,coerceNullish:!1}};return e(i),t.register(ve.instance(hs,i.coercingOptions),...Zp,...ef,...Xp,...tf,...sf)},customize:i=>t(null!=i?i:e)}}(xe),rf=Dt.createInterface("IAurelia");var of;!function(t){t[t.Element=1]="Element",t[t.Attribute=2]="Attribute"}(of||(of={}));const af=Dt.createInterface("IDialogService"),cf=Dt.createInterface("IDialogController"),lf=Dt.createInterface("IDialogDomRenderer"),hf=Dt.createInterface("IDialogDom"),uf=Dt.createInterface("IDialogGlobalSettings");class df{constructor(t,e){this.wasCancelled=t,this.dialog=e}static create(t,e){return new df(t,e)}}class pf{constructor(t,e){this.status=t,this.value=e}static create(t,e){return new pf(t,e)}}var ff;!function(t){t.Ok="ok",t.Error="error",t.Cancel="cancel",t.Abort="abort"}(ff||(ff={}));class gf{constructor(t,e){this.p=t,this.ctn=e,this.closed=new Promise(((t,e)=>{this.$t=t,this.Bt=e}))}static get inject(){return[Ia,Ht]}activate(t){var e;const i=this.ctn.createChild(),{model:s,template:n,rejectOnCancel:r}=t,o=i.get(lf),a=null!==(e=t.host)&&void 0!==e?e:this.p.document.body,c=this.dom=o.render(a,t),l=i.has(rh,!0)?i.get(rh):null,h=c.contentHost;return this.settings=t,null!=l&&l.contains(a)||i.register(ve.instance(rh,a)),i.register(ve.instance(nh,h),ve.instance(hf,c)),new Promise((e=>{var n,r;const o=Object.assign(this.cmp=this.getOrCreateVm(i,t,h),{$dialog:this});e(null===(r=null===(n=o.canActivate)||void 0===n?void 0:n.call(o,s))||void 0===r||r)})).then((e=>{var o;if(!0!==e){if(c.dispose(),r)throw mf(null,"Dialog activation rejected");return df.create(!0,this)}const a=this.cmp;return wt(null===(o=a.activate)||void 0===o?void 0:o.call(a,s),(()=>{var e;const s=this.controller=jl.$el(i,a,h,null,Vc.create(null!==(e=this.getDefinition(a))&&void 0!==e?e:{name:Jc.generateName(),template:n}));return wt(s.activate(s,null,2),(()=>{var e;return c.overlay.addEventListener(null!==(e=t.mouseEvent)&&void 0!==e?e:"click",this),df.create(!1,this)}))}))}),(t=>{throw c.dispose(),t}))}deactivate(t,e){if(this.ss)return this.ss;let i=!0;const{controller:s,dom:n,cmp:r,settings:{mouseEvent:o,rejectOnCancel:a}}=this,c=pf.create(t,e),l=new Promise((l=>{var h,u;l(wt(null===(u=null===(h=r.canDeactivate)||void 0===h?void 0:h.call(r,c))||void 0===u||u,(l=>{var h;if(!0!==l){if(i=!1,this.ss=void 0,a)throw mf(null,"Dialog cancellation rejected");return pf.create("abort")}return wt(null===(h=r.deactivate)||void 0===h?void 0:h.call(r,c),(()=>wt(s.deactivate(s,null,4),(()=>(n.dispose(),n.overlay.removeEventListener(null!=o?o:"click",this),a||"error"===t?this.Bt(mf(e,"Dialog cancelled with a rejection on cancel")):this.$t(c),c)))))})))})).catch((t=>{throw this.ss=void 0,t}));return this.ss=i?l:void 0,l}ok(t){return this.deactivate("ok",t)}cancel(t){return this.deactivate("cancel",t)}error(t){const e=function(t){const e=new Error;return e.wasCancelled=!1,e.value=t,e}(t);return new Promise((t=>{var i,s;return t(wt(null===(s=(i=this.cmp).deactivate)||void 0===s?void 0:s.call(i,pf.create("error",e)),(()=>wt(this.controller.deactivate(this.controller,null,4),(()=>{this.dom.dispose(),this.Bt(e)})))))}))}handleEvent(t){this.settings.overlayDismiss&&!this.dom.contentHost.contains(t.target)&&this.cancel()}getOrCreateVm(t,e,i){const s=e.component;if(null==s)return new vf;if("object"==typeof s)return s;const n=this.p;return t.registerResolver(n.HTMLElement,t.registerResolver(n.Element,t.registerResolver(nh,new me("ElementResolver",i)))),t.invoke(s)}getDefinition(t){const e=Yo(t)?t:null==t?void 0:t.constructor;return Jc.isType(e)?Jc.getDefinition(e):null}}class vf{}function mf(t,e){const i=new Error(e);return i.wasCancelled=!0,i.value=t,i}class wf{static from(...t){return Object.assign(new wf,...t).cs().ls()}load(){const t=this,e=this.component,i=this.template,s=bt(null==e?void 0:wt(e(),(e=>{t.component=e})),Yo(i)?wt(i(),(e=>{t.template=e})):void 0);return s instanceof Promise?s.then((()=>t)):t}cs(){if(null==this.component&&null==this.template)throw new Error("AUR0903");return this}ls(){return null==this.keyboard&&(this.keyboard=this.lock?[]:["Enter","Escape"]),"boolean"!=typeof this.overlayDismiss&&(this.overlayDismiss=!this.lock),this}}function bf(t,e){return this.then((i=>i.dialog.closed.then(t,e)),e)}const yf="position:absolute;width:100%;height:100%;top:0;left:0;";class $f{constructor(t){this.p=t,this.wrapperCss=`${yf} display:flex;`,this.overlayCss=yf,this.hostCss="position:relative;margin:auto;"}static register(t){ve.singleton(lf,this).register(t)}render(t){const e=this.p.document,i=(t,i)=>{const s=e.createElement(t);return s.style.cssText=i,s},s=t.appendChild(i("au-dialog-container",this.wrapperCss)),n=s.appendChild(i("au-dialog-overlay",this.overlayCss)),r=s.appendChild(i("div",this.hostCss));return new kf(s,n,r)}}$f.inject=[Ia];class kf{constructor(t,e,i){this.wrapper=t,this.overlay=e,this.contentHost=i}dispose(){this.wrapper.remove()}}function xf(t,e){return{settingsProvider:t,register:i=>i.register(...e,gc.beforeCreate((()=>t(i.get(uf))))),customize:(t,i)=>xf(t,null!=i?i:e)}}xf((()=>{throw new Error("AUR0904")}),[class{static register(t){t.register(ve.singleton(uf,this))}}]),xf(xe,[class{constructor(t,e,i){this.ut=t,this.p=e,this.os=i,this.dlgs=[]}get controllers(){return this.dlgs.slice(0)}get top(){const t=this.dlgs;return t.length>0?t[t.length-1]:null}static get inject(){return[Ht,Ia,uf]}static register(t){t.register(ve.singleton(af,this),gc.beforeDeactivate(af,(t=>wt(t.closeAll(),(t=>{if(t.length>0)throw new Error(`AUR0901:${t.length}`)})))))}open(t){return function(t){return t.whenClosed=bf,t}(new Promise((e=>{var i;const s=wf.from(this.os,t),n=null!==(i=s.container)&&void 0!==i?i:this.ut.createChild();e(wt(s.load(),(t=>{const e=n.invoke(gf);return n.register(ve.instance(cf,e)),n.register(ve.callback(gf,(()=>{throw new Error("AUR0902")}))),wt(e.activate(t),(t=>{if(!t.wasCancelled){1===this.dlgs.push(e)&&this.p.window.addEventListener("keydown",this);const t=()=>this.remove(e);e.closed.then(t,t)}return t}))})))})))}closeAll(){return Promise.all(Array.from(this.dlgs).map((t=>t.settings.rejectOnCancel?t.cancel().then((()=>null)):t.cancel().then((e=>"cancel"===e.status?null:t))))).then((t=>t.filter((t=>!!t))))}remove(t){const e=this.dlgs,i=e.indexOf(t);i>-1&&this.dlgs.splice(i,1),0===e.length&&this.p.window.removeEventListener("keydown",this)}handleEvent(t){const e=function(t){return"Escape"===(t.code||t.key)||27===t.keyCode?"Escape":"Enter"===(t.code||t.key)||13===t.keyCode?"Enter":void 0}(t);if(null==e)return;const i=this.top;if(null===i||0===i.settings.keyboard.length)return;const s=i.settings.keyboard;"Escape"===e&&s.includes(e)?i.cancel():"Enter"===e&&s.includes(e)&&i.ok()}},class{constructor(){this.lock=!0,this.startingZIndex=1e3,this.rejectOnCancel=!1}static register(t){ve.singleton(uf,this).register(t)}},$f]),Dt.createInterface((t=>t.singleton(Cf)));class Cf{constructor(t,e,i){this.ctn=t,this.p=e,this.r=i}define(t,e,i){if(!t.includes("-"))throw new Error('Invalid web-components custom element name. It must include a "-"');let s;if(null==e)throw new Error("Invalid custom element definition");if(s="function"==typeof e?Jc.isType(e)?Jc.getDefinition(e):Vc.create(Jc.generateName(),e):Vc.getOrCreate(e),s.containerless)throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");const n=(null==i?void 0:i.extends)?this.p.document.createElement(i.extends).constructor:HTMLElement,r=this.ctn,o=this.r,a=s.bindables,c=this.p;class l extends n{auInit(){if(this.auInited)return;this.auInited=!0;const t=r.createChild();t.registerResolver(c.HTMLElement,t.registerResolver(c.Element,t.registerResolver(nh,new me("ElementProvider",this))));const e=o.compile(s,t,{projections:null}),i=t.invoke(e.Type),n=this.auCtrl=jl.$el(t,i,this,null,e);sh(this,e.key,n)}connectedCallback(){this.auInit(),this.auCtrl.activate(this.auCtrl,null,0)}disconnectedCallback(){this.auCtrl.deactivate(this.auCtrl,null,0)}adoptedCallback(){this.auInit()}attributeChangedCallback(t,e,i){this.auInit(),this.auCtrl.viewModel[t]=i}}l.observedAttributes=Object.keys(a);for(const t in a)Object.defineProperty(l.prototype,t,{configurable:!0,enumerable:!1,get(){return this.auCtrl.viewModel[t]},set(e){this.auInited||this.auInit(),this.auCtrl.viewModel[t]=e}});return this.p.customElements.define(t,l,i),l}}Cf.inject=[Ht,Ia,Tl];const Sf=Xe.getOrCreate(globalThis);class Af extends class{constructor(t=Dt.createContainer()){if(this.container=t,this.ir=!1,this.Xi=!1,this.Ki=!1,this.Yi=void 0,this.next=void 0,this.Qi=void 0,this.Zi=void 0,t.has(rf,!0))throw new Error("AUR0768");t.registerResolver(rf,new me("IAurelia",this)),t.registerResolver(Yl,this.Ji=new me("IAppRoot"))}get isRunning(){return this.ir}get isStarting(){return this.Xi}get isStopping(){return this.Ki}get root(){if(null==this.Yi){if(null==this.next)throw new Error("AUR0767");return this.next}return this.Yi}register(...t){return this.container.register(...t),this}app(t){return this.next=new th(t,this.ts(t.host),this.container,this.Ji),this}enhance(t,e){var i;const s=null!==(i=t.container)&&void 0!==i?i:this.container.createChild(),n=t.host,r=this.ts(n),o=t.component;let a;Yo(o)?(s.registerResolver(r.HTMLElement,s.registerResolver(r.Element,s.registerResolver(nh,new me("ElementResolver",n)))),a=s.invoke(o)):a=o,s.registerResolver(rh,new me("IEventTarget",n)),e=null!=e?e:null;const c=jl.$el(s,a,n,null,Vc.create({name:Jc.generateName(),template:n,enhance:!0}));return wt(c.activate(c,e,2),(()=>c))}async waitForIdle(){const t=this.root.platform;await t.domWriteQueue.yield(),await t.domReadQueue.yield(),await t.taskQueue.yield()}ts(t){let e;if(this.container.has(Ia,!1))e=this.container.get(Ia);else{if(null===t.ownerDocument.defaultView)throw new Error("AUR0769");e=new Xe(t.ownerDocument.defaultView),this.container.register(ve.instance(Ia,e))}return e}start(t=this.next){if(null==t)throw new Error("AUR0770");return this.Qi instanceof Promise?this.Qi:this.Qi=wt(this.stop(),(()=>(Reflect.set(t.host,"$aurelia",this),this.Ji.prepare(this.Yi=t),this.Xi=!0,wt(t.activate(),(()=>{this.ir=!0,this.Xi=!1,this.Qi=void 0,this.es(t,"au-started",t.host)})))))}stop(t=!1){if(this.Zi instanceof Promise)return this.Zi;if(!0===this.ir){const e=this.Yi;return this.ir=!1,this.Ki=!0,this.Zi=wt(e.deactivate(),(()=>{Reflect.deleteProperty(e.host,"$aurelia"),t&&e.dispose(),this.Yi=void 0,this.Ji.dispose(),this.Ki=!1,this.es(e,"au-stopped",e.host)}))}}dispose(){if(this.ir||this.Ki)throw new Error("AUR0771");this.container.dispose()}es(t,e,i){const s=new t.platform.window.CustomEvent(e,{detail:this,bubbles:!0,cancelable:!0});i.dispatchEvent(s)}}{constructor(t=function(){return Dt.createContainer().register(ve.instance(Ia,Sf),nf)}()){super(t)}static start(t){return(new Af).start(t)}static app(t){return(new Af).app(t)}static enhance(t,e){return(new Af).enhance(t,e)}static register(...t){return(new Af).register(...t)}app(t){if(Jc.isType(t)){const e=Jc.getDefinition(t);let i=document.querySelector(e.name);return null===i&&(i=document.body),super.app({host:i,component:t})}return super.app(t)}}class Tf{constructor(t,e,i){this.path=t,this.caseSensitive=e,this.handler=i}}class Rf{constructor(t,e){this.route=t,this.paramNames=e}}class Ef{constructor(t,e){this.endpoint=t,this.params=e}}class Of{constructor(t,e,i,s){var n;this.chars=t,this.states=e,this.skippedStates=i,this.result=s,this.head=e[e.length-1],this.endpoint=null===(n=this.head)||void 0===n?void 0:n.endpoint}advance(t){const{chars:e,states:i,skippedStates:s,result:n}=this;let r=null,o=0;const a=i[i.length-1];function c(l,h){if(l.isMatch(t)&&(1==++o?r=l:n.add(new Of(e.concat(t),i.concat(l),null===h?s:s.concat(h),n))),null===a.segment&&l.isOptional&&null!==l.nextStates){if(l.nextStates.length>1)throw new Error(`${l.nextStates.length} nextStates`);const t=l.nextStates[0];if(!t.isSeparator)throw new Error("Not a separator");if(null!==t.nextStates)for(const e of t.nextStates)c(e,l)}}if(a.isDynamic&&c(a,null),null!==a.nextStates)for(const t of a.nextStates)c(t,null);null!==r&&(i.push(this.head=r),e.push(t),null!==r.endpoint&&(this.endpoint=r.endpoint)),0===o&&n.remove(this)}finalize(){!function t(e,i){const s=i.nextStates;if(null!==s)if(1===s.length&&null===s[0].segment)t(e,s[0]);else for(const i of s)if(i.isOptional&&null!==i.endpoint){if(e.push(i),null!==i.nextStates)for(const s of i.nextStates)t(e,s);break}}(this.skippedStates,this.head)}getParams(){const{states:t,chars:e,endpoint:i}=this,s={};for(const t of i.paramNames)s[t]=void 0;for(let i=0,n=t.length;i<n;++i){const n=t[i];if(n.isDynamic){const t=n.segment.name;void 0===s[t]?s[t]=e[i]:s[t]+=e[i]}}return s}compareTo(t){const e=this.states,i=t.states;for(let t=0,s=0,n=Math.max(e.length,i.length);t<n;++t){let n=e[t];if(void 0===n)return 1;let r=i[s];if(void 0===r)return-1;let o=n.segment,a=r.segment;if(null===o){if(null===a){++s;continue}if(void 0===(n=e[++t]))return 1;o=n.segment}else if(null===a){if(void 0===(r=i[++s]))return-1;a=r.segment}if(o.kind<a.kind)return 1;if(o.kind>a.kind)return-1;++s}const s=this.skippedStates,n=t.skippedStates,r=s.length,o=n.length;if(r<o)return 1;if(r>o)return-1;for(let t=0;t<r;++t){const e=s[t],i=n[t];if(e.length<i.length)return 1;if(e.length>i.length)return-1}return 0}}function Pf(t){return null!==t.head.endpoint}function jf(t,e){return t.compareTo(e)}class If{constructor(t){this.candidates=[],this.candidates=[new Of([""],[t],[],this)]}get isEmpty(){return 0===this.candidates.length}getSolution(){const t=this.candidates.filter(Pf);if(0===t.length)return null;for(const e of t)e.finalize();return t.sort(jf),t[0]}add(t){this.candidates.push(t)}remove(t){this.candidates.splice(this.candidates.indexOf(t),1)}advance(t){const e=this.candidates.slice();for(const i of e)i.advance(t)}}class Uf{constructor(){this.rootState=new Lf(null,null,""),this.cache=new Map}add(t){if(t instanceof Array)for(const e of t)this.$add(e);else this.$add(t);this.cache.clear()}$add(t){const e=t.path,i=new Tf(t.path,!0===t.caseSensitive,t.handler),s=""===e?[""]:e.split("/").filter(Mf),n=[];let r=this.rootState;for(const t of s)switch(r=r.append(null,"/"),t.charAt(0)){case":":{const e=t.endsWith("?"),i=e?t.slice(1,-1):t.slice(1);n.push(i),r=new Vf(i,e).appendTo(r);break}case"*":{const e=t.slice(1);n.push(e),r=new Df(e).appendTo(r);break}default:r=new Bf(t,i.caseSensitive).appendTo(r)}const o=new Rf(i,n);r.setEndpoint(o)}recognize(t){let e=this.cache.get(t);return void 0===e&&this.cache.set(t,e=this.$recognize(t)),e}$recognize(t){(t=decodeURI(t)).startsWith("/")||(t=`/${t}`),t.length>1&&t.endsWith("/")&&(t=t.slice(0,-1));const e=new If(this.rootState);for(let i=0,s=t.length;i<s;++i){const s=t.charAt(i);if(e.advance(s),e.isEmpty)return null}const i=e.getSolution();if(null===i)return null;const{endpoint:s}=i,n=i.getParams();return new Ef(s,n)}}class Lf{constructor(t,e,i){switch(this.prevState=t,this.segment=e,this.value=i,this.nextStates=null,this.endpoint=null,null==e?void 0:e.kind){case 2:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=e.optional;break;case 1:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!0,this.isOptional=!1;break;case 3:this.length=t.length+1,this.isSeparator=!1,this.isDynamic=!1,this.isOptional=!1;break;case void 0:this.length=null===t?0:t.length,this.isSeparator=!0,this.isDynamic=!1,this.isOptional=!1}}append(t,e){let i,s=this.nextStates;return null===s?(i=void 0,s=this.nextStates=[]):i=null===t?s.find((t=>t.value===e)):s.find((e=>{var i;return null===(i=e.segment)||void 0===i?void 0:i.equals(t)})),void 0===i&&s.push(i=new Lf(this,t,e)),i}setEndpoint(t){if(null!==this.endpoint)throw new Error(`Cannot add ambiguous route. The pattern '${t.route.path}' clashes with '${this.endpoint.route.path}'`);this.endpoint=t,this.isOptional&&(this.prevState.setEndpoint(t),this.prevState.isSeparator&&null!==this.prevState.prevState&&this.prevState.prevState.setEndpoint(t))}isMatch(t){const e=this.segment;switch(null==e?void 0:e.kind){case 2:return!this.value.includes(t);case 1:return!0;case 3:case void 0:return this.value.includes(t)}}}function Mf(t){return t.length>0}var Nf;!function(t){t[t.star=1]="star",t[t.dynamic=2]="dynamic",t[t.static=3]="static"}(Nf||(Nf={}));class Bf{constructor(t,e){this.value=t,this.caseSensitive=e}get kind(){return 3}appendTo(t){const{value:e,value:{length:i}}=this;if(this.caseSensitive)for(let s=0;s<i;++s)t=t.append(this,e.charAt(s));else for(let s=0;s<i;++s){const i=e.charAt(s);t=t.append(this,i.toUpperCase()+i.toLowerCase())}return t}equals(t){return 3===t.kind&&t.caseSensitive===this.caseSensitive&&t.value===this.value}}class Vf{constructor(t,e){this.name=t,this.optional=e}get kind(){return 2}appendTo(t){return t.append(this,"/")}equals(t){return 2===t.kind&&t.optional===this.optional&&t.name===this.name}}class Df{constructor(t){this.name=t}get kind(){return 1}appendTo(t){return t.append(this,"")}equals(t){return 1===t.kind&&t.name===this.name}}class qf{constructor(t,e,i){this.stack=t,this.cb=e,this.done=!1,this.next=null,this.head=null!=i?i:this}static start(t){return new qf(0,t,null)}push(){let t=this;do{++t.stack,t=t.next}while(null!==t)}pop(){let t=this;do{0==--t.stack&&t.invoke(),t=t.next}while(null!==t)}invoke(){const t=this.cb;null!==t&&(this.cb=null,t(this),this.done=!0)}continueWith(t){return null===this.next?this.next=new qf(this.stack,t,this.head):this.next.continueWith(t)}start(){return this.head.push(),this.head.pop(),this}}function Ff(t,e){t=t.slice(),e=e.slice();const i=[];for(;t.length>0;){const s=t.shift();if(i.every((t=>t.context.vpa!==s.context.vpa))){const t=e.findIndex((t=>t.context.vpa===s.context.vpa));t>=0?i.push(...e.splice(0,t+1)):i.push(s)}}return i.push(...e),i}function Hf(t){try{return JSON.stringify(t)}catch(e){return Object.prototype.toString.call(t)}}function Wf(t){return"string"==typeof t?[t]:t}function zf(t){return"object"==typeof t&&null!==t&&!Bl(t)}function Kf(t){return zf(t)&&!0===Object.prototype.hasOwnProperty.call(t,"name")}function Qf(t){return zf(t)&&!0===Object.prototype.hasOwnProperty.call(t,"component")}function Gf(t){return zf(t)&&!0===Object.prototype.hasOwnProperty.call(t,"redirectTo")}function Jf(t){return zf(t)&&!0===Object.prototype.hasOwnProperty.call(t,"component")}function _f(t,e,i){throw new Error(`Invalid route config property: "${e}". Expected ${t}, but got ${Hf(i)}.`)}function Yf(t,e){if(null==t)throw new Error(`Invalid route config: expected an object or string, but got: ${String(t)}.`);const i=Object.keys(t);for(const s of i){const i=t[s],n=[e,s].join(".");switch(s){case"id":case"viewport":case"redirectTo":"string"!=typeof i&&_f("string",n,i);break;case"caseSensitive":"boolean"!=typeof i&&_f("boolean",n,i);break;case"data":"object"==typeof i&&null!==i||_f("object",n,i);break;case"title":switch(typeof i){case"string":case"function":break;default:_f("string or function",n,i)}break;case"path":if(i instanceof Array)for(let t=0;t<i.length;++t)"string"!=typeof i[t]&&_f("string",`${n}[${t}]`,i[t]);else"string"!=typeof i&&_f("string or Array of strings",n,i);break;case"component":Zf(i,n);break;case"routes":i instanceof Array||_f("Array",n,i);for(const t of i)Zf(t,`${n}[${i.indexOf(t)}]`);break;case"transitionPlan":switch(typeof i){case"string":switch(i){case"none":case"replace":case"invoke-lifecycles":break;default:_f("string('none'|'replace'|'invoke-lifecycles') or function",n,i)}break;case"function":break;default:_f("string('none'|'replace'|'invoke-lifecycles') or function",n,i)}break;default:throw new Error(`Unknown route config property: "${e}.${s}". Please specify known properties only.`)}}}function Zf(t,e){switch(typeof t){case"function":case"string":break;case"object":if(t instanceof Promise)break;if(Gf(t)){!function(t,e){if(null==t)throw new Error(`Invalid route config: expected an object or string, but got: ${String(t)}.`);const i=Object.keys(t);for(const s of i){const i=t[s],n=[e,s].join(".");switch(s){case"path":case"redirectTo":"string"!=typeof i&&_f("string",n,i);break;default:throw new Error(`Unknown redirect config property: "${e}.${s}". Only 'path' and 'redirectTo' should be specified for redirects.`)}}}(t,e);break}if(Qf(t)){Yf(t,e);break}Bl(t)||Kf(t)||_f("an object with at least a 'component' property (see Routeable)",e,t);break;default:_f("function, object or string (see Routeable)",e,t)}}function Xf(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r!==s[n])return!1;if(t[r]!==e[r])return!1}return!0}function tg(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}function eg(t,e){return function(i,s){e(i,s,t)}}class ig{constructor(t,e,i){this.events=t,this.serial=e,this.inner=i,this.disposed=!1}dispose(){if(!this.disposed){this.disposed=!0,this.inner.dispose();const t=this.events.subscriptions;t.splice(t.indexOf(this),1)}}}const sg=Dt.createInterface("IRouterEvents",(t=>t.singleton(ng)));let ng=class{constructor(t,e){this.ea=t,this.logger=e,this.subscriptionSerial=0,this.subscriptions=[],this.logger=e.scopeTo("RouterEvents")}publish(t){this.logger.trace("publishing %s",t),this.ea.publish(t.name,t)}subscribe(t,e){const i=new ig(this,++this.subscriptionSerial,this.ea.subscribe(t,(s=>{this.logger.trace(`handling %s for subscription #${i.serial}`,t),e(s)})));return this.subscriptions.push(i),i}};ng=tg([eg(0,_e),eg(1,je)],ng);class rg{constructor(t,e,i,s){this.id=t,this.url=e,this.trigger=i,this.state=s}get name(){return"au:router:location-change"}toString(){return`LocationChangeEvent(id:${this.id},url:'${this.url}',trigger:'${this.trigger}')`}}class og{constructor(t,e,i,s){this.id=t,this.instructions=e,this.trigger=i,this.managedState=s}get name(){return"au:router:navigation-start"}toString(){return`NavigationStartEvent(id:${this.id},instructions:'${this.instructions}',trigger:'${this.trigger}')`}}class ag{constructor(t,e,i){this.id=t,this.instructions=e,this.finalInstructions=i}get name(){return"au:router:navigation-end"}toString(){return`NavigationEndEvent(id:${this.id},instructions:'${this.instructions}',finalInstructions:'${this.finalInstructions}')`}}class cg{constructor(t,e,i){this.id=t,this.instructions=e,this.reason=i}get name(){return"au:router:navigation-cancel"}toString(){return`NavigationCancelEvent(id:${this.id},instructions:'${this.instructions}',reason:${String(this.reason)})`}}const lg=Dt.createInterface("IBaseHrefProvider",(t=>t.singleton(ug)));class hg{constructor(t,e){this.path=t,this.rootedPath=e}}let ug=class{constructor(t){this.window=t}getBaseHref(){var t;const e=this.window.document.head.querySelector("base");if(null===e)return null;const i=fg(e.href),s=fg(null!==(t=e.getAttribute("href"))&&void 0!==t?t:"");return new hg(s,i)}};ug=tg([eg(0,ph)],ug);const dg=Dt.createInterface("ILocationManager",(t=>t.singleton(pg)));let pg=class{constructor(t,e,i,s,n,r){var o;this.logger=t,this.events=e,this.history=i,this.location=s,this.window=n,this.baseHrefProvider=r,this.eventId=0,this.logger=t.root.scopeTo("LocationManager");const a=r.getBaseHref();if(null===a){const t=null!==(o=s.origin)&&void 0!==o?o:"",e=this.baseHref=new hg("",fg(t));this.logger.warn(`no baseHref provided, defaulting to origin '${e.rootedPath}' (normalized from '${t}')`)}else this.baseHref=a,this.logger.debug(`baseHref set to path: '${a.path}', rootedPath: '${a.rootedPath}'`)}startListening(){this.logger.trace("startListening()"),this.window.addEventListener("popstate",this.onPopState,!1),this.window.addEventListener("hashchange",this.onHashChange,!1)}stopListening(){this.logger.trace("stopListening()"),this.window.removeEventListener("popstate",this.onPopState,!1),this.window.removeEventListener("hashchange",this.onHashChange,!1)}onPopState(t){this.logger.trace("onPopState()"),this.events.publish(new rg(++this.eventId,this.getPath(),"popstate",t.state))}onHashChange(t){this.logger.trace("onHashChange()"),this.events.publish(new rg(++this.eventId,this.getPath(),"hashchange",null))}pushState(t,e,i){i=this.addBaseHref(i);try{const s=JSON.stringify(t);this.logger.trace(`pushState(state:${s},title:'${e}',url:'${i}')`)}catch(t){this.logger.warn(`pushState(state:NOT_SERIALIZABLE,title:'${e}',url:'${i}')`)}this.history.pushState(t,e,i)}replaceState(t,e,i){i=this.addBaseHref(i);try{const s=JSON.stringify(t);this.logger.trace(`replaceState(state:${s},title:'${e}',url:'${i}')`)}catch(t){this.logger.warn(`replaceState(state:NOT_SERIALIZABLE,title:'${e}',url:'${i}')`)}this.history.replaceState(t,e,i)}getPath(){const{pathname:t,search:e,hash:i}=this.location,s=this.removeBaseHref(`${t}${function(t){return t.length>0&&!t.startsWith("?")?`?${t}`:t}(e)}${i}`);return this.logger.trace(`getPath() -> '${s}'`),s}currentPathEquals(t){const e=this.getPath()===this.removeBaseHref(t);return this.logger.trace(`currentPathEquals(path:'${t}') -> ${e}`),e}addBaseHref(t){const e=t;let i,s=this.baseHref.rootedPath;return s.endsWith("/")&&(s=s.slice(0,-1)),0===s.length?i=t:(t.startsWith("/")&&(t=t.slice(1)),i=`${s}/${t}`),this.logger.trace(`addBaseHref(path:'${e}') -> '${i}'`),i}removeBaseHref(t){const e=t;return t.startsWith(this.baseHref.path)&&(t=t.slice(this.baseHref.path.length)),t=fg(t),this.logger.trace(`removeBaseHref(path:'${e}') -> '${t}'`),t}};function fg(t){let e,i,s;return(s=t.indexOf("?"))>=0||(s=t.indexOf("#"))>=0?(e=t.slice(0,s),i=t.slice(s)):(e=t,i=""),e.endsWith("/")?e=e.slice(0,-1):e.endsWith("/index.html")&&(e=e.slice(0,-11)),`${e}${i}`}tg([dt],pg.prototype,"onPopState",null),tg([dt],pg.prototype,"onHashChange",null),pg=tg([eg(0,je),eg(1,sg),eg(2,gh),eg(3,fh),eg(4,ph),eg(5,lg)],pg);class gg{constructor(t,e,i,s){this.viewportName=t,this.componentName=e,this.resolution=i,this.append=s}static create(t){return new gg(t.viewportName,t.componentName,t.resolution,t.append)}toString(){return`VR(viewport:'${this.viewportName}',component:'${this.componentName}',resolution:'${this.resolution}',append:${this.append})`}}const vg=new WeakMap;class mg{constructor(t,e,i){this.viewport=t,this.hostController=e,this.ctx=i,this.isActive=!1,this.curCA=null,this.nextCA=null,this.state=8256,this.$resolution="dynamic",this.$plan="replace",this.currNode=null,this.nextNode=null,this.currTransition=null,this.prevTransition=null,this.logger=i.container.get(je).scopeTo(`ViewportAgent<${i.friendlyPath}>`),this.logger.trace("constructor()")}get $state(){return function(t){let e=$g.get(t);return void 0===e&&$g.set(t,e=function(t){const e=[];return 8192==(8192&t)&&e.push("currIsEmpty"),4096==(4096&t)&&e.push("currIsActive"),2048==(2048&t)&&e.push("currCanUnload"),1024==(1024&t)&&e.push("currCanUnloadDone"),512==(512&t)&&e.push("currUnload"),256==(256&t)&&e.push("currUnloadDone"),128==(128&t)&&e.push("currDeactivate"),64==(64&t)&&e.push("nextIsEmpty"),32==(32&t)&&e.push("nextIsScheduled"),16==(16&t)&&e.push("nextCanLoad"),8==(8&t)&&e.push("nextCanLoadDone"),4==(4&t)&&e.push("nextLoad"),2==(2&t)&&e.push("nextLoadDone"),1==(1&t)&&e.push("nextActivate"),e.join("|")}(t)),e}(this.state)}get currState(){return 16256&this.state}set currState(t){this.state=127&this.state|t}get nextState(){return 127&this.state}set nextState(t){this.state=16256&this.state|t}static for(t,e){let i=vg.get(t);if(void 0===i){const s=jl.getCachedOrThrow(t);vg.set(t,i=new mg(t,s,e))}return i}activateFromViewport(t,e,i){const s=this.currTransition;switch(null!==s&&bg(s),this.isActive=!0,this.nextState){case 64:switch(this.currState){case 8192:return void this.logger.trace("activateFromViewport() - nothing to activate at %s",this);case 4096:return this.logger.trace("activateFromViewport() - activating existing componentAgent at %s",this),this.curCA.activate(t,e,i);default:this.unexpectedState("activateFromViewport 1")}case 2:{if(null===this.currTransition)throw new Error(`Unexpected viewport activation outside of a transition context at ${this}`);if("static"!==this.$resolution)throw new Error(`Unexpected viewport activation at ${this}`);this.logger.trace("activateFromViewport() - running ordinary activate at %s",this);const e=qf.start((e=>{this.activate(t,this.currTransition,e)})),i=new Promise((t=>{e.continueWith((()=>{t()}))}));return e.start().done?void 0:i}default:this.unexpectedState("activateFromViewport 2")}}deactivateFromViewport(t,e,i){const s=this.currTransition;switch(null!==s&&bg(s),this.isActive=!1,this.currState){case 8192:return void this.logger.trace("deactivateFromViewport() - nothing to deactivate at %s",this);case 4096:return this.logger.trace("deactivateFromViewport() - deactivating existing componentAgent at %s",this),this.curCA.deactivate(t,e,i);case 128:return void this.logger.trace("deactivateFromViewport() - already deactivating at %s",this);default:{if(null===this.currTransition)throw new Error(`Unexpected viewport deactivation outside of a transition context at ${this}`);this.logger.trace("deactivateFromViewport() - running ordinary deactivate at %s",this);const e=qf.start((e=>{this.deactivate(t,this.currTransition,e)})),i=new Promise((t=>{e.continueWith((()=>{t()}))}));return e.start().done?void 0:i}}}handles(t){return!(!this.isAvailable(t.resolution)||(t.append&&4096===this.currState?(this.logger.trace("handles(req:%s) -> false (append mode, viewport already has content %s)",t,this.curCA),1):t.viewportName.length>0&&this.viewport.name!==t.viewportName?(this.logger.trace("handles(req:%s) -> false (names don't match)",t),1):this.viewport.usedBy.length>0&&!this.viewport.usedBy.split(",").includes(t.componentName)?(this.logger.trace("handles(req:%s) -> false (componentName not included in usedBy)",t),1):(this.logger.trace("handles(req:%s) -> true",t),0)))}isAvailable(t){return"dynamic"!==t||this.isActive?64===this.nextState||(this.logger.trace("isAvailable(resolution:%s) -> false (update already scheduled for %s)",t,this.nextNode),!1):(this.logger.trace("isAvailable(resolution:%s) -> false (viewport is not active and we're in dynamic resolution resolution)",t),!1)}canUnload(t,e){null===this.currTransition&&(this.currTransition=t),bg(t),!0===t.guardsResult&&(e.push(),qf.start((e=>{this.logger.trace("canUnload() - invoking on children at %s",this);for(const i of this.currNode.children)i.context.vpa.canUnload(t,e)})).continueWith((e=>{switch(this.currState){case 4096:switch(this.logger.trace("canUnload() - invoking on existing component at %s",this),this.$plan){case"none":return void(this.currState=1024);case"invoke-lifecycles":case"replace":return this.currState=2048,e.push(),void qf.start((e=>{this.logger.trace("canUnload() - finished invoking on children, now invoking on own component at %s",this),this.curCA.canUnload(t,this.nextNode,e)})).continueWith((()=>{this.logger.trace("canUnload() - finished at %s",this),this.currState=1024,e.pop()})).start()}case 8192:return void this.logger.trace("canUnload() - nothing to unload at %s",this);default:t.handleError(new Error(`Unexpected state at canUnload of ${this}`))}})).continueWith((()=>{e.pop()})).start())}canLoad(t,e){null===this.currTransition&&(this.currTransition=t),bg(t),!0===t.guardsResult&&(e.push(),qf.start((e=>{switch(this.nextState){case 32:switch(this.logger.trace("canLoad() - invoking on new component at %s",this),this.nextState=16,this.$plan){case"none":return;case"invoke-lifecycles":return this.curCA.canLoad(t,this.nextNode,e);case"replace":return this.nextCA=this.nextNode.context.createComponentAgent(this.hostController,this.nextNode),this.nextCA.canLoad(t,this.nextNode,e)}case 64:return void this.logger.trace("canLoad() - nothing to load at %s",this);default:this.unexpectedState("canLoad")}})).continueWith((t=>{const e=this.nextNode;switch(this.$plan){case"none":case"invoke-lifecycles":return this.logger.trace("canLoad(next:%s) - plan set to '%s', compiling residue",e,this.$plan),t.push(),void wt(Fg(e),(()=>{t.pop()}));case"replace":switch(this.$resolution){case"dynamic":return void this.logger.trace("canLoad(next:%s) - (resolution: 'dynamic'), delaying residue compilation until activate",e,this.$plan);case"static":return this.logger.trace(`canLoad(next:%s) - (resolution: '${this.$resolution}'), creating nextCA and compiling residue`,e,this.$plan),t.push(),void wt(Fg(e),(()=>{t.pop()}))}}})).continueWith((e=>{switch(this.nextState){case 16:this.logger.trace("canLoad() - finished own component, now invoking on children at %s",this),this.nextState=8;for(const i of this.nextNode.children)i.context.vpa.canLoad(t,e);return;case 64:return;default:this.unexpectedState("canLoad")}})).continueWith((()=>{this.logger.trace("canLoad() - finished at %s",this),e.pop()})).start())}unload(t,e){bg(t),wg(this,t),e.push(),qf.start((e=>{this.logger.trace("unload() - invoking on children at %s",this);for(const i of this.currNode.children)i.context.vpa.unload(t,e)})).continueWith((i=>{switch(this.currState){case 1024:switch(this.logger.trace("unload() - invoking on existing component at %s",this),this.$plan){case"none":return void(this.currState=256);case"invoke-lifecycles":case"replace":return this.currState=512,i.push(),void qf.start((e=>{this.logger.trace("unload() - finished invoking on children, now invoking on own component at %s",this),this.curCA.unload(t,this.nextNode,e)})).continueWith((()=>{this.logger.trace("unload() - finished at %s",this),this.currState=256,i.pop()})).start()}case 8192:this.logger.trace("unload() - nothing to unload at %s",this);for(const i of this.currNode.children)i.context.vpa.unload(t,e);return;default:this.unexpectedState("unload")}})).continueWith((()=>{e.pop()})).start()}load(t,e){bg(t),wg(this,t),e.push(),qf.start((e=>{switch(this.nextState){case 8:switch(this.logger.trace("load() - invoking on new component at %s",this),this.nextState=4,this.$plan){case"none":return;case"invoke-lifecycles":return this.curCA.load(t,this.nextNode,e);case"replace":return this.nextCA.load(t,this.nextNode,e)}case 64:return void this.logger.trace("load() - nothing to load at %s",this);default:this.unexpectedState("load")}})).continueWith((e=>{switch(this.nextState){case 4:this.logger.trace("load() - finished own component, now invoking on children at %s",this),this.nextState=2;for(const i of this.nextNode.children)i.context.vpa.load(t,e);return;case 64:return;default:this.unexpectedState("load")}})).continueWith((()=>{this.logger.trace("load() - finished at %s",this),e.pop()})).start()}deactivate(t,e,i){switch(bg(e),wg(this,e),i.push(),this.currState){case 256:switch(this.logger.trace("deactivate() - invoking on existing component at %s",this),this.currState=128,this.$plan){case"none":case"invoke-lifecycles":return void i.pop();case"replace":{const s=this.hostController,n=this.viewport.stateful?0:32;e.run((()=>this.curCA.deactivate(t,s,n)),(()=>{i.pop()}))}}return;case 8192:return this.logger.trace("deactivate() - nothing to deactivate at %s",this),void i.pop();case 128:return this.logger.trace("deactivate() - already deactivating at %s",this),void i.pop();default:this.unexpectedState("deactivate")}}activate(t,e,i){if(bg(e),wg(this,e),i.push(),32===this.nextState&&"dynamic"===this.$resolution)return this.logger.trace("activate() - invoking canLoad(), load() and activate() on new component due to resolution 'dynamic' at %s",this),void qf.start((t=>{this.canLoad(e,t)})).continueWith((t=>{this.load(e,t)})).continueWith((i=>{this.activate(t,e,i)})).continueWith((()=>{i.pop()})).start();switch(this.nextState){case 2:return this.logger.trace("activate() - invoking on existing component at %s",this),this.nextState=1,void qf.start((i=>{switch(this.$plan){case"none":case"invoke-lifecycles":return;case"replace":{const s=this.hostController,n=0;e.run((()=>(i.push(),this.nextCA.activate(t,s,n))),(()=>{i.pop()}))}}})).continueWith((t=>{this.processDynamicChildren(e,t)})).continueWith((()=>{i.pop()})).start();case 64:return this.logger.trace("activate() - nothing to activate at %s",this),void i.pop();default:this.unexpectedState("activate")}}swap(t,e){if(8192===this.currState)return this.logger.trace("swap() - running activate on next instead, because there is nothing to deactivate at %s",this),void this.activate(null,t,e);if(64===this.nextState)return this.logger.trace("swap() - running deactivate on current instead, because there is nothing to activate at %s",this),void this.deactivate(null,t,e);switch(bg(t),wg(this,t),256===this.currState&&2===this.nextState||this.unexpectedState("swap"),this.currState=128,this.nextState=1,this.$plan){case"none":case"invoke-lifecycles":{this.logger.trace("swap() - skipping this level and swapping children instead at %s",this);const i=Ff(this.nextNode.children,this.currNode.children);for(const s of i)s.context.vpa.swap(t,e);return}case"replace":{this.logger.trace("swap() - running normally at %s",this);const i=this.hostController,s=this.curCA,n=this.nextCA,r=this.viewport.stateful?0:32,o=0;switch(e.push(),t.options.swapStrategy){case"sequential-add-first":return void qf.start((e=>{t.run((()=>(e.push(),n.activate(null,i,o))),(()=>{e.pop()}))})).continueWith((e=>{this.processDynamicChildren(t,e)})).continueWith((()=>{t.run((()=>s.deactivate(null,i,r)),(()=>{e.pop()}))})).start();case"sequential-remove-first":return void qf.start((e=>{t.run((()=>(e.push(),s.deactivate(null,i,r))),(()=>{e.pop()}))})).continueWith((e=>{t.run((()=>(e.push(),n.activate(null,i,o))),(()=>{e.pop()}))})).continueWith((e=>{this.processDynamicChildren(t,e)})).continueWith((()=>{e.pop()})).start();case"parallel-remove-first":return t.run((()=>(e.push(),s.deactivate(null,i,r))),(()=>{e.pop()})),void qf.start((e=>{t.run((()=>(e.push(),n.activate(null,i,o))),(()=>{e.pop()}))})).continueWith((e=>{this.processDynamicChildren(t,e)})).continueWith((()=>{e.pop()})).start()}}}}processDynamicChildren(t,e){this.logger.trace("processDynamicChildren() - %s",this);const i=this.nextNode;t.run((()=>(e.push(),function(t){const e=t.context,i=e.container.get(je).scopeTo("RouteTree"),s=e.resolved instanceof Promise?" - awaiting promise":"";return i.trace(`getDynamicChildren(node:%s)${s}`,t),wt(e.resolved,(()=>{const s=t.children.slice();return wt(bt(...t.residue.splice(0).map((e=>Hg(i,t,e,t.append))),...e.getAvailableViewportAgents("dynamic").map((e=>{const s=sv.create({component:e.viewport.default,viewport:e.viewport.name});return Hg(i,t,s,t.append)}))),(()=>t.children.filter((t=>!s.includes(t)))))}))}(i))),(i=>{qf.start((e=>{for(const s of i)t.run((()=>(e.push(),s.context.vpa.canLoad(t,e))),(()=>{e.pop()}))})).continueWith((e=>{for(const s of i)t.run((()=>(e.push(),s.context.vpa.load(t,e))),(()=>{e.pop()}))})).continueWith((e=>{for(const s of i)t.run((()=>(e.push(),s.context.vpa.activate(null,t,e))),(()=>{e.pop()}))})).continueWith((()=>{e.pop()})).start()}))}scheduleUpdate(t,e){var i,s;switch(64===this.nextState?(this.nextNode=e,this.nextState=32,this.$resolution=t.resolutionMode):this.unexpectedState("scheduleUpdate 1"),this.currState){case 8192:case 4096:case 1024:break;default:this.unexpectedState("scheduleUpdate 2")}const n=null!==(s=null===(i=this.curCA)||void 0===i?void 0:i.routeNode)&&void 0!==s?s:null;if(null===n||n.component!==e.component)this.$plan="replace";else{const t=e.context.definition.config.transitionPlan;this.$plan="function"==typeof t?t(n,e):t}this.logger.trace("scheduleUpdate(next:%s) - plan set to '%s'",e,this.$plan)}cancelUpdate(){switch(null!==this.currNode&&this.currNode.children.forEach((function(t){t.context.vpa.cancelUpdate()})),null!==this.nextNode&&this.nextNode.children.forEach((function(t){t.context.vpa.cancelUpdate()})),this.logger.trace("cancelUpdate(nextNode:%s)",this.nextNode),this.currState){case 8192:case 4096:break;case 2048:case 1024:this.currState=4096}switch(this.nextState){case 64:case 32:case 16:case 8:this.nextNode=null,this.nextState=64}}endTransition(){if(null!==this.currNode&&this.currNode.children.forEach((function(t){t.context.vpa.endTransition()})),null!==this.nextNode&&this.nextNode.children.forEach((function(t){t.context.vpa.endTransition()})),null!==this.currTransition){switch(bg(this.currTransition),this.nextState){case 64:128===this.currState?(this.logger.trace("endTransition() - setting currState to State.nextIsEmpty at %s",this),this.currState=8192,this.curCA=null):this.unexpectedState("endTransition 1");break;case 1:switch(this.currState){case 8192:case 128:switch(this.$plan){case"none":case"invoke-lifecycles":this.logger.trace("endTransition() - setting currState to State.currIsActive at %s",this),this.currState=4096;break;case"replace":this.logger.trace("endTransition() - setting currState to State.currIsActive and reassigning curCA at %s",this),this.currState=4096,this.curCA=this.nextCA}this.currNode=this.nextNode;break;default:this.unexpectedState("endTransition 2")}break;default:this.unexpectedState("endTransition 3")}this.$plan="replace",this.nextState=64,this.nextNode=null,this.nextCA=null,this.prevTransition=this.currTransition,this.currTransition=null}}toString(){return`VPA(state:${this.$state},plan:'${this.$plan}',resolution:'${this.$resolution}',n:${this.nextNode},c:${this.currNode},viewport:${this.viewport})`}dispose(){var t;this.viewport.stateful?this.logger.trace("dispose() - not disposing stateful viewport at %s",this):(this.logger.trace("dispose() - disposing %s",this),null===(t=this.curCA)||void 0===t||t.dispose())}unexpectedState(t){throw new Error(`Unexpected state at ${t} of ${this}`)}}function wg(t,e){if(!0!==e.guardsResult)throw new Error(`Unexpected guardsResult ${e.guardsResult} at ${t}`)}function bg(t){if(void 0!==t.error)throw t.error}var yg;!function(t){t[t.curr=16256]="curr",t[t.currIsEmpty=8192]="currIsEmpty",t[t.currIsActive=4096]="currIsActive",t[t.currCanUnload=2048]="currCanUnload",t[t.currCanUnloadDone=1024]="currCanUnloadDone",t[t.currUnload=512]="currUnload",t[t.currUnloadDone=256]="currUnloadDone",t[t.currDeactivate=128]="currDeactivate",t[t.next=127]="next",t[t.nextIsEmpty=64]="nextIsEmpty",t[t.nextIsScheduled=32]="nextIsScheduled",t[t.nextCanLoad=16]="nextCanLoad",t[t.nextCanLoadDone=8]="nextCanLoadDone",t[t.nextLoad=4]="nextLoad",t[t.nextLoadDone=2]="nextLoadDone",t[t.nextActivate=1]="nextActivate",t[t.bothAreEmpty=8256]="bothAreEmpty"}(yg||(yg={}));const $g=new Map,kg=["?","#","/","+","(",")",".","@","!","=",",","&","'","~",";"];class xg{constructor(t){this.input=t,this.buffers=[],this.bufferIndex=0,this.index=0,this.rest=t}get done(){return 0===this.rest.length}startsWith(...t){const e=this.rest;return t.some((function(t){return e.startsWith(t)}))}consumeOptional(t){return!!this.startsWith(t)&&(this.rest=this.rest.slice(t.length),this.index+=t.length,this.append(t),!0)}consume(t){this.consumeOptional(t)||this.expect(`'${t}'`)}expect(t){throw new Error(`Expected ${t} at index ${this.index} of '${this.input}', but got: '${this.rest}' (rest='${this.rest}')`)}ensureDone(){if(!this.done)throw new Error(`Unexpected '${this.rest}' at index ${this.index} of '${this.input}'`)}advance(){const t=this.rest[0];this.rest=this.rest.slice(1),++this.index,this.append(t)}record(){this.buffers[this.bufferIndex++]=""}playback(){const t=--this.bufferIndex,e=this.buffers,i=e[t];return e[t]="",i}discard(){this.buffers[--this.bufferIndex]=""}append(t){const e=this.bufferIndex,i=this.buffers;for(let s=0;s<e;++s)i[s]+=t}}var Cg;!function(t){t[t.Route=0]="Route",t[t.CompositeSegment=1]="CompositeSegment",t[t.ScopedSegment=2]="ScopedSegment",t[t.SegmentGroup=3]="SegmentGroup",t[t.Segment=4]="Segment",t[t.Component=5]="Component",t[t.Action=6]="Action",t[t.Viewport=7]="Viewport",t[t.ParameterList=8]="ParameterList",t[t.Parameter=9]="Parameter"}(Cg||(Cg={}));const Sg=new Map,Ag=new Map;class Tg{constructor(t,e,i,s,n,r){this.raw=t,this.isAbsolute=e,this.root=i,this.queryParams=s,this.fragment=n,this.fragmentIsRoute=r}get kind(){return 0}static parse(t,e){const i=e?Sg:Ag;let s=i.get(t);return void 0===s&&i.set(t,s=Tg.$parse(t,e)),s}static $parse(t,e){let i;const s=t.indexOf("#");if(s>=0){const n=t.slice(s+1);i=decodeURIComponent(n),t=e?i:t.slice(0,s)}else e&&(t=""),i=null;let n=null;const r=t.indexOf("?");if(r>=0){const e=t.slice(r+1);t=t.slice(0,r),n=new URLSearchParams(e)}if(""===t)return new Tg("",!1,Pg.EMPTY,null!=n?Object.freeze(n):Qg,i,e);const o=new xg(t);o.record();const a=o.consumeOptional("/"),c=Rg.parse(o);o.ensureDone();const l=o.playback();return new Tg(l,a,c,null!=n?Object.freeze(n):Qg,i,e)}toInstructionTree(t){let e=this.queryParams;const i=t.queryParams;return null!=i&&(e=new URLSearchParams({...Object.fromEntries(e.entries()),...i})),new rv(t,this.isAbsolute,this.root.toInstructions(t.append,0,0),e,this.fragment)}toString(){return this.raw}}class Rg{constructor(t,e,i){this.raw=t,this.siblings=e,this.append=i}get kind(){return 1}static parse(t){t.record();const e=t.consumeOptional("+"),i=[];do{i.push(Eg.parse(t))}while(t.consumeOptional("+"));if(!e&&1===i.length)return t.discard(),i[0];const s=t.playback();return new Rg(s,i,e)}toInstructions(t,e,i){switch(this.siblings.length){case 0:return[];case 1:return this.siblings[0].toInstructions(t,e,i);case 2:return[...this.siblings[0].toInstructions(t,e,0),...this.siblings[1].toInstructions(t,0,i)];default:return[...this.siblings[0].toInstructions(t,e,0),...this.siblings.slice(1,-1).flatMap((function(e){return e.toInstructions(t,0,0)})),...this.siblings[this.siblings.length-1].toInstructions(t,0,i)]}}toString(){return this.raw}}class Eg{constructor(t,e,i){this.raw=t,this.left=e,this.right=i}get kind(){return 2}static parse(t){t.record();const e=Og.parse(t);if(t.consumeOptional("/")){const i=Eg.parse(t),s=t.playback();return new Eg(s,e,i)}return t.discard(),e}toInstructions(t,e,i){const s=this.left.toInstructions(t,e,0),n=this.right.toInstructions(!1,0,i);let r=s[s.length-1];for(;r.children.length>0;)r=r.children[r.children.length-1];return r.children.push(...n),s}toString(){return this.raw}}class Og{constructor(t,e){this.raw=t,this.expression=e}get kind(){return 3}static parse(t){if(t.record(),t.consumeOptional("(")){const e=Rg.parse(t);t.consume(")");const i=t.playback();return new Og(i,e)}return t.discard(),Pg.parse(t)}toInstructions(t,e,i){return this.expression.toInstructions(t,e+1,i+1)}toString(){return this.raw}}class Pg{constructor(t,e,i,s,n){this.raw=t,this.component=e,this.action=i,this.viewport=s,this.scoped=n}get kind(){return 4}static get EMPTY(){return new Pg("",jg.EMPTY,Ig.EMPTY,Ug.EMPTY,!0)}static parse(t){t.record();const e=jg.parse(t),i=Ig.parse(t),s=Ug.parse(t),n=!t.consumeOptional("!"),r=t.playback();return new Pg(r,e,i,s,n)}toInstructions(t,e,i){return[sv.create({component:this.component.name,params:this.component.parameterList.toObject(),viewport:this.viewport.name,append:t,open:e,close:i})]}toString(){return this.raw}}class jg{constructor(t,e,i){switch(this.raw=t,this.name=e,this.parameterList=i,e.charAt(0)){case":":this.isParameter=!0,this.isStar=!1,this.isDynamic=!0,this.parameterName=e.slice(1);break;case"*":this.isParameter=!1,this.isStar=!0,this.isDynamic=!0,this.parameterName=e.slice(1);break;default:this.isParameter=!1,this.isStar=!1,this.isDynamic=!1,this.parameterName=e}}get kind(){return 5}static get EMPTY(){return new jg("","",Lg.EMPTY)}static parse(t){if(t.record(),t.record(),!t.done)if(t.startsWith("./"))t.advance();else if(t.startsWith("../"))t.advance(),t.advance();else for(;!t.done&&!t.startsWith(...kg);)t.advance();const e=decodeURIComponent(t.playback());0===e.length&&t.expect("component name");const i=Lg.parse(t),s=t.playback();return new jg(s,e,i)}toString(){return this.raw}}class Ig{constructor(t,e,i){this.raw=t,this.name=e,this.parameterList=i}get kind(){return 6}static get EMPTY(){return new Ig("","",Lg.EMPTY)}static parse(t){t.record();let e="";if(t.consumeOptional(".")){for(t.record();!t.done&&!t.startsWith(...kg);)t.advance();e=decodeURIComponent(t.playback()),0===e.length&&t.expect("method name")}const i=Lg.parse(t),s=t.playback();return new Ig(s,e,i)}toString(){return this.raw}}class Ug{constructor(t,e){this.raw=t,this.name=e}get kind(){return 7}static get EMPTY(){return new Ug("","")}static parse(t){t.record();let e="";if(t.consumeOptional("@")){for(t.record();!t.done&&!t.startsWith(...kg);)t.advance();e=decodeURIComponent(t.playback()),0===e.length&&t.expect("viewport name")}const i=t.playback();return new Ug(i,e)}toString(){return this.raw}}class Lg{constructor(t,e){this.raw=t,this.expressions=e}get kind(){return 8}static get EMPTY(){return new Lg("",[])}static parse(t){t.record();const e=[];if(t.consumeOptional("(")){do{if(e.push(Mg.parse(t,e.length)),!t.consumeOptional(","))break}while(!t.done&&!t.startsWith(")"));t.consume(")")}const i=t.playback();return new Lg(i,e)}toObject(){const t={};for(const e of this.expressions)t[e.key]=e.value;return t}toString(){return this.raw}}class Mg{constructor(t,e,i){this.raw=t,this.key=e,this.value=i}get kind(){return 9}static get EMPTY(){return new Mg("","","")}static parse(t,e){for(t.record(),t.record();!t.done&&!t.startsWith(...kg);)t.advance();let i,s=decodeURIComponent(t.playback());if(0===s.length&&t.expect("parameter key"),t.consumeOptional("=")){for(t.record();!t.done&&!t.startsWith(...kg);)t.advance();i=decodeURIComponent(t.playback()),0===i.length&&t.expect("parameter value")}else i=s,s=e.toString();const n=t.playback();return new Mg(n,s,i)}toString(){return this.raw}}Object.freeze({RouteExpression:Tg,CompositeSegmentExpression:Rg,ScopedSegmentExpression:Eg,SegmentGroupExpression:Og,SegmentExpression:Pg,ComponentExpression:jg,ActionExpression:Ig,ViewportExpression:Ug,ParameterListExpression:Lg,ParameterExpression:Mg});let Ng=0;class Bg{constructor(t,e,i,s,n,r,o,a,c,l,h,u,d,p,f,g){this.id=t,this.path=e,this.finalPath=i,this.context=s,this.originalInstruction=n,this.instruction=r,this.params=o,this.queryParams=a,this.fragment=c,this.data=l,this.viewport=h,this.title=u,this.component=d,this.append=p,this.children=f,this.residue=g,this.version=1,this.originalInstruction=r}get root(){return this.tree.root}static create(t){var e,i,s,n,r,o,a,c;return new Bg(++Ng,t.path,t.finalPath,t.context,t.instruction,t.instruction,null!==(e=t.params)&&void 0!==e?e:{},null!==(i=t.queryParams)&&void 0!==i?i:Qg,null!==(s=t.fragment)&&void 0!==s?s:null,null!==(n=t.data)&&void 0!==n?n:{},null!==(r=t.viewport)&&void 0!==r?r:null,null!==(o=t.title)&&void 0!==o?o:null,t.component,t.append,null!==(a=t.children)&&void 0!==a?a:[],null!==(c=t.residue)&&void 0!==c?c:[])}contains(t){var e,i;if(this.context===t.options.context){const s=this.children,n=t.children;for(let t=0,r=s.length;t<r;++t)for(let o=0,a=n.length;o<a&&t+o<r&&null!==(i=null===(e=s[t+o].instruction)||void 0===e?void 0:e.contains(n[o]))&&void 0!==i&&i;++o)if(o+1===a)return!0}return this.children.some((function(e){return e.contains(t)}))}appendChild(t){this.children.push(t),t.setTree(this.tree)}appendChildren(...t){for(const e of t)this.appendChild(e)}clearChildren(){for(const t of this.children)t.clearChildren(),t.context.vpa.cancelUpdate();this.children.length=0}getTitle(t){const e=[...this.children.map((e=>e.getTitle(t))),this.getTitlePart(),this.context.definition.config.title].filter((t=>null!==t));return 0===e.length?null:e.join(t)}getTitlePart(){return"function"==typeof this.title?this.title.call(void 0,this):this.title}computeAbsolutePath(){if(this.context.isRoot)return"";const t=this.context.parent.node.computeAbsolutePath(),e=this.instruction.toUrlComponent(!1);return t.length>0?e.length>0?[t,e].join("/"):t:e}setTree(t){this.tree=t;for(const e of this.children)e.setTree(t)}finalizeInstruction(){const t=this.children.map((t=>t.finalizeInstruction())),e=this.instruction.clone();return e.children.splice(0,e.children.length,...t),this.instruction=e}clone(){const t=new Bg(this.id,this.path,this.finalPath,this.context,this.originalInstruction,this.instruction,{...this.params},{...this.queryParams},this.fragment,{...this.data},this.viewport,this.title,this.component,this.append,this.children.map((t=>t.clone())),[...this.residue]);return t.version=this.version+1,t.context.node===this&&(t.context.node=t),t}toString(){var t,e,i,s,n,r;const o=[],a=null!==(i=null===(e=null===(t=this.context)||void 0===t?void 0:t.definition.component)||void 0===e?void 0:e.name)&&void 0!==i?i:"";a.length>0&&o.push(`c:'${a}'`);const c=null!==(n=null===(s=this.context)||void 0===s?void 0:s.definition.config.path)&&void 0!==n?n:"";return c.length>0&&o.push(`path:'${c}'`),this.children.length>0&&o.push(`children:[${this.children.map(String).join(",")}]`),this.residue.length>0&&o.push(`residue:${this.residue.map((function(t){return"string"==typeof t?`'${t}'`:String(t)})).join(",")}`),`RN(ctx:'${null===(r=this.context)||void 0===r?void 0:r.friendlyPath}',${o.join(",")})`}}class Vg{constructor(t,e,i,s){this.options=t,this.queryParams=e,this.fragment=i,this.root=s}contains(t){return this.root.contains(t)}clone(){const t=new Vg(this.options.clone(),{...this.queryParams},this.fragment,this.root.clone());return t.root.setTree(this),t}finalizeInstructions(){return new rv(this.options,!0,this.root.children.map((t=>t.finalizeInstruction())),this.queryParams,this.fragment)}toString(){return this.root.toString()}}function Dg(t,e,i){const s=i.container.get(je).scopeTo("RouteTree"),n=i.root;t.options=e.options,t.queryParams=e.queryParams,t.fragment=e.fragment,e.isAbsolute&&(i=n),i===n&&(t.root.setTree(t),n.node=t.root);const r=i.resolved instanceof Promise?" - awaiting promise":"";return s.trace(`updateRouteTree(rootCtx:%s,rt:%s,vit:%s)${r}`,n,t,e),wt(i.resolved,(()=>qg(s,e,i,n.node)))}function qg(t,e,i,s){let n;return t.trace("updateNode(ctx:%s,node:%s)",i,s),s.queryParams=e.queryParams,s.fragment=e.fragment,n=s.context.isRoot?void 0:s.context.vpa.scheduleUpdate(s.tree.options,s),wt(n,(()=>s.context===i?(s.clearChildren(),wt(bt(...e.children.map((e=>Hg(t,s,e,s.tree.options.append||e.append)))),(()=>bt(...i.getAvailableViewportAgents("dynamic").map((e=>{const i=sv.create({component:e.viewport.default,viewport:e.viewport.name});return Hg(t,s,i,s.append)})))))):bt(...s.children.map((s=>qg(t,e,i,s))))))}function Fg(t){const e=t.context,i=e.container.get(je).scopeTo("RouteTree"),s=e.resolved instanceof Promise?" - awaiting promise":"";return i.trace(`processResidue(node:%s)${s}`,t),wt(e.resolved,(()=>bt(...t.residue.splice(0).map((e=>Hg(i,t,e,t.append))),...e.getAvailableViewportAgents("static").map((e=>{const s=sv.create({component:e.viewport.default,viewport:e.viewport.name});return Hg(i,t,s,t.append)})))))}function Hg(t,e,i,s){var n,r;switch(t.trace(`createAndAppendNodes(node:%s,vi:%s,append:${s})`,e,i),i.component.type){case 0:switch(i.component.value){case"..":e.clearChildren(),e=null!==(r=null===(n=e.context.parent)||void 0===n?void 0:n.node)&&void 0!==r?r:e;case".":return bt(...i.children.map((i=>Hg(t,e,i,i.append))));default:{const n=function(t,e,i,s){const n=e.context;let r=0,o=i.component.value,a=i;for(;1===a.children.length&&(a=a.children[0],0===a.component.type);)++r,o=`${o}/${a.component.value}`;const c=n.recognize(o);if(null===c){const r=i.component.value;let o=n.container.find(Jc,r);switch(e.tree.options.routingMode){case"configured-only":if(null===o){if(""===r)return null;throw new Error(`'${r}' did not match any configured route or registered component name at '${n.friendlyPath}' - did you forget to add '${r}' to the routes list of the route decorator of '${n.component.name}'?`)}throw new Error(`'${r}' did not match any configured route, but it does match a registered component name at '${n.friendlyPath}' - did you forget to add a @route({ path: '${r}' }) decorator to '${r}' or unintentionally set routingMode to 'configured-only'?`);case"configured-first":if(null===o){if(""===r)return null;const t=null===i.viewport||0===i.viewport.length?"default":i.viewport,e=n.getFallbackViewportAgent("dynamic",t);if(null===e)throw new Error(`'${r}' did not match any configured route or registered component name at '${n.friendlyPath}' and no fallback was provided for viewport '${t}' - did you forget to add the component '${r}' to the dependencies of '${n.component.name}' or to register it as a global dependency?`);const s=e.viewport.fallback;if(o=n.container.find(Jc,s),null===o)throw new Error(`the requested component '${r}' and the fallback '${s}' at viewport '${t}' did not match any configured route or registered component name at '${n.friendlyPath}' - did you forget to add the component '${r}' to the dependencies of '${n.component.name}' or to register it as a global dependency?`)}return zg(t,e,i,s,o)}}const l=null===c.residue?o:o.slice(0,-(c.residue.length+1));i.component.value=l;for(let t=0;t<r;++t)i.children=i.children[0].children;return Wg(t,e,i,s,c)}(t,e,i,s);if(null===n)return;return Kg(t,e,n)}}case 4:case 2:{const n=dv.resolve(i.component.value),r=zg(t,e,i,s,n.component);return Kg(t,e,r)}}}function Wg(t,e,i,s,n,r=n.route.endpoint.route){const o=e.context,a=e.tree;return wt(r.handler,(c=>{if(r.handler=c,null===c.redirectTo){const l=c.viewport,h=c.component,u=o.resolveViewportAgent(gg.create({viewportName:l,componentName:h.name,append:s,resolution:a.options.resolutionMode})),d=o.container.get(ev).getRouteContext(u,h,u.hostController.container);return d.node=Bg.create({path:n.route.endpoint.route.path,finalPath:r.path,context:d,instruction:i,params:{...e.params,...n.route.params},queryParams:a.queryParams,fragment:a.fragment,data:c.data,viewport:l,component:h,append:s,title:c.config.title,residue:null===n.residue?[]:[sv.create(n.residue)]}),d.node.setTree(e.tree),t.trace("createConfiguredNode(vi:%s) -> %s",i,d.node),d.node}const l=Tg.parse(r.path,!1),h=Tg.parse(c.redirectTo,!1);let u,d;const p=[];switch(l.root.kind){case 2:case 4:u=l.root;break;default:throw new Error(`Unexpected expression kind ${l.root.kind}`)}switch(h.root.kind){case 2:case 4:d=h.root;break;default:throw new Error(`Unexpected expression kind ${h.root.kind}`)}let f,g,v=!1,m=!1;for(;!v||!m;){if(v)f=null;else if(4===u.kind)f=u,v=!0;else{if(4!==u.left.kind)throw new Error(`Unexpected expression kind ${u.left.kind}`);switch(f=u.left,u.right.kind){case 2:case 4:u=u.right;break;default:throw new Error(`Unexpected expression kind ${u.right.kind}`)}}if(m)g=null;else if(4===d.kind)g=d,m=!0;else{if(4!==d.left.kind)throw new Error(`Unexpected expression kind ${d.left.kind}`);switch(g=d.left,d.right.kind){case 2:case 4:d=d.right;break;default:throw new Error(`Unexpected expression kind ${d.right.kind}`)}}null!==g&&(g.component.isDynamic&&(null==f?void 0:f.component.isDynamic)?p.push(n.route.params[f.component.name]):p.push(g.raw))}const w=p.filter(Boolean).join("/"),b=o.recognize(w);if(null===b){const n=w,r=o.container.find(Jc,w);switch(a.options.routingMode){case"configured-only":if(null===r)throw new Error(`'${n}' did not match any configured route or registered component name at '${o.friendlyPath}' - did you forget to add '${n}' to the routes list of the route decorator of '${o.component.name}'?`);throw new Error(`'${n}' did not match any configured route, but it does match a registered component name at '${o.friendlyPath}' - did you forget to add a @route({ path: '${n}' }) decorator to '${n}' or unintentionally set routingMode to 'configured-only'?`);case"configured-first":if(null===r)throw new Error(`'${n}' did not match any configured route or registered component name at '${o.friendlyPath}' - did you forget to add the component '${n}' to the dependencies of '${o.component.name}' or to register it as a global dependency?`);return zg(t,e,i,s,r)}}return Wg(t,e,i,s,n,b.route.endpoint.route)}))}function zg(t,e,i,s,n){var r;const o=e.context,a=e.tree,c=null!==(r=i.viewport)&&void 0!==r?r:"default",l=o.resolveViewportAgent(gg.create({viewportName:c,componentName:n.name,append:s,resolution:a.options.resolutionMode})),h=o.container.get(ev).getRouteContext(l,n,l.hostController.container),u=dv.resolve(n);return h.node=Bg.create({path:n.name,finalPath:n.name,context:h,instruction:i,params:{...o.node.params,...i.params},queryParams:a.queryParams,fragment:a.fragment,data:u.data,viewport:c,component:n,append:s,title:u.config.title,residue:[...i.children]}),h.node.setTree(o.node.tree),t.trace("createDirectNode(vi:%s) -> %s",i,h.node),h.node}function Kg(t,e,i){return wt(i,(i=>(t.trace("appendNode($childNode:%s)",i),e.appendChild(i),i.context.vpa.scheduleUpdate(e.tree.options,i))))}const Qg=Object.freeze(new URLSearchParams),Gg="au-nav-id";function Jg(t,e){return{...t,[Gg]:e}}function _g(t,e){return"function"==typeof e?e(t):e}class Yg{constructor(t,e,i,s,n,r,o,a,c,l,h){this.useUrlFragmentHash=t,this.useHref=e,this.statefulHistoryLength=i,this.routingMode=s,this.swapStrategy=n,this.resolutionMode=r,this.queryParamsStrategy=o,this.fragmentStrategy=a,this.historyStrategy=c,this.sameUrlStrategy=l,this.buildTitle=h}static get DEFAULT(){return Yg.create({})}static create(t){var e,i,s,n,r,o,a,c,l,h,u;return new Yg(null!==(e=t.useUrlFragmentHash)&&void 0!==e&&e,null===(i=t.useHref)||void 0===i||i,null!==(s=t.statefulHistoryLength)&&void 0!==s?s:0,null!==(n=t.routingMode)&&void 0!==n?n:"configured-first",null!==(r=t.swapStrategy)&&void 0!==r?r:"sequential-remove-first",null!==(o=t.resolutionMode)&&void 0!==o?o:"dynamic",null!==(a=t.queryParamsStrategy)&&void 0!==a?a:"overwrite",null!==(c=t.fragmentStrategy)&&void 0!==c?c:"overwrite",null!==(l=t.historyStrategy)&&void 0!==l?l:"push",null!==(h=t.sameUrlStrategy)&&void 0!==h?h:"ignore",null!==(u=t.buildTitle)&&void 0!==u?u:null)}getQueryParamsStrategy(t){return _g(t,this.queryParamsStrategy)}getFragmentStrategy(t){return _g(t,this.fragmentStrategy)}getHistoryStrategy(t){return _g(t,this.historyStrategy)}getSameUrlStrategy(t){return _g(t,this.sameUrlStrategy)}stringifyProperties(){return[["routingMode","mode"],["swapStrategy","swap"],["resolutionMode","resolution"],["queryParamsStrategy","queryParams"],["fragmentStrategy","fragment"],["historyStrategy","history"],["sameUrlStrategy","sameUrl"]].map((([t,e])=>{const i=this[t];return`${e}:${"function"==typeof i?i:`'${i}'`}`})).join(",")}clone(){return new Yg(this.useUrlFragmentHash,this.useHref,this.statefulHistoryLength,this.routingMode,this.swapStrategy,this.resolutionMode,this.queryParamsStrategy,this.fragmentStrategy,this.historyStrategy,this.sameUrlStrategy,this.buildTitle)}toString(){return`RO(${this.stringifyProperties()})`}}class Zg extends Yg{constructor(t,e,i,s,n,r,o,a){super(t.useUrlFragmentHash,t.useHref,t.statefulHistoryLength,t.routingMode,t.swapStrategy,t.resolutionMode,t.queryParamsStrategy,t.fragmentStrategy,t.historyStrategy,t.sameUrlStrategy,t.buildTitle),this.title=e,this.titleSeparator=i,this.append=s,this.context=n,this.queryParams=r,this.fragment=o,this.state=a}static get DEFAULT(){return Zg.create({})}static create(t){var e,i,s,n,r,o,a;return new Zg(Yg.create(t),null!==(e=t.title)&&void 0!==e?e:null,null!==(i=t.titleSeparator)&&void 0!==i?i:" | ",null!==(s=t.append)&&void 0!==s&&s,null!==(n=t.context)&&void 0!==n?n:null,null!==(r=t.queryParams)&&void 0!==r?r:null,null!==(o=t.fragment)&&void 0!==o?o:"",null!==(a=t.state)&&void 0!==a?a:null)}clone(){return new Zg(super.clone(),this.title,this.titleSeparator,this.append,this.context,{...this.queryParams},this.fragment,null===this.state?null:{...this.state})}toString(){return`NO(${super.stringifyProperties()})`}}class Xg{constructor(t,e,i,s,n,r){this.id=t,this.instructions=e,this.trigger=i,this.options=s,this.prevNavigation=n,this.finalInstructions=r}static create(t){return new Xg(t.id,t.instructions,t.trigger,t.options,t.prevNavigation,t.finalInstructions)}toString(){return`N(id:${this.id},instructions:${this.instructions},trigger:'${this.trigger}')`}}class tv{constructor(t,e,i,s,n,r,o,a,c,l,h,u,d,p,f){this.id=t,this.prevInstructions=e,this.instructions=i,this.finalInstructions=s,this.instructionsChanged=n,this.trigger=r,this.options=o,this.managedState=a,this.previousRouteTree=c,this.routeTree=l,this.promise=h,this.resolve=u,this.reject=d,this.guardsResult=p,this.error=f}static create(t){return new tv(t.id,t.prevInstructions,t.instructions,t.finalInstructions,t.instructionsChanged,t.trigger,t.options,t.managedState,t.previousRouteTree,t.routeTree,t.promise,t.resolve,t.reject,t.guardsResult,void 0)}run(t,e){if(!0===this.guardsResult)try{const i=t();i instanceof Promise?i.then(e).catch((t=>{this.handleError(t)})):e(i)}catch(t){this.handleError(t)}}handleError(t){this.reject(this.error=t)}toString(){return`T(id:${this.id},trigger:'${this.trigger}',instructions:${this.instructions},options:${this.options})`}}const ev=Dt.createInterface("IRouter",(t=>t.singleton(iv)));let iv=class{constructor(t,e,i,s,n){this.container=t,this.p=e,this.logger=i,this.events=s,this.locationMgr=n,this.t=null,this.i=null,this.o=null,this.options=Yg.DEFAULT,this.navigated=!1,this.navigationId=0,this.lastSuccessfulNavigation=null,this.activeNavigation=null,this.instructions=rv.create(""),this.nextTr=null,this.locationChangeSubscription=null,this.h=!1,this.vpaLookup=new Map,this.logger=i.root.scopeTo("Router")}get ctx(){let t=this.t;if(null===t){if(!this.container.has(gv,!0))throw new Error("Root RouteContext is not set. Did you forget to register RouteConfiguration, or try to navigate before calling Aurelia.start()?");t=this.t=this.container.get(gv)}return t}get routeTree(){let t=this.i;if(null===t){const e=this.ctx;t=this.i=new Vg(Zg.create({...this.options}),Qg,null,Bg.create({path:"",finalPath:"",context:e,instruction:null,component:e.definition.component,append:!1}))}return t}get currentTr(){let t=this.o;return null===t&&(t=this.o=tv.create({id:0,prevInstructions:this.instructions,instructions:this.instructions,finalInstructions:this.instructions,instructionsChanged:!0,trigger:"api",options:Zg.DEFAULT,managedState:null,previousRouteTree:this.routeTree.clone(),routeTree:this.routeTree,resolve:null,reject:null,promise:null,guardsResult:!0,error:void 0})),t}set currentTr(t){this.o=t}resolveContext(t){return mv.resolve(this.ctx,t)}start(t,e){if(this.options=Yg.create(t),this.h="function"==typeof this.options.buildTitle,this.locationMgr.startListening(),this.locationChangeSubscription=this.events.subscribe("au:router:location-change",(t=>{this.p.taskQueue.queueTask((()=>{const e=function(t){return u(t)&&!0===Object.prototype.hasOwnProperty.call(t,Gg)}(t.state)?t.state:null,i=Zg.create({...this.options,historyStrategy:"replace"}),s=rv.create(t.url,i);this.enqueue(s,t.trigger,e,null)}))})),!this.navigated&&e)return this.load(this.locationMgr.getPath(),{historyStrategy:"replace"})}stop(){var t;this.locationMgr.stopListening(),null===(t=this.locationChangeSubscription)||void 0===t||t.dispose()}load(t,e){const i=this.createViewportInstructions(t,e);return this.logger.trace("load(instructions:%s)",i),this.enqueue(i,"api",null,null)}isActive(t,e){const i=this.resolveContext(e),s=this.createViewportInstructions(t,{context:i});return this.logger.trace("isActive(instructions:%s,ctx:%s)",s,i),this.routeTree.contains(s)}getRouteContext(t,e,i){const s=i.get(je).scopeTo("RouteContext"),n=dv.resolve(e.Type);let r=this.vpaLookup.get(t);void 0===r&&this.vpaLookup.set(t,r=new WeakMap);let o=r.get(n);if(void 0===o){s.trace("creating new RouteContext for %s",n);const a=i.has(gv,!0)?i.get(gv):null;r.set(n,o=new mv(t,a,e,n,i))}else s.trace("returning existing RouteContext for %s",n),null!==t&&(o.vpa=t);return o}createViewportInstructions(t,e){return"string"==typeof t&&(t=this.locationMgr.removeBaseHref(t)),rv.create(t,this.getNavigationOptions(e))}enqueue(t,e,i,s){const n=this.currentTr;if("api"!==e&&"api"===n.trigger&&n.instructions.equals(t))return this.logger.debug("Ignoring navigation triggered by '%s' because it is the same URL as the previous navigation which was triggered by 'api'.",e),!0;let r,o,a;null===s?a=new Promise((function(t,e){r=t,o=e})):(this.logger.debug("Reusing promise/resolve/reject from the previously failed transition %s",s),a=s.promise,r=s.resolve,o=s.reject);const c=this.nextTr=tv.create({id:++this.navigationId,trigger:e,managedState:i,prevInstructions:n.finalInstructions,finalInstructions:t,instructionsChanged:!n.finalInstructions.equals(t),instructions:t,options:t.options,promise:a,resolve:r,reject:o,previousRouteTree:this.routeTree,routeTree:this.i=this.routeTree.clone(),guardsResult:!0,error:void 0});if(this.logger.debug("Scheduling transition: %s",c),null===this.activeNavigation)try{this.run(c)}catch(t){c.handleError(t)}return c.promise.then((t=>(this.logger.debug("Transition succeeded: %s",c),t))).catch((t=>{throw this.logger.error("Navigation failed: %s",c,t),t}))}run(t){this.currentTr=t,this.nextTr=null;const e=null===this.lastSuccessfulNavigation?null:Xg.create({...this.lastSuccessfulNavigation,prevNavigation:null});this.activeNavigation=Xg.create({id:t.id,instructions:t.instructions,trigger:t.trigger,options:t.options,prevNavigation:e,finalInstructions:t.finalInstructions});const i=this.resolveContext(t.options.context),s=!this.navigated||t.instructions.children.length!==i.node.children.length||t.instructions.children.some(((t,e)=>{var s,n;return!(null!==(n=null===(s=i.node.children[e])||void 0===s?void 0:s.originalInstruction.equals(t))&&void 0!==n&&n)}));return s||"reload"===t.options.getSameUrlStrategy(this.instructions)?(this.logger.trace("run(tr:%s) - processing route",t),this.events.publish(new og(t.id,t.instructions,t.trigger,t.managedState)),null!==this.nextTr?(this.logger.debug("run(tr:%s) - aborting because a new transition was queued in response to the NavigationStartEvent",t),this.run(this.nextTr)):(this.activeNavigation=Xg.create({...this.activeNavigation,finalInstructions:t.finalInstructions}),void t.run((()=>(this.logger.trace("run() - compiling route tree: %s",t.finalInstructions),Dg(t.routeTree,t.finalInstructions,i))),(()=>{const e=t.previousRouteTree.root.children,i=t.routeTree.root.children,s=Ff(e,i);qf.start((i=>{this.logger.trace(`run() - invoking canUnload on ${e.length} nodes`);for(const s of e)s.context.vpa.canUnload(t,i)})).continueWith((e=>{!0!==t.guardsResult&&(e.push(),this.cancelNavigation(t))})).continueWith((e=>{this.logger.trace(`run() - invoking canLoad on ${i.length} nodes`);for(const s of i)s.context.vpa.canLoad(t,e)})).continueWith((e=>{!0!==t.guardsResult&&(e.push(),this.cancelNavigation(t))})).continueWith((i=>{this.logger.trace(`run() - invoking unload on ${e.length} nodes`);for(const s of e)s.context.vpa.unload(t,i)})).continueWith((e=>{this.logger.trace(`run() - invoking load on ${i.length} nodes`);for(const s of i)s.context.vpa.load(t,e)})).continueWith((e=>{this.logger.trace(`run() - invoking swap on ${s.length} nodes`);for(const i of s)i.context.vpa.swap(t,e)})).continueWith((()=>{this.logger.trace("run() - finalizing transition"),s.forEach((function(t){t.context.vpa.endTransition()})),this.navigated=!0,this.instructions=t.finalInstructions=t.routeTree.finalizeInstructions(),this.events.publish(new ag(t.id,t.instructions,this.instructions)),this.lastSuccessfulNavigation=this.activeNavigation,this.activeNavigation=null,this.applyHistoryState(t),t.resolve(!0),this.runNextTransition(t)})).start()})))):(this.logger.trace("run(tr:%s) - NOT processing route",t),this.navigated=!0,this.activeNavigation=null,t.resolve(!1),void this.runNextTransition(t))}applyHistoryState(t){const e=t.finalInstructions.toUrl(this.options.useUrlFragmentHash);switch(t.options.getHistoryStrategy(this.instructions)){case"none":break;case"push":this.locationMgr.pushState(Jg(t.options.state,t.id),this.updateTitle(t),e);break;case"replace":this.locationMgr.replaceState(Jg(t.options.state,t.id),this.updateTitle(t),e)}}getTitle(t){var e,i;switch(typeof t.options.title){case"function":return null!==(e=t.options.title.call(void 0,t.routeTree.root))&&void 0!==e?e:"";case"string":return t.options.title;default:return null!==(i=t.routeTree.root.getTitle(t.options.titleSeparator))&&void 0!==i?i:""}}updateTitle(t=this.currentTr){var e;const i=this.h?null!==(e=this.options.buildTitle(t))&&void 0!==e?e:"":this.getTitle(t);return i.length>0&&(this.p.document.title=i),this.p.document.title}cancelNavigation(t){this.logger.trace("cancelNavigation(tr:%s)",t),Ff(t.previousRouteTree.root.children,t.routeTree.root.children).forEach((function(t){t.context.vpa.cancelUpdate()})),this.activeNavigation=null,this.instructions=t.prevInstructions,this.i=t.previousRouteTree,this.events.publish(new cg(t.id,t.instructions,`guardsResult is ${t.guardsResult}`)),!1===t.guardsResult?(t.resolve(!1),this.runNextTransition(t)):wt(this.enqueue(t.guardsResult,"api",t.managedState,t),(()=>{this.logger.trace("cancelNavigation(tr:%s) - finished redirect",t)}))}runNextTransition(t){null!==this.nextTr&&(this.logger.trace("runNextTransition(tr:%s) -> scheduling nextTransition: %s",t,this.nextTr),this.p.taskQueue.queueTask((()=>{const t=this.nextTr;if(null!==t)try{this.run(t)}catch(e){t.handleError(e)}})))}getNavigationOptions(t){return Zg.create({...this.options,...t})}};iv=tg([eg(0,Ht),eg(1,Ia),eg(2,je),eg(3,sg),eg(4,dg)],iv),Dt.createInterface("IViewportInstruction");class sv{constructor(t,e,i,s,n,r,o,a){this.context=t,this.append=e,this.open=i,this.close=s,this.component=n,this.viewport=r,this.params=o,this.children=a}static create(t,e){var i,s,n,r,o,a,c,l,h;if(t instanceof sv)return t;if(Jf(t)){const u=av.create(t.component),d=null!==(s=null===(i=t.children)||void 0===i?void 0:i.map(sv.create))&&void 0!==s?s:[];return new sv(null!==(r=null!==(n=t.context)&&void 0!==n?n:e)&&void 0!==r?r:null,null!==(o=t.append)&&void 0!==o&&o,null!==(a=t.open)&&void 0!==a?a:0,null!==(c=t.close)&&void 0!==c?c:0,u,null!==(l=t.viewport)&&void 0!==l?l:null,null!==(h=t.params)&&void 0!==h?h:null,d)}const u=av.create(t);return new sv(null!=e?e:null,!1,0,0,u,null,null,[])}contains(t){const e=this.children,i=t.children;if(e.length<i.length)return!1;if(!this.component.equals(t.component))return!1;for(let t=0,s=i.length;t<s;++t)if(!e[t].contains(i[t]))return!1;return!0}equals(t){const e=this.children,i=t.children;if(e.length!==i.length)return!1;if(!this.component.equals(t.component)||this.viewport!==t.viewport||!Xf(this.params,t.params))return!1;for(let t=0,s=e.length;t<s;++t)if(!e[t].equals(i[t]))return!1;return!0}clone(){return new sv(this.context,this.append,this.open,this.close,this.component.clone(),this.viewport,null===this.params?null:{...this.params},[...this.children])}toUrlComponent(t=!0){const e=this.component.toUrlComponent(),i=null===this.params||0===Object.keys(this.params).length?"":`(${function(t){const e=Object.keys(t),i=Array(e.length),s=[],n=[];for(const t of e)et(t)?s.push(Number(t)):n.push(t);for(let r=0;r<e.length;++r){const e=s.indexOf(r);if(e>-1)i[r]=t[r],s.splice(e,1);else{const e=n.shift();i[r]=`${e}=${t[e]}`}}return i.join(",")}(this.params)})`,s=0===e.length||null===this.viewport||0===this.viewport.length?"":`@${this.viewport}`,n=`${"(".repeat(this.open)}${e}${i}${s}${")".repeat(this.close)}`,r=t?this.children.map((t=>t.toUrlComponent())).join("+"):"";return n.length>0?r.length>0?[n,r].join("/"):n:r}toString(){return`VPI(${[`c:${this.component}`,null===this.viewport||0===this.viewport.length?"":`viewport:${this.viewport}`,0===this.children.length?"":`children:[${this.children.map(String).join(",")}]`].filter(Boolean).join(",")})`}}const nv=function(){let t=0;const e=new Map;return function(i){let s=e.get(i);return void 0===s&&e.set(i,s=++t),s}}();class rv{constructor(t,e,i,s,n){this.options=t,this.isAbsolute=e,this.children=i,this.queryParams=s,this.fragment=n}static create(t,e){const i=Zg.create({...e});return t instanceof rv?new rv(i,t.isAbsolute,t.children.map((t=>sv.create(t,i.context))),t.queryParams,t.fragment):t instanceof Array?new rv(i,!1,t.map((t=>sv.create(t,i.context))),Qg,null):"string"==typeof t?Tg.parse(t,i.useUrlFragmentHash).toInstructionTree(i):new rv(i,!1,[sv.create(t,i.context)],Qg,null)}equals(t){const e=this.children,i=t.children;if(e.length!==i.length)return!1;for(let t=0,s=e.length;t<s;++t)if(!e[t].equals(i[t]))return!1;return!0}toUrl(t=!1){var e;let i,s;t?(i="",s=`#${this.toPath()}`):(i=this.toPath(),s=null!==(e=this.fragment)&&void 0!==e?e:"");let n=this.queryParams.toString();return n=""===n?"":`?${n}`,`${i}${s}${n}`}toPath(){return this.children.map((t=>t.toUrlComponent())).join("+")}toString(){return`[${this.children.map(String).join(",")}]`}}var ov;!function(t){t[t.string=0]="string",t[t.ViewportInstruction=1]="ViewportInstruction",t[t.CustomElementDefinition=2]="CustomElementDefinition",t[t.Promise=3]="Promise",t[t.IRouteViewModel=4]="IRouteViewModel"}(ov||(ov={}));class av{constructor(t,e){this.type=t,this.value=e}static create(t){if(t instanceof av)return t;if("string"==typeof t)return new av(0,t);if(u(t)){if("function"==typeof t){if(Jc.isType(t)){const e=Jc.getDefinition(t);return new av(2,e)}return av.create(t())}if(t instanceof Promise)return new av(3,t);if(Jf(t)){const e=sv.create(t);return new av(1,e)}if(Bl(t))return new av(4,t);if(t instanceof Vc)return new av(2,t);if(Kf(t)){const e=Jc.define(t),i=Jc.getDefinition(e);return new av(2,i)}throw new Error(`Invalid component ${Hf(t)}: must be either a class, a custom element ViewModel, or a (partial) custom element definition`)}_f("function/class or object","",t)}equals(t){switch(this.type){case 2:case 4:case 3:case 0:return this.type===t.type&&this.value===t.value;case 1:return this.type===t.type&&this.value.equals(t.value)}}clone(){return new av(this.type,this.value)}toUrlComponent(){switch(this.type){case 2:return this.value.name;case 4:case 3:return`au$obj${nv(this.value)}`;case 1:return this.value.toUrlComponent();case 0:return this.value}}toString(){switch(this.type){case 2:return`CEDef(name:'${this.value.name}')`;case 3:return"Promise";case 4:return`VM(name:'${Jc.getDefinition(this.value.constructor).name}')`;case 1:return this.value.toString();case 0:return`'${this.value}'`}}}const cv=$e;function lv(t,e){return Xf(t.params,e.params)?"none":"invoke-lifecycles"}class hv{constructor(t,e,i,s,n,r,o,a,c){this.id=t,this.path=e,this.title=i,this.redirectTo=s,this.caseSensitive=n,this.transitionPlan=r,this.viewport=o,this.data=a,this.routes=c}static create(t,e){var i,s,n,r,o,a,c,l,h,u,d,p,f,g,v,m,w,b,y,$,k,x,C,S;if("string"==typeof t||t instanceof Array){const h=t,u=null!==(i=null==e?void 0:e.redirectTo)&&void 0!==i?i:null,d=null!==(s=null==e?void 0:e.caseSensitive)&&void 0!==s&&s,p=null!==(n=null==e?void 0:e.id)&&void 0!==n?n:h instanceof Array?h[0]:h,f=null!==(r=null==e?void 0:e.title)&&void 0!==r?r:null,g=null!==(o=null==e?void 0:e.transitionPlan)&&void 0!==o?o:lv,v=null!==(a=null==e?void 0:e.viewport)&&void 0!==a?a:null,m=null!==(c=null==e?void 0:e.data)&&void 0!==c?c:{},w=null!==(l=null==e?void 0:e.routes)&&void 0!==l?l:cv;return new hv(p,h,f,u,d,g,v,m,w)}if("object"==typeof t){const i=t;Yf(i,"");const s=null!==(u=null!==(h=i.path)&&void 0!==h?h:null==e?void 0:e.path)&&void 0!==u?u:null,n=null!==(p=null!==(d=i.title)&&void 0!==d?d:null==e?void 0:e.title)&&void 0!==p?p:null,r=null!==(g=null!==(f=i.redirectTo)&&void 0!==f?f:null==e?void 0:e.redirectTo)&&void 0!==g?g:null,o=null!==(m=null!==(v=i.caseSensitive)&&void 0!==v?v:null==e?void 0:e.caseSensitive)&&void 0!==m&&m,a=null!==(b=null!==(w=i.id)&&void 0!==w?w:null==e?void 0:e.id)&&void 0!==b?b:s instanceof Array?s[0]:s,c=null!==($=null!==(y=i.transitionPlan)&&void 0!==y?y:null==e?void 0:e.transitionPlan)&&void 0!==$?$:lv,l=null!==(x=null!==(k=i.viewport)&&void 0!==k?k:null==e?void 0:e.viewport)&&void 0!==x?x:null,A={...null==e?void 0:e.data,...i.data},T=[...null!==(C=i.routes)&&void 0!==C?C:cv,...null!==(S=null==e?void 0:e.routes)&&void 0!==S?S:cv];return new hv(a,s,n,r,o,c,l,A,T)}_f("string, function/class or object","",t)}static configure(t,e){const i=hv.create(t,e);return U.define(uv.name,i,e),e}static getConfig(t){return U.hasOwn(uv.name,t)||uv.configure({},t),U.getOwn(uv.name,t)}saveTo(t){U.define(uv.name,this,t)}}const uv={name:Pt.resource.keyFor("route"),isConfigured:t=>U.hasOwn(uv.name,t),configure(t,e){const i=hv.create(t,e);return U.define(uv.name,i,e),e},getConfig:t=>(uv.isConfigured(t)||uv.configure({},t),U.getOwn(uv.name,t))};class dv{constructor(t,e){var i,s,n,r,o;this.config=t,this.component=e,this.hasExplicitPath=null!==t.path,this.caseSensitive=t.caseSensitive,this.path=Wf(null!==(i=t.path)&&void 0!==i?i:e.name),this.redirectTo=null!==(s=t.redirectTo)&&void 0!==s?s:null,this.viewport=null!==(n=t.viewport)&&void 0!==n?n:"default",this.id=function(t){return"string"==typeof t?t:t[0]}(null!==(r=t.id)&&void 0!==r?r:this.path),this.data=null!==(o=t.data)&&void 0!==o?o:{}}static resolve(t,e){return Gf(t)?new dv(t,null):wt(this.resolveCustomElementDefinition(t,e),(e=>{const i=Qf(t)?{...uv.getConfig(e.Type),...t}:uv.getConfig(e.Type);if(U.hasOwn(uv.name,e)){let t=U.getOwn(uv.name,e);t.config!==i&&(t=new dv(i,e),U.define(uv.name,t,e))}else{const t=new dv(i,e);U.define(uv.name,t,e)}return U.getOwn(uv.name,e)}))}static resolveCustomElementDefinition(t,e){if(Qf(t))return this.resolveCustomElementDefinition(t.component,e);const i=av.create(t);switch(i.type){case 0:{if(void 0===e)throw new Error("When retrieving the RouteDefinition for a component name, a RouteContext (that can resolve it) must be provided");const t=e.container.find(Jc,i.value);if(null===t)throw new Error(`Could not find a CustomElement named '${i.value}' in the current container scope of ${e}. This means the component is neither registered at Aurelia startup nor via the 'dependencies' decorator or static property.`);return t}case 2:return i.value;case 4:return Jc.getDefinition(i.value.constructor);case 3:if(void 0===e)throw new Error("RouteContext must be provided when resolving an imported module");return e.resolveLazy(i.value)}}register(t){var e;null===(e=this.component)||void 0===e||e.register(t)}toUrlComponent(){return"not-implemented"}toString(){const t=null===this.config.path?"null":`'${this.config.path}'`;return null!==this.component?`RD(config.path:${t},c.name:'${this.component.name}')`:`RD(config.path:${t},redirectTo:'${this.redirectTo}')`}}const pv=new WeakMap;class fv{constructor(t,e,i,s,n){var r,o,a,c;this.instance=t,this.controller=e,this.definition=i,this.routeNode=s,this.ctx=n,this.u=n.container.get(je).scopeTo(`ComponentAgent<${n.friendlyPath}>`),this.u.trace("constructor()");const l=e.lifecycleHooks;this.canLoadHooks=(null!==(r=l.canLoad)&&void 0!==r?r:[]).map((t=>t.instance)),this.loadHooks=(null!==(o=l.load)&&void 0!==o?o:[]).map((t=>t.instance)),this.canUnloadHooks=(null!==(a=l.canUnload)&&void 0!==a?a:[]).map((t=>t.instance)),this.unloadHooks=(null!==(c=l.unload)&&void 0!==c?c:[]).map((t=>t.instance)),this.l="canLoad"in t,this.g="load"in t,this.v="canUnload"in t,this.m="unload"in t}static for(t,e,i,s){let n=pv.get(t);if(void 0===n){const r=s.container,o=dv.resolve(t.constructor),a=jl.$el(r,t,e.host,null);pv.set(t,n=new fv(t,a,o,i,s))}return n}activate(t,e,i){if(null===t)return this.u.trace("activate() - initial"),this.controller.activate(this.controller,e,i);this.u.trace("activate()"),this.controller.activate(t,e,i)}deactivate(t,e,i){if(null===t)return this.u.trace("deactivate() - initial"),this.controller.deactivate(this.controller,e,i);this.u.trace("deactivate()"),this.controller.deactivate(t,e,i)}dispose(){this.u.trace("dispose()"),this.controller.dispose()}canUnload(t,e,i){this.u.trace(`canUnload(next:%s) - invoking ${this.canUnloadHooks.length} hooks`,e),i.push();for(const s of this.canUnloadHooks)t.run((()=>(i.push(),s.canUnload(this.instance,e,this.routeNode))),(e=>{!0===t.guardsResult&&!0!==e&&(t.guardsResult=!1),i.pop()}));this.v&&t.run((()=>(i.push(),this.instance.canUnload(e,this.routeNode))),(e=>{!0===t.guardsResult&&!0!==e&&(t.guardsResult=!1),i.pop()})),i.pop()}canLoad(t,e,i){this.u.trace(`canLoad(next:%s) - invoking ${this.canLoadHooks.length} hooks`,e),i.push();for(const s of this.canLoadHooks)t.run((()=>(i.push(),s.canLoad(this.instance,e.params,e,this.routeNode))),(e=>{!0===t.guardsResult&&!0!==e&&(t.guardsResult=!1!==e&&rv.create(e)),i.pop()}));this.l&&t.run((()=>(i.push(),this.instance.canLoad(e.params,e,this.routeNode))),(e=>{!0===t.guardsResult&&!0!==e&&(t.guardsResult=!1!==e&&rv.create(e)),i.pop()})),i.pop()}unload(t,e,i){this.u.trace(`unload(next:%s) - invoking ${this.unloadHooks.length} hooks`,e),i.push();for(const s of this.unloadHooks)t.run((()=>(i.push(),s.unload(this.instance,e,this.routeNode))),(()=>{i.pop()}));this.m&&t.run((()=>(i.push(),this.instance.unload(e,this.routeNode))),(()=>{i.pop()})),i.pop()}load(t,e,i){this.u.trace(`load(next:%s) - invoking ${this.loadHooks.length} hooks`,e),i.push();for(const s of this.loadHooks)t.run((()=>(i.push(),s.load(this.instance,e.params,e,this.routeNode))),(()=>{i.pop()}));this.g&&t.run((()=>(i.push(),this.instance.load(e.params,e,this.routeNode))),(()=>{i.pop()})),i.pop()}toString(){return`CA(ctx:'${this.ctx.friendlyPath}',c:'${this.definition.component.name}')`}}const gv=Dt.createInterface("IRouteContext"),vv="au$residue";class mv{constructor(t,e,i,s,n){var r;this.parent=e,this.component=i,this.definition=s,this.parentContainer=n,this.childViewportAgents=[],this.childRoutes=[],this.$=null,this.S=null,this.prevNode=null,this.R=null,this.C=null,this.C=t,null===e?(this.root=this,this.path=[this],this.friendlyPath=i.name):(this.root=e.root,this.path=[...e.path,this],this.friendlyPath=`${e.friendlyPath}/${i.name}`),this.logger=n.get(je).scopeTo(`RouteContext<${this.friendlyPath}>`),this.logger.trace("constructor()"),this.moduleLoader=n.get(He);const o=this.container=n.createChild();o.registerResolver(Wl,this.hostControllerProvider=new me,!0),o.registerResolver(gv,new me("IRouteContext",this)),o.register(s),o.register(...i.dependencies),this.recognizer=new Uf;const a=[],c=[];for(const t of s.config.routes)if(t instanceof Promise){const e=this.addRoute(t);a.push(e),c.push(e)}else{const e=dv.resolve(t,this);if(e instanceof Promise){if(!Qf(t)||null==t.path)throw new Error("Invalid route config. When the component property is a lazy import, the path must be specified. To use lazy loading without specifying the path (e.g. in direct routing), pass the import promise as a direct value to the routes array instead of providing it as the component property on an object literal.");{for(const i of Wf(t.path))this.$addRoute(i,null!==(r=t.caseSensitive)&&void 0!==r&&r,e);const i=this.childRoutes.length,s=e.then((t=>this.childRoutes[i]=t));this.childRoutes.push(s),c.push(s.then(xe))}}else{for(const t of e.path)this.$addRoute(t,e.caseSensitive,e);this.childRoutes.push(e)}}a.length>0&&(this.$=Promise.all(a).then((()=>{this.$=null}))),c.length>0&&(this.S=Promise.all(c).then((()=>{this.S=null})))}get id(){return this.container.id}get isRoot(){return null===this.parent}get depth(){return this.path.length-1}get resolved(){return this.$}get allResolved(){return this.S}get node(){const t=this.R;if(null===t)throw new Error(`Invariant violation: RouteNode should be set immediately after the RouteContext is created. Context: ${this}`);return t}set node(t){(this.prevNode=this.R)!==t&&(this.R=t,this.logger.trace("Node changed from %s to %s",this.prevNode,t))}get vpa(){const t=this.C;if(null===t)throw new Error(`RouteContext has no ViewportAgent: ${this}`);return t}set vpa(t){if(null==t)throw new Error(`Cannot set ViewportAgent to ${t} for RouteContext: ${this}`);const e=this.C;e!==t&&(this.C=t,this.logger.trace("ViewportAgent changed from %s to %s",e,t))}static setRoot(t){const e=t.get(je).scopeTo("RouteContext");t.has(Yl,!0)||wv(new Error("The provided container has no registered IAppRoot. RouteContext.setRoot can only be used after Aurelia.app was called, on a container that is within that app's component tree."),e),t.has(gv,!0)&&wv(new Error('A root RouteContext is already registered. A possible cause is the RouterConfiguration being registered more than once in the same container tree. If you have a multi-rooted app, make sure you register RouterConfiguration only in the "forked" containers and not in the common root.'),e);const{controller:i}=t.get(Yl);void 0===i&&wv(new Error("The provided IAppRoot does not (yet) have a controller. A possible cause is calling this API manually before Aurelia.start() is called"),e);const s=t.get(ev),n=s.getRouteContext(null,i.definition,i.container);t.register(ve.instance(gv,n)),n.node=s.routeTree.root}static resolve(t,e){const i=t.container,s=i.get(je).scopeTo("RouteContext");if(null==e)return s.trace("resolve(context:%s) - returning root RouteContext",e),t;if(function(t){return t instanceof mv}(e))return s.trace("resolve(context:%s) - returning provided RouteContext",e),e;if(e instanceof i.get(Ia).Node)try{const t=Jc.for(e,{searchParents:!0});return s.trace(`resolve(context:Node(nodeName:'${e.nodeName}'),controller:'${t.definition.name}') - resolving RouteContext from controller's RenderContext`),t.container.get(gv)}catch(t){throw s.error(`Failed to resolve RouteContext from Node(nodeName:'${e.nodeName}')`,t),t}if(Bl(e)){const t=e.$controller;return s.trace(`resolve(context:CustomElementViewModel(name:'${t.definition.name}')) - resolving RouteContext from controller's RenderContext`),t.container.get(gv)}if(function(t){return t instanceof jl&&0===t.vmKind}(e)){const t=e;return s.trace(`resolve(context:CustomElementController(name:'${t.definition.name}')) - resolving RouteContext from controller's RenderContext`),t.container.get(gv)}wv(new Error(`Invalid context type: ${Object.prototype.toString.call(e)}`),s)}dispose(){this.container.dispose()}resolveViewportAgent(t){this.logger.trace("resolveViewportAgent(req:%s)",t);const e=this.childViewportAgents.find((e=>e.handles(t)));if(void 0===e)throw new Error(`Failed to resolve ${t} at:\n${this.printTree()}`);return e}getAvailableViewportAgents(t){return this.childViewportAgents.filter((e=>e.isAvailable(t)))}getFallbackViewportAgent(t,e){var i;return null!==(i=this.childViewportAgents.find((i=>i.isAvailable(t)&&i.viewport.name===e&&i.viewport.fallback.length>0)))&&void 0!==i?i:null}createComponentAgent(t,e){this.logger.trace("createComponentAgent(routeNode:%s)",e),this.hostControllerProvider.prepare(t);const i=dv.resolve(e.component),s=this.container.get(i.component.key),n=fv.for(s,t,e,this);return this.hostControllerProvider.dispose(),n}registerViewport(t){const e=mg.for(t,this);return this.childViewportAgents.includes(e)?this.logger.trace("registerViewport(agent:%s) -> already registered, so skipping",e):(this.logger.trace("registerViewport(agent:%s) -> adding",e),this.childViewportAgents.push(e)),e}unregisterViewport(t){const e=mg.for(t,this);this.childViewportAgents.includes(e)?(this.logger.trace("unregisterViewport(agent:%s) -> unregistering",e),this.childViewportAgents.splice(this.childViewportAgents.indexOf(e),1)):this.logger.trace("unregisterViewport(agent:%s) -> not registered, so skipping",e)}recognize(t){var e;this.logger.trace(`recognize(path:'${t}')`);const i=this.recognizer.recognize(t);if(null===i)return null;let s;return Reflect.has(i.params,vv)?(s=null!==(e=i.params.au$residue)&&void 0!==e?e:null,Reflect.deleteProperty(i.params,vv)):s=null,new yv(i,s)}addRoute(t){return this.logger.trace(`addRoute(routeable:'${t}')`),wt(dv.resolve(t,this),(t=>{for(const e of t.path)this.$addRoute(e,t.caseSensitive,t);this.childRoutes.push(t)}))}$addRoute(t,e,i){this.recognizer.add({path:t,caseSensitive:e,handler:i}),this.recognizer.add({path:`${t}/*au$residue`,caseSensitive:e,handler:i})}resolveLazy(t){return this.moduleLoader.load(t,(e=>{let i,s;for(const t of e.items)if(t.isConstructable){const e=t.definitions.find(bv);void 0!==e&&("default"===t.key?i=e:void 0===s&&(s=e))}if(void 0===i){if(void 0===s)throw new Error(`${t} does not appear to be a component or CustomElement recognizable by Aurelia`);return s}return i}))}toString(){const t=this.childViewportAgents.map(String).join(",");return`RC(path:'${this.friendlyPath}',viewports:[${t}])`}printTree(){const t=[];for(let e=0;e<this.path.length;++e)t.push(`${" ".repeat(e)}${this.path[e]}`);return t.join("\n")}}function wv(t,e){throw e.error(t),t}function bv(t){return Jc.isType(t.Type)}class yv{constructor(t,e){this.route=t,this.residue=e}}let $v=class{constructor(t,e){this.logger=t,this.ctx=e,this.name="default",this.usedBy="",this.default="",this.fallback="",this.noScope=!1,this.noLink=!1,this.noHistory=!1,this.stateful=!1,this.agent=void 0,this.controller=void 0,this.logger=t.scopeTo(`au-viewport<${e.friendlyPath}>`),this.logger.trace("constructor()")}hydrated(t){this.logger.trace("hydrated()"),this.controller=t,this.agent=this.ctx.registerViewport(this)}attaching(t,e,i){return this.logger.trace("attaching()"),this.agent.activateFromViewport(t,this.controller,i)}detaching(t,e,i){return this.logger.trace("detaching()"),this.agent.deactivateFromViewport(t,this.controller,i)}dispose(){this.logger.trace("dispose()"),this.ctx.unregisterViewport(this),this.agent.dispose(),this.agent=void 0}toString(){const t=[];for(const e of kv){const i=this[e];switch(typeof i){case"string":""!==i&&t.push(`${e}:'${i}'`);break;case"boolean":i&&t.push(`${e}:${i}`);break;default:t.push(`${e}:${String(i)}`)}}return`VP(ctx:'${this.ctx.friendlyPath}',${t.join(",")})`}};tg([Xo],$v.prototype,"name",void 0),tg([Xo],$v.prototype,"usedBy",void 0),tg([Xo],$v.prototype,"default",void 0),tg([Xo],$v.prototype,"fallback",void 0),tg([Xo],$v.prototype,"noScope",void 0),tg([Xo],$v.prototype,"noLink",void 0),tg([Xo],$v.prototype,"noHistory",void 0),tg([Xo],$v.prototype,"stateful",void 0),$v=tg([Nc({name:"au-viewport"}),eg(0,je),eg(1,gv)],$v);const kv=["name","usedBy","default","fallback","noScope","noLink","noHistory","stateful"];let xv=class{constructor(t,e,i,s,n,r,o){this.target=t,this.el=e,this.router=i,this.events=s,this.delegator=n,this.ctx=r,this.locationMgr=o,this.attribute="href",this.active=!1,this.href=null,this.instructions=null,this.eventListener=null,this.navigationEndListener=null,this.onClick=t=>{null!==this.instructions&&(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||0!==t.button||(t.preventDefault(),this.router.load(this.instructions,{context:this.ctx})))},this.isEnabled=!e.hasAttribute("external")&&!e.hasAttribute("data-external")}binding(){this.isEnabled&&(this.eventListener=this.delegator.addEventListener(this.target,this.el,"click",this.onClick)),this.valueChanged(),this.navigationEndListener=this.events.subscribe("au:router:navigation-end",(t=>{this.valueChanged(),this.active=null!==this.instructions&&this.router.isActive(this.instructions,this.ctx)}))}attaching(){if(null!==this.ctx.allResolved)return this.ctx.allResolved.then((()=>{this.valueChanged()}))}unbinding(){this.isEnabled&&this.eventListener.dispose(),this.navigationEndListener.dispose()}valueChanged(){const t=this.router.options.useUrlFragmentHash;if(null!==this.route&&void 0!==this.route&&null===this.ctx.allResolved){const e=this.ctx.childRoutes.find((t=>t.id===this.route));if(void 0!==e){const i=this.ctx.node.computeAbsolutePath();let s=e.path[0];if("object"==typeof this.params&&null!==this.params){const t=Object.keys(this.params);for(const e of t){const t=this.params[e];null!=t&&String(t).length>0&&(s=s.replace(new RegExp(`[*:]${e}[?]?`),t))}}s=s.replace(/\/[*:][^/]+[?]/g,"").replace(/[*:][^/]+[?]\//g,""),this.href=i?s?`${t?"#":""}${[i,s].join("/")}`:`${t?"#":""}${i}`:`${t?"#":""}${s}`,this.instructions=this.router.createViewportInstructions(`${t?"#":""}${s}`,{context:this.ctx})}else"object"==typeof this.params&&null!==this.params?this.instructions=this.router.createViewportInstructions({component:this.route,params:this.params},{context:this.ctx}):this.instructions=this.router.createViewportInstructions(this.route,{context:this.ctx}),this.href=this.instructions.toUrl(this.router.options.useUrlFragmentHash)}else this.instructions=null,this.href=null;const e=Jc.for(this.el,{optional:!0});if(null!==e)e.viewModel[this.attribute]=this.instructions;else if(null===this.href)this.el.removeAttribute(this.attribute);else{const e=t?this.href:this.locationMgr.addBaseHref(this.href);this.el.setAttribute(this.attribute,e)}}};tg([Xo({mode:us.toView,primary:!0,callback:"valueChanged"})],xv.prototype,"route",void 0),tg([Xo({mode:us.toView,callback:"valueChanged"})],xv.prototype,"params",void 0),tg([Xo({mode:us.toView})],xv.prototype,"attribute",void 0),tg([Xo({mode:us.fromView})],xv.prototype,"active",void 0),xv=tg([Tc("load"),eg(0,rh),eg(1,nh),eg(2,ev),eg(3,sg),eg(4,kh),eg(5,gv),eg(6,dg)],xv);let Cv=class{constructor(t,e,i,s,n,r){if(this.target=t,this.el=e,this.router=i,this.delegator=s,this.ctx=n,this.isInitialized=!1,i.options.useHref&&"A"===e.nodeName)switch(e.getAttribute("target")){case null:case r.name:case"_self":this.isEnabled=!0;break;default:this.isEnabled=!1}else this.isEnabled=!1}get isExternal(){return this.el.hasAttribute("external")||this.el.hasAttribute("data-external")}binding(){this.isInitialized||(this.isInitialized=!0,this.isEnabled=this.isEnabled&&null===ih(this.el,Ic.getDefinition(xv).key)),null==this.value?this.el.removeAttribute("href"):this.el.setAttribute("href",this.value),this.eventListener=this.delegator.addEventListener(this.target,this.el,"click",this)}unbinding(){this.eventListener.dispose()}valueChanged(t){null==t?this.el.removeAttribute("href"):this.el.setAttribute("href",t)}handleEvent(t){this.k(t)}k(t){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey||0!==t.button||this.isExternal||!this.isEnabled)return;const e=this.el.getAttribute("href");null!==e&&(t.preventDefault(),this.router.load(e,{context:this.ctx}))}};tg([Xo({mode:us.toView})],Cv.prototype,"value",void 0),Cv=tg([Tc({name:"href",noMultiBindings:!0}),eg(0,rh),eg(1,nh),eg(2,ev),eg(3,kh),eg(4,gv),eg(5,ph)],Cv);const Sv=[ev],Av=[$v,xv,Cv];function Tv(t,e){return t.register(gc.hydrated(Ht,mv.setRoot),gc.afterActivate(ev,(t=>u(e)?"function"==typeof e?e(t):t.start(e,!0):t.start({},!0))),gc.afterDeactivate(ev,(t=>{t.stop()})),...Sv,...Av)}const Rv=t=>({register:e=>Tv(e,t)});class Ev{constructor(t){this.el=t,this.top=t.scrollTop,this.left=t.scrollLeft}static has(t){return t.scrollTop>0||t.scrollLeft>0}restore(){this.el.scrollTo(this.left,this.top),this.el=null}}function Ov(t){t.restore()}class Pv{constructor(t){this.scrollStates=[],this.save(t.children)}save(t){let e;for(let i=0,s=t.length;i<s;++i)e=t[i],Ev.has(e)&&this.scrollStates.push(new Ev(e)),this.save(e.children)}restore(){this.scrollStates.forEach(Ov),this.scrollStates=null}}Dt.createInterface("IStateManager",(t=>t.singleton(jv)));class jv{constructor(){this.cache=new WeakMap}saveState(t){this.cache.set(t.host,new Pv(t.host))}restoreState(t){const e=this.cache.get(t.host);void 0!==e&&(e.restore(),this.cache.delete(t.host))}}const Iv="app-header",Uv='<nav>\n  <a load="home">\n    Chuck Norris\n  </a>\n\n  <br>\n  \n  <span repeat.for="item of appState.categories" class="nav-item">\n      <a load="/category(${item})">\n        ${item}\n      </a>\n  </span>\n</nav>\n',Lv=Uv,Mv=[];let Nv;function Bv(t){Nv||(Nv=Jc.define({name:Iv,template:Uv,dependencies:Mv})),t.register(Nv)}const Vv={maxRetries:3,interval:1e3,strategy:0};class Dv{constructor(t){if(this.retryConfig={...Vv,...void 0!==t?t:{}},2===this.retryConfig.strategy&&this.retryConfig.interval<=1e3)throw new Error("An interval less than or equal to 1 second is not allowed when using the exponential retry strategy")}request(t){return t.retryConfig||(t.retryConfig={...this.retryConfig},t.retryConfig.counter=0),t.retryConfig.requestClone=t.clone(),t}response(t,e){return Reflect.deleteProperty(e,"retryConfig"),t}responseError(t,e,i){const{retryConfig:s}=e,{requestClone:n}=s;return Promise.resolve().then((()=>{if(s.counter<s.maxRetries){const r=void 0===s.doRetry||s.doRetry(t,e);return Promise.resolve(r).then((r=>{if(r){s.counter++;const t=function(t){const{interval:e,strategy:i,minRandomInterval:s,maxRandomInterval:n,counter:r}=t;if("function"==typeof i)return t.strategy(r);switch(i){case 0:return qv[0](e);case 1:return qv[1](r,e);case 2:return qv[2](r,e);case 3:return qv[3](r,e,s,n);default:throw new Error("Unrecognized retry strategy")}}(s);return new Promise((e=>setTimeout(e,isNaN(t)?0:t))).then((()=>{const t=n.clone();return"function"==typeof s.beforeRetry?s.beforeRetry(t,i):t})).then((t=>{const e={...t,retryConfig:s};return i.fetch(e)}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}throw Reflect.deleteProperty(e,"retryConfig"),t}))}}const qv=[t=>t,(t,e)=>e*t,(t,e)=>1===t?e:e**t/1e3,(t,e,i=0,s=6e4)=>Math.random()*(s-i)+i];class Fv{constructor(){this.baseUrl="",this.defaults={},this.interceptors=[],this.dispatcher=null}withBaseUrl(t){return this.baseUrl=t,this}withDefaults(t){return this.defaults=t,this}withInterceptor(t){return this.interceptors.push(t),this}useStandardConfiguration(){return Object.assign(this.defaults,{credentials:"same-origin"},this.defaults),this.rejectErrorResponses()}rejectErrorResponses(){return this.withInterceptor({response:Hv})}withRetry(t){const e=new Dv(t);return this.withInterceptor(e)}withDispatcher(t){return this.dispatcher=t,this}}function Hv(t){if(!t.ok)throw t;return t}const Wv=/^([a-z][a-z0-9+\-.]*:)?\/\//i;Dt.createInterface("IHttpClient",(t=>t.singleton(zv)));class zv{constructor(){this.dispatcher=null,this.activeRequestCount=0,this.isRequesting=!1,this.isConfigured=!1,this.baseUrl="",this.defaults=null,this.interceptors=[]}configure(t){let e;if("object"==typeof t)e={defaults:t};else{if("function"!=typeof t)throw new Error("invalid config");{e=new Fv,e.baseUrl=this.baseUrl,e.defaults={...this.defaults},e.interceptors=this.interceptors,e.dispatcher=this.dispatcher;const i=t(e);Object.prototype.isPrototypeOf.call(Fv.prototype,i)&&(e=i)}}const i=e.defaults;if(void 0!==i&&Object.prototype.isPrototypeOf.call(Headers.prototype,i.headers))throw new Error("Default headers must be a plain object.");const s=e.interceptors;if(void 0!==s&&s.length){if(s.filter((t=>Object.prototype.isPrototypeOf.call(Dv.prototype,t))).length>1)throw new Error("Only one RetryInterceptor is allowed.");const t=s.findIndex((t=>Object.prototype.isPrototypeOf.call(Dv.prototype,t)));if(t>=0&&t!==s.length-1)throw new Error("The retry interceptor must be the last interceptor defined.")}return this.baseUrl=e.baseUrl,this.defaults=i,this.interceptors=void 0!==e.interceptors?e.interceptors:[],this.dispatcher=e.dispatcher,this.isConfigured=!0,this}fetch(t,e){this.trackRequestStart();let i=this.buildRequest(t,e);return this.processRequest(i,this.interceptors).then((t=>{let e;if(Object.prototype.isPrototypeOf.call(Response.prototype,t))e=Promise.resolve(t);else{if(!Object.prototype.isPrototypeOf.call(Request.prototype,t))throw new Error(`An invalid result was returned by the interceptor chain. Expected a Request or Response instance, but got [${t}]`);i=t,e=fetch(i)}return this.processResponse(e,this.interceptors,i)})).then((t=>Object.prototype.isPrototypeOf.call(Request.prototype,t)?this.fetch(t):t)).then((t=>(this.trackRequestEnd(),t)),(t=>{throw this.trackRequestEnd(),t}))}buildRequest(t,e){const i=null!==this.defaults?this.defaults:{};let s,n,r;const o=function(t){const e={},i=void 0!==t?t:{};for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]="function"==typeof i[t]?i[t]():i[t]);return e}(i.headers);if(Object.prototype.isPrototypeOf.call(Request.prototype,t))s=t,r=new Headers(s.headers).get("Content-Type");else{e||(e={}),n=e.body;const o=void 0!==n?{body:n}:null,a={...i,headers:{},...e,...o};r=new Headers(a.headers).get("Content-Type"),s=new Request(function(t,e){return Wv.test(e)?e:(void 0!==t?t:"")+e}(this.baseUrl,t),a)}return r||(new Headers(o).has("content-type")?s.headers.set("Content-Type",new Headers(o).get("content-type")):void 0!==n&&function(t){try{JSON.parse(t)}catch(t){return!1}return!0}(n)&&s.headers.set("Content-Type","application/json")),function(t,e){const i=void 0!==e?e:{};for(const e in i)Object.prototype.hasOwnProperty.call(i,e)&&!t.has(e)&&t.set(e,i[e])}(s.headers,o),void 0!==n&&Object.prototype.isPrototypeOf.call(Blob.prototype,n)&&n.type&&s.headers.set("Content-Type",n.type),s}get(t,e){return this.fetch(t,e)}post(t,e,i){return this.callFetch(t,e,i,"POST")}put(t,e,i){return this.callFetch(t,e,i,"PUT")}patch(t,e,i){return this.callFetch(t,e,i,"PATCH")}delete(t,e,i){return this.callFetch(t,e,i,"DELETE")}trackRequestStart(){if(this.isRequesting=!!++this.activeRequestCount,this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-request-started",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}trackRequestEnd(){if(this.isRequesting=!!--this.activeRequestCount,!this.isRequesting&&null!==this.dispatcher){const t=new this.dispatcher.ownerDocument.defaultView.CustomEvent("aurelia-fetch-client-requests-drained",{bubbles:!0,cancelable:!0});setTimeout((()=>{this.dispatcher.dispatchEvent(t)}),1)}}processRequest(t,e){return this.applyInterceptors(t,e,"request","requestError",this)}processResponse(t,e,i){return this.applyInterceptors(t,e,"response","responseError",i,this)}applyInterceptors(t,e,i,s,...n){return(void 0!==e?e:[]).reduce(((t,e)=>{const r=e[i],o=e[s];return t.then(r?t=>r.call(e,t,...n):Kv,o?t=>o.call(e,t,...n):Qv)}),Promise.resolve(t))}callFetch(t,e,i,s){return i||(i={}),i.method=s,e&&(i.body=e),this.fetch(t,i)}}function Kv(t){return t}function Qv(t){throw t}let Gv=class{constructor(t){this.httpClient=t}async getAll(){return this.httpClient.get("https://api.chucknorris.io/jokes/categories",{cache:"no-store"}).then((t=>t.json()))}};Gv=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([_t,function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[zv])],Gv);let Jv=class{constructor(t){this.httpClient=t}async getRandomJokeFromCategory(t){return this.httpClient.get("https://api.chucknorris.io/jokes/random?category="+t,{cache:"no-store"}).then((t=>t.json()))}};Jv=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([_t,function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[zv])],Jv);var _v=function(t,e){return function(i,s){e(i,s,t)}};let Yv=class{constructor(t,e){this.categoriesService=t,this.jokesService=e,this.categories=[],this.jokes=[],this.getCategories()}async getCategories(){const t=await this.categoriesService.getAll();for(;this.categories.length<3;){const e=t[Math.floor(Math.random()*t.length)];this.categories.includes(e)||this.categories.push(e)}}async addJokes(t,e){for(let i=0;i<e;i++){const e=await this.jokesService.getRandomJokeFromCategory(t);this.isJokeInList(e)||this.jokes.splice(0,0,e)}}isJokeInList(t){for(const e of this.jokes)if(e.id===t.id)return!0;return!1}};Yv=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([_v(0,Kt(Gv)),_v(1,Kt(Jv)),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Gv,Jv])],Yv);let Zv=class{constructor(t){this.appState=t}};Zv=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Nc(t),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Yv])],Zv);const Xv="app-footer",tm="<footer>\n  &copy; 2022 - Kaspar Kalmer\n</footer>\n",em=tm,im=[];let sm;function nm(t){sm||(sm=Jc.define({name:Xv,template:tm,dependencies:im})),t.register(sm)}const rm="home",om="<div id='category'></div>\n<div id='content'>\n    <h1>↑↑↑ CHOOSE A CATEGORY ↑↑↑</h1>\n    <h3 if.bind=\"appState.jokes.length > 0\">All loaded jokes</h3>\n    <p repeat.for=\"joke of appState.jokes\">${joke['value']}</p>\n</div>",am=om,cm=[];let lm;function hm(t){lm||(lm=Jc.define({name:rm,template:om,dependencies:cm})),t.register(lm)}let um=class{constructor(t){this.appState=t}};um=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Nc(n),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Yv])],um);const dm="loading",pm="<p>${loadingMessage}</p>\n",fm=pm,gm=[];let vm;function mm(t){vm||(vm=Jc.define({name:dm,template:pm,dependencies:gm})),t.register(vm)}let wm=class{constructor(t){this.eventAggregator=t,this.loadingMessage="LOADING",this.loading=!1,this.eventAggregator.subscribe("loaded",(()=>{this.loading=!1,this.loadingMessage="LOADING"}))}attached(){this.loading=!0,this.animate()}animate(){setTimeout((()=>{this.loading&&(this.loadingMessage.length<12?this.loadingMessage=this.loadingMessage+".":this.loadingMessage="LOADING",this.animate())}),150)}};wm=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Nc(o),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Ye])],wm);const bm="category",ym="\n\n<div id='category'></div>\n<div id='content'>\n    <h1>${category}</h1>\n    <loading if.bind=\"loading\"></loading>\n    <p repeat.for=\"joke of jokes\">${joke['value']}</p>\n</div>",$m=ym,km=[a];let xm;function Cm(t){xm||(xm=Jc.define({name:bm,template:ym,dependencies:km})),t.register(xm)}let Sm=class{constructor(t,e){this.eventAggregator=t,this.appState=e,this.category="",this.jokes=[],this.loading=!1}load(t){console.log(t),t[0]&&(this.category=t[0],this.loading=!0,this.jokes=this.appState.jokes.filter((t=>t.categories.includes(this.category))),this.changeViewClass(),this.addJokes(5))}async addJokes(t){await this.appState.addJokes(this.category,t),this.loading=!1,this.eventAggregator.publish("loaded"),this.jokes=this.appState.jokes.filter((t=>t.categories.includes(this.category)))}changeViewClass(){setTimeout((()=>{const t=document.getElementById("category");t&&(t.className=this.category)}),0)}};Sm=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Nc(c),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}("design:paramtypes",[Ye,Yv])],Sm);const Am="chuck-norris-app",Tm='\n\n\n\n\n\n<app-header></app-header>\n\n<main>\n  <au-viewport default="home"></au-viewport>\n</main>\n\n<app-footer></app-footer>\n',Rm=Tm,Em=[e,s,r,l];let Om;function Pm(t){Om||(Om=Jc.define({name:Am,template:Tm,dependencies:Em})),t.register(Om)}let jm=class{};jm=function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);return r>3&&o&&Object.defineProperty(e,i,o),o}([Nc(h)],jm);var Im=i(379),Um=i.n(Im),Lm=i(795),Mm=i.n(Lm),Nm=i(569),Bm=i.n(Nm),Vm=i(565),Dm=i.n(Vm),qm=i(216),Fm=i.n(qm),Hm=i(589),Wm=i.n(Hm),zm=i(550),Km={};Km.styleTagTransform=Wm(),Km.setAttributes=Dm(),Km.insert=Bm().bind(null,"head"),Km.domAPI=Mm(),Km.insertStyleElement=Fm(),Um()(zm.Z,Km),zm.Z&&zm.Z.locals&&zm.Z.locals,Af.register(Rv({sameUrlStrategy:"reload"})).app(jm).start()})()})();